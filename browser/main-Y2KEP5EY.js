import{A as Oi,B as gg,C as mg,D as w,E as xe,F as ce,G as xc,H as vg,I as ki,J as we,K as Ft,L as ws,M as Rc,N as yg,O as gr,P as Pi,Q as _g,R as Cg,S as rn,T as Re,a as v,b as B,c as ct,d as ig,e as ys,f as og,g as sg,h as g,i as pr,j as _s,k as ag,l as lg,m as pe,n as cg,o as Nc,p as ug,q as Et,r as dg,s as fg,t as Cs,u as le,v as hg,w as pg,x as Ye,y as nn,z as Ds}from"./chunk-GSGJEBQA.js";function Dg(e,t){return Object.is(e,t)}var ue=null,Es=!1,Is=1,Lt=Symbol("SIGNAL");function H(e){let t=ue;return ue=e,t}function wg(){return ue}var Li={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Pc(e){if(Es)throw new Error("");if(ue===null)return;ue.consumerOnSignalRead(e);let t=ue.nextProducerIndex++;if(Ms(ue),t<ue.producerNode.length&&ue.producerNode[t]!==e&&Fi(ue)){let n=ue.producerNode[t];Ts(n,ue.producerIndexOfThis[t])}ue.producerNode[t]!==e&&(ue.producerNode[t]=e,ue.producerIndexOfThis[t]=Fi(ue)?Sg(e,ue,t):0),ue.producerLastReadVersion[t]=e.version}function hE(){Is++}function Eg(e){if(!(Fi(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Is)){if(!e.producerMustRecompute(e)&&!Lc(e)){e.dirty=!1,e.lastCleanEpoch=Is;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=Is}}function Ig(e){if(e.liveConsumerNode===void 0)return;let t=Es;Es=!0;try{for(let n of e.liveConsumerNode)n.dirty||pE(n)}finally{Es=t}}function bg(){return ue?.consumerAllowSignalWrites!==!1}function pE(e){e.dirty=!0,Ig(e),e.consumerMarkedDirty?.(e)}function Ss(e){return e&&(e.nextProducerIndex=0),H(e)}function Fc(e,t){if(H(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Fi(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Ts(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Lc(e){Ms(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Eg(n),r!==n.version))return!0}return!1}function Vc(e){if(Ms(e),Fi(e))for(let t=0;t<e.producerNode.length;t++)Ts(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Sg(e,t,n){if(Tg(e),e.liveConsumerNode.length===0&&Mg(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=Sg(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function Ts(e,t){if(Tg(e),e.liveConsumerNode.length===1&&Mg(e))for(let r=0;r<e.producerNode.length;r++)Ts(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];Ms(i),i.producerIndexOfThis[r]=t}}function Fi(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Ms(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Tg(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Mg(e){return e.producerNode!==void 0}function Ag(e){let t=Object.create(gE);t.computation=e;let n=()=>{if(Eg(t),Pc(t),t.value===bs)throw t.error;return t.value};return n[Lt]=t,n}var Oc=Symbol("UNSET"),kc=Symbol("COMPUTING"),bs=Symbol("ERRORED"),gE=B(v({},Li),{value:Oc,dirty:!0,error:null,equal:Dg,producerMustRecompute(e){return e.value===Oc||e.value===kc},producerRecomputeValue(e){if(e.value===kc)throw new Error("Detected cycle in computations.");let t=e.value;e.value=kc;let n=Ss(e),r;try{r=e.computation()}catch(i){r=bs,e.error=i}finally{Fc(e,n)}if(t!==Oc&&t!==bs&&r!==bs&&e.equal(t,r)){e.value=t;return}e.value=r,e.version++}});function mE(){throw new Error}var Ng=mE;function xg(){Ng()}function Rg(e){Ng=e}var vE=null;function Og(e){let t=Object.create(Pg);t.value=e;let n=()=>(Pc(t),t.value);return n[Lt]=t,n}function jc(e,t){bg()||xg(),e.equal(e.value,t)||(e.value=t,yE(e))}function kg(e,t){bg()||xg(),jc(e,t(e.value))}var Pg=B(v({},Li),{equal:Dg,value:void 0});function yE(e){e.version++,hE(),Ig(e),vE?.()}function M(e){return typeof e=="function"}function mr(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var As=mr(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Rn(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var ae=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(M(r))try{r()}catch(o){t=o instanceof As?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Fg(o)}catch(s){t=t??[],s instanceof As?t=[...t,...s.errors]:t.push(s)}}if(t)throw new As(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Fg(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Rn(n,t)}remove(t){let{_finalizers:n}=this;n&&Rn(n,t),t instanceof e&&t._removeParent(this)}};ae.EMPTY=(()=>{let e=new ae;return e.closed=!0,e})();var Bc=ae.EMPTY;function Ns(e){return e instanceof ae||e&&"closed"in e&&M(e.remove)&&M(e.add)&&M(e.unsubscribe)}function Fg(e){M(e)?e():e.unsubscribe()}var ut={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var vr={setTimeout(e,t,...n){let{delegate:r}=vr;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=vr;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function xs(e){vr.setTimeout(()=>{let{onUnhandledError:t}=ut;if(t)t(e);else throw e})}function On(){}var Lg=Uc("C",void 0,void 0);function Vg(e){return Uc("E",void 0,e)}function jg(e){return Uc("N",e,void 0)}function Uc(e,t,n){return{kind:e,value:t,error:n}}var kn=null;function yr(e){if(ut.useDeprecatedSynchronousErrorHandling){let t=!kn;if(t&&(kn={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=kn;if(kn=null,n)throw r}}else e()}function Bg(e){ut.useDeprecatedSynchronousErrorHandling&&kn&&(kn.errorThrown=!0,kn.error=e)}var Pn=class extends ae{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Ns(t)&&t.add(this)):this.destination=DE}static create(t,n,r){return new Vt(t,n,r)}next(t){this.isStopped?Hc(jg(t),this):this._next(t)}error(t){this.isStopped?Hc(Vg(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Hc(Lg,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},_E=Function.prototype.bind;function $c(e,t){return _E.call(e,t)}var Gc=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Rs(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Rs(r)}else Rs(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Rs(n)}}},Vt=class extends Pn{constructor(t,n,r){super();let i;if(M(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&ut.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&$c(t.next,o),error:t.error&&$c(t.error,o),complete:t.complete&&$c(t.complete,o)}):i=t}this.destination=new Gc(i)}};function Rs(e){ut.useDeprecatedSynchronousErrorHandling?Bg(e):xs(e)}function CE(e){throw e}function Hc(e,t){let{onStoppedNotification:n}=ut;n&&vr.setTimeout(()=>n(e,t))}var DE={closed:!0,next:On,error:CE,complete:On};var _r=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ye(e){return e}function Wc(...e){return zc(e)}function zc(e){return e.length===0?ye:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var j=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=EE(n)?n:new Vt(n,r,i);return yr(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Ug(r),new r((i,o)=>{let s=new Vt({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[_r](){return this}pipe(...n){return zc(n)(this)}toPromise(n){return n=Ug(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function Ug(e){var t;return(t=e??ut.Promise)!==null&&t!==void 0?t:Promise}function wE(e){return e&&M(e.next)&&M(e.error)&&M(e.complete)}function EE(e){return e&&e instanceof Pn||wE(e)&&Ns(e)}function qc(e){return M(e?.lift)}function R(e){return t=>{if(qc(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function N(e,t,n,r,i){return new Yc(e,t,n,r,i)}var Yc=class extends Pn{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Cr(){return R((e,t)=>{let n=null;e._refCount++;let r=N(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var Dr=class extends j{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,qc(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new ae;let n=this.getSubject();t.add(this.source.subscribe(N(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=ae.EMPTY)}return t}refCount(){return Cr()(this)}};var $g=mr(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=(()=>{class e extends j{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Os(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new $g}next(n){yr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){yr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){yr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Bc:(this.currentObservers=null,o.push(n),new ae(()=>{this.currentObservers=null,Rn(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new j;return n.source=this,n}}return e.create=(t,n)=>new Os(t,n),e})(),Os=class extends re{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Bc}};var _e=class extends re{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Vi={now(){return(Vi.delegate||Date).now()},delegate:void 0};var ks=class extends re{constructor(t=1/0,n=1/0,r=Vi){super(),this._bufferSize=t,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,n)}next(t){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(t),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(t),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!t.closed;s+=r?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),n}_trimBuffer(){let{_bufferSize:t,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*t;if(t<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let l=1;l<r.length&&r[l]<=s;l+=2)a=l;a&&r.splice(0,a+1)}}};var Ps=class extends ae{constructor(t,n){super()}schedule(t,n=0){return this}};var ji={setInterval(e,t,...n){let{delegate:r}=ji;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=ji;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var wr=class extends Ps{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return ji.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ji.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Rn(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var Er=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};Er.now=Vi.now;var Ir=class extends Er{constructor(t,n=Er.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var Bi=new Ir(wr);var Fs=class extends wr{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}schedule(t,n=0){return n>0?super.schedule(t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)}execute(t,n){return n>0||this.closed?super.execute(t,n):this._execute(t,n)}requestAsyncId(t,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(t,n,r):(t.flush(this),0)}};var Ls=class extends Ir{};var Qc=new Ls(Fs);var Ee=new j(e=>e.complete());function Hg(e){return e&&M(e.schedule)}function Zc(e){return e[e.length-1]}function br(e){return M(Zc(e))?e.pop():void 0}function It(e){return Hg(Zc(e))?e.pop():void 0}function Gg(e,t){return typeof Zc(e)=="number"?e.pop():t}var Vs=e=>e&&typeof e.length=="number"&&typeof e!="function";function js(e){return M(e?.then)}function Bs(e){return M(e[_r])}function Us(e){return Symbol.asyncIterator&&M(e?.[Symbol.asyncIterator])}function $s(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function IE(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Hs=IE();function Gs(e){return M(e?.[Hs])}function Ws(e){return og(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield ys(n.read());if(i)return yield ys(void 0);yield yield ys(r)}}finally{n.releaseLock()}})}function zs(e){return M(e?.getReader)}function Z(e){if(e instanceof j)return e;if(e!=null){if(Bs(e))return bE(e);if(Vs(e))return SE(e);if(js(e))return TE(e);if(Us(e))return Wg(e);if(Gs(e))return ME(e);if(zs(e))return AE(e)}throw $s(e)}function bE(e){return new j(t=>{let n=e[_r]();if(M(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function SE(e){return new j(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function TE(e){return new j(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,xs)})}function ME(e){return new j(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function Wg(e){return new j(t=>{NE(e,t).catch(n=>t.error(n))})}function AE(e){return Wg(Ws(e))}function NE(e,t){var n,r,i,o;return ig(this,void 0,void 0,function*(){try{for(n=sg(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function Oe(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function Qe(e,t=0){return R((n,r)=>{n.subscribe(N(r,i=>Oe(r,e,()=>r.next(i),t),()=>Oe(r,e,()=>r.complete(),t),i=>Oe(r,e,()=>r.error(i),t)))})}function dt(e,t=0){return R((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function zg(e,t){return Z(e).pipe(dt(t),Qe(t))}function qg(e,t){return Z(e).pipe(dt(t),Qe(t))}function Yg(e,t){return new j(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function Qg(e,t){return new j(n=>{let r;return Oe(n,t,()=>{r=e[Hs](),Oe(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>M(r?.return)&&r.return()})}function qs(e,t){if(!e)throw new Error("Iterable cannot be null");return new j(n=>{Oe(n,t,()=>{let r=e[Symbol.asyncIterator]();Oe(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Zg(e,t){return qs(Ws(e),t)}function Kg(e,t){if(e!=null){if(Bs(e))return zg(e,t);if(Vs(e))return Yg(e,t);if(js(e))return qg(e,t);if(Us(e))return qs(e,t);if(Gs(e))return Qg(e,t);if(zs(e))return Zg(e,t)}throw $s(e)}function J(e,t){return t?Kg(e,t):Z(e)}function I(...e){let t=It(e);return J(e,t)}function Sr(e,t){let n=M(e)?e:()=>e,r=i=>i.error(n());return new j(t?i=>t.schedule(r,0,i):r)}function Kc(e){return!!e&&(e instanceof j||M(e.lift)&&M(e.subscribe))}var jt=mr(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function S(e,t){return R((n,r)=>{let i=0;n.subscribe(N(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:xE}=Array;function RE(e,t){return xE(t)?e(...t):e(t)}function Ys(e){return S(t=>RE(e,t))}var{isArray:OE}=Array,{getPrototypeOf:kE,prototype:PE,keys:FE}=Object;function Qs(e){if(e.length===1){let t=e[0];if(OE(t))return{args:t,keys:null};if(LE(t)){let n=FE(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function LE(e){return e&&typeof e=="object"&&kE(e)===PE}function Zs(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function Ks(...e){let t=It(e),n=br(e),{args:r,keys:i}=Qs(e);if(r.length===0)return J([],t);let o=new j(VE(r,t,i?s=>Zs(i,s):ye));return n?o.pipe(Ys(n)):o}function VE(e,t,n=ye){return r=>{Xg(t,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)Xg(t,()=>{let c=J(e[l],t),u=!1;c.subscribe(N(r,d=>{o[l]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Xg(e,t,n){e?Oe(n,e,t):t()}function Jg(e,t,n,r,i,o,s,a){let l=[],c=0,u=0,d=!1,f=()=>{d&&!l.length&&!c&&t.complete()},h=m=>c<r?p(m):l.push(m),p=m=>{o&&t.next(m),c++;let C=!1;Z(n(m,u++)).subscribe(N(t,b=>{i?.(b),o?h(b):t.next(b)},()=>{C=!0},void 0,()=>{if(C)try{for(c--;l.length&&c<r;){let b=l.shift();s?Oe(t,s,()=>p(b)):p(b)}f()}catch(b){t.error(b)}}))};return e.subscribe(N(t,h,()=>{d=!0,f()})),()=>{a?.()}}function de(e,t,n=1/0){return M(t)?de((r,i)=>S((o,s)=>t(r,o,i,s))(Z(e(r,i))),n):(typeof t=="number"&&(n=t),R((r,i)=>Jg(r,i,e,n)))}function Ui(e=1/0){return de(ye,e)}function em(){return Ui(1)}function Tr(...e){return em()(J(e,It(e)))}function Xs(e){return new j(t=>{Z(e()).subscribe(t)})}function Xc(...e){let t=br(e),{args:n,keys:r}=Qs(e),i=new j(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let d=!1;Z(n[u]).subscribe(N(o,f=>{d||(d=!0,c--),a[u]=f},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(r?Zs(r,a):a),o.complete())}))}});return t?i.pipe(Ys(t)):i}function Mr(...e){let t=It(e),n=Gg(e,1/0),r=e;return r.length?r.length===1?Z(r[0]):Ui(n)(J(r,t)):Ee}function Ue(e,t){return R((n,r)=>{let i=0;n.subscribe(N(r,o=>e.call(t,o,i++)&&r.next(o)))})}function on(e){return R((t,n)=>{let r=null,i=!1,o;r=t.subscribe(N(n,void 0,void 0,s=>{o=Z(e(s,on(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function tm(e,t,n,r,i){return(o,s)=>{let a=n,l=t,c=0;o.subscribe(N(s,u=>{let d=c++;l=a?e(l,u,d):(a=!0,u),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function Ar(e,t){return M(t)?de(e,t,1):de(e,1)}function sn(e){return R((t,n)=>{let r=!1;t.subscribe(N(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function Bt(e){return e<=0?()=>Ee:R((t,n)=>{let r=0;t.subscribe(N(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Jc(e){return S(()=>e)}function eu(e,t=ye){return e=e??jE,R((n,r)=>{let i,o=!0;n.subscribe(N(r,s=>{let a=t(s);(o||!e(i,a))&&(o=!1,i=a,r.next(s))}))})}function jE(e,t){return e===t}function Js(e=BE){return R((t,n)=>{let r=!1;t.subscribe(N(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function BE(){return new jt}function $i(e){return R((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Ze(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Ue((i,o)=>e(i,o,r)):ye,Bt(1),n?sn(t):Js(()=>new jt))}function Nr(e){return e<=0?()=>Ee:R((t,n)=>{let r=[];t.subscribe(N(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function tu(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Ue((i,o)=>e(i,o,r)):ye,Nr(1),n?sn(t):Js(()=>new jt))}function xr(e,t){return R(tm(e,t,arguments.length>=2,!0))}function Hi(e={}){let{connector:t=()=>new re,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let s,a,l,c=0,u=!1,d=!1,f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),s=l=void 0,u=d=!1},p=()=>{let m=s;h(),m?.unsubscribe()};return R((m,C)=>{c++,!d&&!u&&f();let b=l=l??t();C.add(()=>{c--,c===0&&!d&&!u&&(a=nu(p,i))}),b.subscribe(C),!s&&c>0&&(s=new Vt({next:$=>b.next($),error:$=>{d=!0,f(),a=nu(h,n,$),b.error($)},complete:()=>{u=!0,f(),a=nu(h,r),b.complete()}}),Z(m).subscribe(s))})(o)}}function nu(e,t,...n){if(t===!0){e();return}if(t===!1)return;let r=new Vt({next:()=>{r.unsubscribe(),e()}});return Z(t(...n)).subscribe(r)}function ea(e,t,n){let r,i=!1;return e&&typeof e=="object"?{bufferSize:r=1/0,windowTime:t=1/0,refCount:i=!1,scheduler:n}=e:r=e??1/0,Hi({connector:()=>new ks(r,t,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ru(e){return R((t,n)=>{let r=!1,i=0;t.subscribe(N(n,o=>(r||(r=!e(o,i++)))&&n.next(o)))})}function iu(...e){let t=It(e);return R((n,r)=>{(t?Tr(e,n,t):Tr(e,n)).subscribe(r)})}function ie(e,t){return R((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(N(r,l=>{i?.unsubscribe();let c=0,u=o++;Z(e(l,u)).subscribe(i=N(r,d=>r.next(t?t(l,d,u,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function ta(e,t){return M(t)?ie(()=>e,t):ie(()=>e)}function ou(e){return R((t,n)=>{Z(e).subscribe(N(n,()=>n.complete(),On)),!n.closed&&t.subscribe(n)})}function fe(e,t,n){let r=M(e)||t||n?{next:e,error:t,complete:n}:e;return r?R((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(N(o,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),o.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):ye}function su(...e){let t=br(e);return R((n,r)=>{let i=e.length,o=new Array(i),s=e.map(()=>!1),a=!1;for(let l=0;l<i;l++)Z(e[l]).subscribe(N(r,c=>{o[l]=c,!a&&!s[l]&&(s[l]=!0,(a=s.every(ye))&&(s=null))},On));n.subscribe(N(r,l=>{if(a){let c=[l,...o];r.next(t?t(...c):c)}}))})}var UE="https://g.co/ng/security#xss",T=class extends Error{constructor(t,n){super(od(t,n)),this.code=t}};function od(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function eo(e){return{toString:e}.toString()}var na="__parameters__";function $E(e){return function(...n){if(e){let r=e(...n);for(let i in r)this[i]=r[i]}}}function HE(e,t,n){return eo(()=>{let r=$E(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,c,u){let d=l.hasOwnProperty(na)?l[na]:Object.defineProperty(l,na,{value:[]})[na];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}function K(e){for(let t in e)if(e[t]===K)return t;throw Error("Could not find renamed property on target object.")}function GE(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function be(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(be).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function nm(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var WE=K({__forward_ref__:K});function Wn(e){return e.__forward_ref__=Wn,e.toString=function(){return be(this())},e}function Ie(e){return jm(e)?e():e}function jm(e){return typeof e=="function"&&e.hasOwnProperty(WE)&&e.__forward_ref__===Wn}function E(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ke(e){return{providers:e.providers||[],imports:e.imports||[]}}function ka(e){return rm(e,Um)||rm(e,$m)}function Bm(e){return ka(e)!==null}function rm(e,t){return e.hasOwnProperty(t)?e[t]:null}function zE(e){let t=e&&(e[Um]||e[$m]);return t||null}function im(e){return e&&(e.hasOwnProperty(om)||e.hasOwnProperty(qE))?e[om]:null}var Um=K({\u0275prov:K}),om=K({\u0275inj:K}),$m=K({ngInjectableDef:K}),qE=K({ngInjectorDef:K}),D=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=E({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Hm(e){return e&&!!e.\u0275providers}var YE=K({\u0275cmp:K}),QE=K({\u0275dir:K}),ZE=K({\u0275pipe:K}),KE=K({\u0275mod:K}),da=K({\u0275fac:K}),zi=K({__NG_ELEMENT_ID__:K}),sm=K({__NG_ENV_ID__:K});function fa(e){return typeof e=="string"?e:e==null?"":String(e)}function XE(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():fa(e)}function JE(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new T(-200,e)}function sd(e,t){throw new T(-201,!1)}var P=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(P||{}),Cu;function Gm(){return Cu}function Ke(e){let t=Cu;return Cu=e,t}function Wm(e,t,n){let r=ka(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&P.Optional)return null;if(t!==void 0)return t;sd(e,"Injector")}var eI={},qi=eI,Du="__NG_DI_FLAG__",ha="ngTempTokenPath",tI="ngTokenPath",nI=/\n/gm,rI="\u0275",am="__source",Pr;function iI(){return Pr}function an(e){let t=Pr;return Pr=e,t}function oI(e,t=P.Default){if(Pr===void 0)throw new T(-203,!1);return Pr===null?Wm(e,void 0,t):Pr.get(e,t&P.Optional?null:void 0,t)}function _(e,t=P.Default){return(Gm()||oI)(Ie(e),t)}function y(e,t=P.Default){return _(e,Pa(t))}function Pa(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function wu(e){let t=[];for(let n=0;n<e.length;n++){let r=Ie(e[n]);if(Array.isArray(r)){if(r.length===0)throw new T(900,!1);let i,o=P.Default;for(let s=0;s<r.length;s++){let a=r[s],l=aI(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}t.push(_(i,o))}else t.push(_(r))}return t}function sI(e,t){return e[Du]=t,e.prototype[Du]=t,e}function aI(e){return e[Du]}function lI(e,t,n,r){let i=e[ha];throw t[am]&&i.unshift(t[am]),e.message=cI(`
`+e.message,i,n,r),e[tI]=i,e[ha]=null,e}function cI(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==rI?e.slice(2):e;let i=be(t);if(Array.isArray(t))i=t.map(be).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):be(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(nI,`
  `)}`}var Fa=sI(HE("Optional"),8);function Lr(e,t){let n=e.hasOwnProperty(da);return n?e[da]:null}function ad(e,t){e.forEach(n=>Array.isArray(n)?ad(n,t):t(n))}function zm(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function pa(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function uI(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function dI(e,t,n){let r=to(e,t);return r>=0?e[r|1]=n:(r=~r,uI(e,r,t,n)),r}function au(e,t){let n=to(e,t);if(n>=0)return e[n|1]}function to(e,t){return fI(e,t,1)}function fI(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}var Vr={},Xe=[],jr=new D(""),qm=new D("",-1),Ym=new D(""),ga=class{get(t,n=qi){if(n===qi){let r=new Error(`NullInjectorError: No provider for ${be(t)}!`);throw r.name="NullInjectorError",r}return n}},Qm=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Qm||{}),Tt=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Tt||{}),un=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(un||{});function hI(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function Eu(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];gI(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function pI(e){return e===3||e===4||e===6}function gI(e){return e.charCodeAt(0)===64}function Yi(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?lm(e,n,i,null,t[++r]):lm(e,n,i,null,null))}}return e}function lm(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(e[o+1]=i);return}else if(r===e[o+1]){e[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),r!==null&&e.splice(o++,0,r),i!==null&&e.splice(o++,0,i)}var Zm="ng-template";function mI(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&hI(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(ld(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function ld(e){return e.type===4&&e.value!==Zm}function vI(e,t,n){let r=e.type===4&&!n?Zm:e.value;return t===r}function yI(e,t,n){let r=4,i=e.attrs,o=i!==null?DI(i):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!ft(r)&&!ft(l))return!1;if(s&&ft(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!vI(e,l,n)||l===""&&t.length===1){if(ft(r))return!1;s=!0}}else if(r&8){if(i===null||!mI(e,i,l,n)){if(ft(r))return!1;s=!0}}else{let c=t[++a],u=_I(l,i,ld(e),n);if(u===-1){if(ft(r))return!1;s=!0;continue}if(c!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&c!==d){if(ft(r))return!1;s=!0}}}}return ft(r)||s}function ft(e){return(e&1)===0}function _I(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return wI(t,e)}function CI(e,t,n=!1){for(let r=0;r<t.length;r++)if(yI(e,t[r],n))return!0;return!1}function DI(e){for(let t=0;t<e.length;t++){let n=e[t];if(pI(n))return t}return e.length}function wI(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function cm(e,t){return e?":not("+t.trim()+")":t}function EI(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!ft(s)&&(t+=cm(o,i),i=""),r=s,o=o||!ft(r);n++}return i!==""&&(t+=cm(o,i)),t}function II(e){return e.map(EI).join(",")}function bI(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!ft(i))break;i=o}r++}return{attrs:t,classes:n}}function Zr(e){return eo(()=>{let t=tv(e),n=B(v({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Qm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Tt.Emulated,styles:e.styles||Xe,_:null,schemas:e.schemas||null,tView:null,id:""});nv(n);let r=e.dependencies;return n.directiveDefs=dm(r,!1),n.pipeDefs=dm(r,!0),n.id=MI(n),n})}function SI(e){return Ln(e)||Km(e)}function TI(e){return e!==null}function Pe(e){return eo(()=>({type:e.type,bootstrap:e.bootstrap||Xe,declarations:e.declarations||Xe,imports:e.imports||Xe,exports:e.exports||Xe,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function um(e,t){if(e==null)return Vr;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a=un.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),t?(n[o]=a!==un.None?[r,a]:r,t[o]=s):n[o]=r}return n}function Fe(e){return eo(()=>{let t=tv(e);return nv(t),t})}function Ln(e){return e[YE]||null}function Km(e){return e[QE]||null}function Xm(e){return e[ZE]||null}function Jm(e){let t=Ln(e)||Km(e)||Xm(e);return t!==null?t.standalone:!1}function ev(e,t){let n=e[KE]||null;if(!n&&t===!0)throw new Error(`Type ${be(e)} does not have '\u0275mod' property.`);return n}function tv(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Vr,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Xe,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:um(e.inputs,t),outputs:um(e.outputs),debugInfo:null}}function nv(e){e.features?.forEach(t=>t(e))}function dm(e,t){if(!e)return null;let n=t?Xm:SI;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(TI)}function MI(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function La(e){return{\u0275providers:e}}function AI(...e){return{\u0275providers:rv(!0,e),\u0275fromNgModule:!0}}function rv(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return ad(t,s=>{let a=s;Iu(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&iv(i,o),n}function iv(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];cd(i,o=>{t(o,r)})}}function Iu(e,t,n,r){if(e=Ie(e),!e)return!1;let i=null,o=im(e),s=!o&&Ln(e);if(!o&&!s){let l=e.ngModule;if(o=im(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)Iu(c,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{ad(o.imports,u=>{Iu(u,t,n,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&iv(c,t)}if(!a){let c=Lr(i)||(()=>new i);t({provide:i,useFactory:c,deps:Xe},i),t({provide:Ym,useValue:i,multi:!0},i),t({provide:jr,useValue:()=>_(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let c=e;cd(l,u=>{t(u,c)})}}else return!1;return i!==e&&e.providers!==void 0}function cd(e,t){for(let n of e)Hm(n)&&(n=n.\u0275providers),Array.isArray(n)?cd(n,t):t(n)}var NI=K({provide:String,useValue:K});function ov(e){return e!==null&&typeof e=="object"&&NI in e}function xI(e){return!!(e&&e.useExisting)}function RI(e){return!!(e&&e.useFactory)}function Br(e){return typeof e=="function"}function OI(e){return!!e.useClass}var Va=new D(""),sa={},kI={},lu;function ud(){return lu===void 0&&(lu=new ga),lu}var tt=class{},Qi=class extends tt{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Su(t,s=>this.processProvider(s)),this.records.set(qm,Rr(void 0,this)),i.has("environment")&&this.records.set(tt,Rr(void 0,this));let o=this.records.get(Va);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ym,Xe,P.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=H(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),H(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=an(this),r=Ke(void 0),i;try{return t()}finally{an(n),Ke(r)}}get(t,n=qi,r=P.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(sm))return t[sm](this);r=Pa(r);let i,o=an(this),s=Ke(void 0);try{if(!(r&P.SkipSelf)){let l=this.records.get(t);if(l===void 0){let c=jI(t)&&ka(t);c&&this.injectableDefInScope(c)?l=Rr(bu(t),sa):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=r&P.Self?ud():this.parent;return n=r&P.Optional&&n===qi?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[ha]=a[ha]||[]).unshift(be(t)),o)throw a;return lI(a,t,"R3InjectorError",this.source)}else throw a}finally{Ke(s),an(o)}}resolveInjectorInitializers(){let t=H(null),n=an(this),r=Ke(void 0),i;try{let o=this.get(jr,Xe,P.Self);for(let s of o)s()}finally{an(n),Ke(r),H(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(be(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new T(205,!1)}processProvider(t){t=Ie(t);let n=Br(t)?t:Ie(t&&t.provide),r=FI(t);if(!Br(t)&&t.multi===!0){let i=this.records.get(n);i||(i=Rr(void 0,sa,!0),i.factory=()=>wu(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=H(null);try{return n.value===sa&&(n.value=kI,n.value=n.factory()),typeof n.value=="object"&&n.value&&VI(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{H(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Ie(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function bu(e){let t=ka(e),n=t!==null?t.factory:Lr(e);if(n!==null)return n;if(e instanceof D)throw new T(204,!1);if(e instanceof Function)return PI(e);throw new T(204,!1)}function PI(e){if(e.length>0)throw new T(204,!1);let n=zE(e);return n!==null?()=>n.factory(e):()=>new e}function FI(e){if(ov(e))return Rr(void 0,e.useValue);{let t=sv(e);return Rr(t,sa)}}function sv(e,t,n){let r;if(Br(e)){let i=Ie(e);return Lr(i)||bu(i)}else if(ov(e))r=()=>Ie(e.useValue);else if(RI(e))r=()=>e.useFactory(...wu(e.deps||[]));else if(xI(e))r=()=>_(Ie(e.useExisting));else{let i=Ie(e&&(e.useClass||e.provide));if(LI(e))r=()=>new i(...wu(e.deps));else return Lr(i)||bu(i)}return r}function Rr(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function LI(e){return!!e.deps}function VI(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function jI(e){return typeof e=="function"||typeof e=="object"&&e instanceof D}function Su(e,t){for(let n of e)Array.isArray(n)?Su(n,t):n&&Hm(n)?Su(n.\u0275providers,t):t(n)}function zt(e,t){e instanceof Qi&&e.assertNotDestroyed();let n,r=an(e),i=Ke(void 0);try{return t()}finally{an(r),Ke(i)}}function BI(){return Gm()!==void 0||iI()!=null}function UI(e){return typeof e=="function"}var qt=0,U=1,A=2,Se=3,ht=4,pt=5,ma=6,va=7,Ut=8,Ur=9,$t=10,ge=11,Zi=12,fm=13,no=14,Mt=15,$r=16,Or=17,Hr=18,ja=19,av=20,ln=21,cu=22,Je=23,dn=25,lv=1;var Vn=7,ya=8,_a=9,et=10,Ca=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Ca||{});function cn(e){return Array.isArray(e)&&typeof e[lv]=="object"}function Yt(e){return Array.isArray(e)&&e[lv]===!0}function cv(e){return(e.flags&4)!==0}function Ba(e){return e.componentOffset>-1}function dd(e){return(e.flags&1)===1}function fn(e){return!!e.template}function Tu(e){return(e[A]&512)!==0}var Mu=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function uv(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function Kr(){return dv}function dv(e){return e.type.prototype.ngOnChanges&&(e.setInput=HI),$I}Kr.ngInherit=!0;function $I(){let e=hv(this),t=e?.current;if(t){let n=e.previous;if(n===Vr)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function HI(e,t,n,r,i){let o=this.declaredInputs[r],s=hv(e)||GI(e,{previous:Vr,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new Mu(c&&c.currentValue,n,l===Vr),uv(e,t,i,n)}var fv="__ngSimpleChanges__";function hv(e){return e[fv]||null}function GI(e,t){return e[fv]=t}var hm=null;var bt=function(e,t,n){hm?.(e,t,n)},WI="svg",zI="math";function At(e){for(;Array.isArray(e);)e=e[qt];return e}function pv(e,t){return At(t[e])}function gt(e,t){return At(t[e.index])}function gv(e,t){return e.data[t]}function gn(e,t){let n=t[e];return cn(n)?n:n[qt]}function fd(e){return(e[A]&128)===128}function qI(e){return Yt(e[Se])}function Da(e,t){return t==null?null:e[t]}function mv(e){e[Or]=0}function vv(e){e[A]&1024||(e[A]|=1024,fd(e)&&$a(e))}function Ua(e){return!!(e[A]&9216||e[Je]?.dirty)}function Au(e){e[$t].changeDetectionScheduler?.notify(8),e[A]&64&&(e[A]|=1024),Ua(e)&&$a(e)}function $a(e){e[$t].changeDetectionScheduler?.notify(0);let t=jn(e);for(;t!==null&&!(t[A]&8192||(t[A]|=8192,!fd(t)));)t=jn(t)}function yv(e,t){if((e[A]&256)===256)throw new T(911,!1);e[ln]===null&&(e[ln]=[]),e[ln].push(t)}function YI(e,t){if(e[ln]===null)return;let n=e[ln].indexOf(t);n!==-1&&e[ln].splice(n,1)}function jn(e){let t=e[Se];return Yt(t)?t[Se]:t}var G={lFrame:Mv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var _v=!1;function QI(){return G.lFrame.elementDepthCount}function ZI(){G.lFrame.elementDepthCount++}function KI(){G.lFrame.elementDepthCount--}function Cv(){return G.bindingsEnabled}function XI(){return G.skipHydrationRootTNode!==null}function JI(e){return G.skipHydrationRootTNode===e}function eb(){G.skipHydrationRootTNode=null}function oe(){return G.lFrame.lView}function nt(){return G.lFrame.tView}function Le(){let e=Dv();for(;e!==null&&e.type===64;)e=e.parent;return e}function Dv(){return G.lFrame.currentTNode}function tb(){let e=G.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function ro(e,t){let n=G.lFrame;n.currentTNode=e,n.isParent=t}function wv(){return G.lFrame.isParent}function nb(){G.lFrame.isParent=!1}function Ev(){return _v}function pm(e){_v=e}function rb(){return G.lFrame.bindingIndex}function ib(e){return G.lFrame.bindingIndex=e}function hd(){return G.lFrame.bindingIndex++}function Iv(e){let t=G.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function ob(){return G.lFrame.inI18n}function sb(e,t){let n=G.lFrame;n.bindingIndex=n.bindingRootIndex=e,Nu(t)}function ab(){return G.lFrame.currentDirectiveIndex}function Nu(e){G.lFrame.currentDirectiveIndex=e}function lb(e){let t=G.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function bv(e){G.lFrame.currentQueryIndex=e}function cb(e){let t=e[U];return t.type===2?t.declTNode:t.type===1?e[pt]:null}function Sv(e,t,n){if(n&P.SkipSelf){let i=t,o=e;for(;i=i.parent,i===null&&!(n&P.Host);)if(i=cb(o),i===null||(o=o[no],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=G.lFrame=Tv();return r.currentTNode=t,r.lView=e,!0}function pd(e){let t=Tv(),n=e[U];G.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Tv(){let e=G.lFrame,t=e===null?null:e.child;return t===null?Mv(e):t}function Mv(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function Av(){let e=G.lFrame;return G.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Nv=Av;function gd(){let e=Av();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function zn(){return G.lFrame.selectedIndex}function Bn(e){G.lFrame.selectedIndex=e}function xv(){let e=G.lFrame;return gv(e.tView,e.selectedIndex)}function ub(){return G.lFrame.currentNamespace}var Rv=!0;function md(){return Rv}function vd(e){Rv=e}function db(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=dv(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function yd(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),l&&(e.viewHooks??=[]).push(-n,l),c&&((e.viewHooks??=[]).push(n,c),(e.viewCheckHooks??=[]).push(n,c)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function aa(e,t,n){Ov(e,t,3,n)}function la(e,t,n,r){(e[A]&3)===n&&Ov(e,t,n,r)}function uu(e,t){let n=e[A];(n&3)===t&&(n&=16383,n+=1,e[A]=n)}function Ov(e,t,n,r){let i=r!==void 0?e[Or]&65535:0,o=r??-1,s=t.length-1,a=0;for(let l=i;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],r!=null&&a>=r)break}else t[l]<0&&(e[Or]+=65536),(a<o||o==-1)&&(fb(e,n,t,l),e[Or]=(e[Or]&4294901760)+l+2),l++}function gm(e,t){bt(4,e,t);let n=H(null);try{t.call(e)}finally{H(n),bt(5,e,t)}}function fb(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[A]>>14<e[Or]>>16&&(e[A]&3)===t&&(e[A]+=16384,gm(a,o)):gm(a,o)}var Fr=-1,Un=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function hb(e){return e instanceof Un}function pb(e){return(e.flags&8)!==0}function gb(e){return(e.flags&16)!==0}var du={},xu=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Pa(r);let i=this.injector.get(t,du,r);return i!==du||n===du?i:this.parentInjector.get(t,n,r)}};function kv(e){return e!==Fr}function wa(e){return e&32767}function mb(e){return e>>16}function Ea(e,t){let n=mb(e),r=t;for(;n>0;)r=r[no],n--;return r}var Ru=!0;function mm(e){let t=Ru;return Ru=e,t}var vb=256,Pv=vb-1,Fv=5,yb=0,St={};function _b(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(zi)&&(r=n[zi]),r==null&&(r=n[zi]=yb++);let i=r&Pv,o=1<<i;t.data[e+(i>>Fv)]|=o}function Ia(e,t){let n=Lv(e,t);if(n!==-1)return n;let r=t[U];r.firstCreatePass&&(e.injectorIndex=t.length,fu(r.data,e),fu(t,null),fu(r.blueprint,null));let i=_d(e,t),o=e.injectorIndex;if(kv(i)){let s=wa(i),a=Ea(i,t),l=a[U].data;for(let c=0;c<8;c++)t[o+c]=a[s+c]|l[s+c]}return t[o+8]=i,o}function fu(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Lv(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function _d(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=$v(i),r===null)return Fr;if(n++,i=i[no],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Fr}function Ou(e,t,n){_b(e,t,n)}function Vv(e,t,n){if(n&P.Optional||e!==void 0)return e;sd(t,"NodeInjector")}function jv(e,t,n,r){if(n&P.Optional&&r===void 0&&(r=null),!(n&(P.Self|P.Host))){let i=e[Ur],o=Ke(void 0);try{return i?i.get(t,r,n&P.Optional):Wm(t,r,n&P.Optional)}finally{Ke(o)}}return Vv(r,t,n)}function Bv(e,t,n,r=P.Default,i){if(e!==null){if(t[A]&2048&&!(r&P.Self)){let s=Ib(e,t,n,r,St);if(s!==St)return s}let o=Uv(e,t,n,r,St);if(o!==St)return o}return jv(t,n,r,i)}function Uv(e,t,n,r,i){let o=wb(n);if(typeof o=="function"){if(!Sv(t,e,r))return r&P.Host?Vv(i,n,r):jv(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&P.Optional))sd(n);else return s}finally{Nv()}}else if(typeof o=="number"){let s=null,a=Lv(e,t),l=Fr,c=r&P.Host?t[Mt][pt]:null;for((a===-1||r&P.SkipSelf)&&(l=a===-1?_d(e,t):t[a+8],l===Fr||!ym(r,!1)?a=-1:(s=t[U],a=wa(l),t=Ea(l,t)));a!==-1;){let u=t[U];if(vm(o,a,u.data)){let d=Cb(a,t,n,s,r,c);if(d!==St)return d}l=t[a+8],l!==Fr&&ym(r,t[U].data[a+8]===c)&&vm(o,a,t)?(s=u,a=wa(l),t=Ea(l,t)):a=-1}}return i}function Cb(e,t,n,r,i,o){let s=t[U],a=s.data[e+8],l=r==null?Ba(a)&&Ru:r!=s&&(a.type&3)!==0,c=i&P.Host&&o===a,u=Db(a,s,n,l,c);return u!==null?Gr(t,s,u,a):St}function Db(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,l=e.directiveStart,c=e.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:c;for(let h=d;h<f;h++){let p=s[h];if(h<l&&n===p||h>=l&&p.type===n)return h}if(i){let h=s[l];if(h&&fn(h)&&h.type===n)return l}return null}function Gr(e,t,n,r){let i=e[n],o=t.data;if(hb(i)){let s=i;s.resolving&&JE(XE(o[n]));let a=mm(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?Ke(s.injectImpl):null,u=Sv(e,r,P.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&db(n,o[n],t)}finally{c!==null&&Ke(c),mm(a),s.resolving=!1,Nv()}}return i}function wb(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(zi)?e[zi]:void 0;return typeof t=="number"?t>=0?t&Pv:Eb:t}function vm(e,t,n){let r=1<<e;return!!(n[t+(e>>Fv)]&r)}function ym(e,t){return!(e&P.Self)&&!(e&P.Host&&t)}var Fn=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Bv(this._tNode,this._lView,t,Pa(r),n)}};function Eb(){return new Fn(Le(),oe())}function qn(e){return eo(()=>{let t=e.prototype.constructor,n=t[da]||ku(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[da]||ku(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ku(e){return jm(e)?()=>{let t=ku(Ie(e));return t&&t()}:Lr(e)}function Ib(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[A]&2048&&!(s[A]&512);){let a=Uv(o,s,n,r|P.Self,St);if(a!==St)return a;let l=o.parent;if(!l){let c=s[av];if(c){let u=c.get(n,St,r);if(u!==St)return u}l=$v(s),s=s[no]}o=l}return i}function $v(e){let t=e[U],n=t.type;return n===2?t.declTNode:n===1?e[pt]:null}function _m(e,t=null,n=null,r){let i=Hv(e,t,n,r);return i.resolveInjectorInitializers(),i}function Hv(e,t=null,n=null,r,i=new Set){let o=[n||Xe,AI(e)];return r=r||(typeof e=="object"?void 0:be(e)),new Qi(o,t||ud(),r||null,i)}var hn=class e{static{this.THROW_IF_NOT_FOUND=qi}static{this.NULL=new ga}static create(t,n){if(Array.isArray(t))return _m({name:""},n,t,"");{let r=t.name??"";return _m({name:r},t.parent,t.providers,r)}}static{this.\u0275prov=E({token:e,providedIn:"any",factory:()=>_(qm)})}static{this.__NG_ELEMENT_ID__=-1}};var bb=new D("");bb.__NG_ELEMENT_ID__=e=>{let t=Le();if(t===null)throw new T(204,!1);if(t.type&2)return t.value;if(e&P.Optional)return null;throw new T(204,!1)};var Sb="ngOriginalError";function hu(e){return e[Sb]}var Gv=!0,Wv=(()=>{class e{static{this.__NG_ELEMENT_ID__=Tb}static{this.__NG_ENV_ID__=n=>n}}return e})(),Pu=class extends Wv{constructor(t){super(),this._lView=t}onDestroy(t){return yv(this._lView,t),()=>YI(this._lView,t)}};function Tb(){return new Pu(oe())}var Xr=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new _e(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=E({token:e,providedIn:"root",factory:()=>new e})}}return e})();var Fu=class extends re{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,BI()&&(this.destroyRef=y(Wv,{optional:!0})??void 0,this.pendingTasks=y(Xr,{optional:!0})??void 0)}emit(t){let n=H(null);try{super.next(t)}finally{H(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let l=t;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof ae&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},he=Fu;function ba(...e){}function zv(e){let t,n;function r(){e=ba;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function Cm(e){return queueMicrotask(()=>e()),()=>{e=ba}}var Cd="isAngularZone",Sa=Cd+"_ID",Mb=0,Y=class e{constructor(t){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new he(!1),this.onMicrotaskEmpty=new he(!1),this.onStable=new he(!1),this.onError=new he(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Gv}=t;if(typeof Zone>"u")throw new T(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,xb(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Cd)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new T(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new T(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,Ab,ba,ba);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},Ab={};function Dd(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Nb(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){zv(()=>{e.callbackScheduled=!1,Lu(e),e.isCheckStableRunning=!0,Dd(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Lu(e)}function xb(e){let t=()=>{Nb(e)},n=Mb++;e._inner=e._inner.fork({name:"angular",properties:{[Cd]:!0,[Sa]:n,[Sa+n]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(Rb(l))return r.invokeTask(o,s,a,l);try{return Dm(e),r.invokeTask(o,s,a,l)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),wm(e)}},onInvoke:(r,i,o,s,a,l,c)=>{try{return Dm(e),r.invoke(o,s,a,l,c)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!Ob(l)&&t(),wm(e)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,Lu(e),Dd(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function Lu(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Dm(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function wm(e){e._nesting--,Dd(e)}var Vu=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new he,this.onMicrotaskEmpty=new he,this.onStable=new he,this.onError=new he}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function Rb(e){return qv(e,"__ignore_ng_zone__")}function Ob(e){return qv(e,"__scheduler_tick__")}function qv(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Ht=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&hu(t);for(;n&&hu(n);)n=hu(n);return n||null}},kb=new D("",{providedIn:"root",factory:()=>{let e=y(Y),t=y(Ht);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function Pb(){return Ha(Le(),oe())}function Ha(e,t){return new Qt(gt(e,t))}var Qt=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=Pb}}return e})();function Yv(e){return(e.flags&128)===128}var Qv=new Map,Fb=0;function Lb(){return Fb++}function Vb(e){Qv.set(e[ja],e)}function ju(e){Qv.delete(e[ja])}var Em="__ngContext__";function $n(e,t){cn(t)?(e[Em]=t[ja],Vb(t)):e[Em]=t}function Zv(e){return Xv(e[Zi])}function Kv(e){return Xv(e[ht])}function Xv(e){for(;e!==null&&!Yt(e);)e=e[ht];return e}var Bu;function Jv(e){Bu=e}function jb(){if(Bu!==void 0)return Bu;if(typeof document<"u")return document;throw new T(210,!1)}var wd=new D("",{providedIn:"root",factory:()=>Bb}),Bb="ng",Ed=new D(""),rt=new D("",{providedIn:"platform",factory:()=>"unknown"});var Id=new D("",{providedIn:"root",factory:()=>jb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Ub="h",$b="b";var Hb=()=>null;function bd(e,t,n=!1){return Hb(e,t,n)}var ey=!1,Gb=new D("",{providedIn:"root",factory:()=>ey});var Uu=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${UE})`}};function Sd(e){return e instanceof Uu?e.changingThisBreaksApplicationSecurity:e}function ty(e){return e.ownerDocument}function ny(e){return e instanceof Function?e():e}var Gt=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Gt||{}),Wb;function Td(e,t){return Wb(e,t)}function kr(e,t,n,r,i){if(r!=null){let o,s=!1;Yt(r)?o=r:cn(r)&&(s=!0,r=r[qt]);let a=At(r);e===0&&n!==null?i==null?ay(t,n,a):Ta(t,n,a,i||null,!0):e===1&&n!==null?Ta(t,n,a,i||null,!0):e===2?sS(t,a,s):e===3&&t.destroyNode(a),o!=null&&lS(t,e,o,n,i)}}function zb(e,t){return e.createText(t)}function qb(e,t,n){e.setValue(t,n)}function ry(e,t,n){return e.createElement(t,n)}function Yb(e,t){iy(e,t),t[qt]=null,t[pt]=null}function Qb(e,t,n,r,i,o){r[qt]=i,r[pt]=t,Ga(e,r,n,1,i,o)}function iy(e,t){t[$t].changeDetectionScheduler?.notify(9),Ga(e,t,t[ge],2,null,null)}function Zb(e){let t=e[Zi];if(!t)return pu(e[U],e);for(;t;){let n=null;if(cn(t))n=t[Zi];else{let r=t[et];r&&(n=r)}if(!n){for(;t&&!t[ht]&&t!==e;)cn(t)&&pu(t[U],t),t=t[Se];t===null&&(t=e),cn(t)&&pu(t[U],t),n=t&&t[ht]}t=n}}function Kb(e,t,n,r){let i=et+r,o=n.length;r>0&&(n[i-1][ht]=t),r<o-et?(t[ht]=n[i],zm(n,et+r,t)):(n.push(t),t[ht]=null),t[Se]=n;let s=t[$r];s!==null&&n!==s&&oy(s,t);let a=t[Hr];a!==null&&a.insertView(e),Au(t),t[A]|=128}function oy(e,t){let n=e[_a],r=t[Se];if(cn(r))e[A]|=Ca.HasTransplantedViews;else{let i=r[Se][Mt];t[Mt]!==i&&(e[A]|=Ca.HasTransplantedViews)}n===null?e[_a]=[t]:n.push(t)}function Md(e,t){let n=e[_a],r=n.indexOf(t);n.splice(r,1)}function $u(e,t){if(e.length<=et)return;let n=et+t,r=e[n];if(r){let i=r[$r];i!==null&&i!==e&&Md(i,r),t>0&&(e[n-1][ht]=r[ht]);let o=pa(e,et+t);Yb(r[U],r);let s=o[Hr];s!==null&&s.detachView(o[U]),r[Se]=null,r[ht]=null,r[A]&=-129}return r}function sy(e,t){if(!(t[A]&256)){let n=t[ge];n.destroyNode&&Ga(e,t,n,3,null,null),Zb(t)}}function pu(e,t){if(t[A]&256)return;let n=H(null);try{t[A]&=-129,t[A]|=256,t[Je]&&Vc(t[Je]),Jb(e,t),Xb(e,t),t[U].type===1&&t[ge].destroy();let r=t[$r];if(r!==null&&Yt(t[Se])){r!==t[Se]&&Md(r,t);let i=t[Hr];i!==null&&i.detachView(e)}ju(t)}finally{H(n)}}function Xb(e,t){let n=e.cleanup,r=t[va];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(t[va]=null);let i=t[ln];if(i!==null){t[ln]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function Jb(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof Un)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];bt(4,a,l);try{l.call(a)}finally{bt(5,a,l)}}else{bt(4,i,o);try{o.call(i)}finally{bt(5,i,o)}}}}}function eS(e,t,n){return tS(e,t.parent,n)}function tS(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[qt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=e.data[r.directiveStart+i];if(o===Tt.None||o===Tt.Emulated)return null}return gt(r,n)}}function Ta(e,t,n,r,i){e.insertBefore(t,n,r,i)}function ay(e,t,n){e.appendChild(t,n)}function Im(e,t,n,r,i){r!==null?Ta(e,t,n,r,i):ay(e,t,n)}function ly(e,t){return e.parentNode(t)}function nS(e,t){return e.nextSibling(t)}function rS(e,t,n){return oS(e,t,n)}function iS(e,t,n){return e.type&40?gt(e,n):null}var oS=iS,bm;function Ad(e,t,n,r){let i=eS(e,r,t),o=t[ge],s=r.parent||t[pt],a=rS(s,r,t);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)Im(o,i,n[l],a,!1);else Im(o,i,n,a,!1);bm!==void 0&&bm(o,r,t,n,i)}function Gi(e,t){if(t!==null){let n=t.type;if(n&3)return gt(t,e);if(n&4)return Hu(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Gi(e,r);{let i=e[t.index];return Yt(i)?Hu(-1,i):At(i)}}else{if(n&128)return Gi(e,t.next);if(n&32)return Td(t,e)()||At(e[t.index]);{let r=cy(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=jn(e[Mt]);return Gi(i,r)}else return Gi(e,t.next)}}}return null}function cy(e,t){if(t!==null){let r=e[Mt][pt],i=t.projection;return r.projection[i]}return null}function Hu(e,t){let n=et+e+1;if(n<t.length){let r=t[n],i=r[U].firstChild;if(i!==null)return Gi(r,i)}return t[Vn]}function sS(e,t,n){e.removeChild(null,t,n)}function Nd(e,t,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],l=n.type;if(s&&t===0&&(a&&$n(At(a),r),n.flags|=2),(n.flags&32)!==32)if(l&8)Nd(e,t,n.child,r,i,o,!1),kr(t,e,i,a,o);else if(l&32){let c=Td(n,r),u;for(;u=c();)kr(t,e,i,u,o);kr(t,e,i,a,o)}else l&16?aS(e,t,r,n,i,o):kr(t,e,i,a,o);n=s?n.projectionNext:n.next}}function Ga(e,t,n,r,i,o){Nd(n,r,e.firstChild,t,i,o,!1)}function aS(e,t,n,r,i,o){let s=n[Mt],l=s[pt].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];kr(t,e,i,u,o)}else{let c=l,u=s[Se];Yv(r)&&(c.flags|=128),Nd(e,t,c,u,i,o,!0)}}function lS(e,t,n,r,i){let o=n[Vn],s=At(n);o!==s&&kr(t,e,r,o,i);for(let a=et;a<n.length;a++){let l=n[a];Ga(l[U],l,e,t,r,o)}}function cS(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Gt.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Gt.Important),e.setStyle(n,r,i,o))}}function uS(e,t,n){e.setAttribute(t,"style",n)}function uy(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function dy(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Eu(e,t,r),i!==null&&uy(e,t,i),o!==null&&uS(e,t,o)}var mn={};function vn(e=1){fy(nt(),oe(),zn()+e,!1)}function fy(e,t,n,r){if(!r)if((t[A]&3)===3){let o=e.preOrderCheckHooks;o!==null&&aa(t,o,n)}else{let o=e.preOrderHooks;o!==null&&la(t,o,0,n)}Bn(n)}function Q(e,t=P.Default){let n=oe();if(n===null)return _(e,t);let r=Le();return Bv(r,n,Ie(e),t)}function hy(e,t,n,r,i,o){let s=H(null);try{let a=null;i&un.SignalBased&&(a=t[r][Lt]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&un.HasDecoratorInputTransform&&(o=e.inputTransforms[r].call(t,o)),e.setInput!==null?e.setInput(t,a,o,n,r):uv(t,a,r,o)}finally{H(s)}}function dS(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Bn(~i);else{let o=i,s=n[++r],a=n[++r];sb(s,o);let l=t[o];a(2,l)}}}finally{Bn(-1)}}function Wa(e,t,n,r,i,o,s,a,l,c,u){let d=t.blueprint.slice();return d[qt]=i,d[A]=r|4|128|8|64,(c!==null||e&&e[A]&2048)&&(d[A]|=2048),mv(d),d[Se]=d[no]=e,d[Ut]=n,d[$t]=s||e&&e[$t],d[ge]=a||e&&e[ge],d[Ur]=l||e&&e[Ur]||null,d[pt]=o,d[ja]=Lb(),d[ma]=u,d[av]=c,d[Mt]=t.type==2?e[Mt]:d,d}function za(e,t,n,r,i){let o=e.data[t];if(o===null)o=fS(e,t,n,r,i),ob()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=tb();o.injectorIndex=s===null?-1:s.injectorIndex}return ro(o,!0),o}function fS(e,t,n,r,i){let o=Dv(),s=wv(),a=s?o:o&&o.parent,l=e.data[t]=vS(e,a,n,t,r,i);return e.firstChild===null&&(e.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function py(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function gy(e,t,n,r,i){let o=zn(),s=r&2;try{Bn(-1),s&&t.length>dn&&fy(e,t,dn,!1),bt(s?2:0,i),n(r,i)}finally{Bn(o),bt(s?3:1,i)}}function my(e,t,n){if(cv(t)){let r=H(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{H(r)}}}function vy(e,t,n){Cv()&&(ES(e,t,n,gt(n,t)),(n.flags&64)===64&&Ey(e,t,n))}function yy(e,t,n=gt){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function _y(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=xd(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function xd(e,t,n,r,i,o,s,a,l,c,u){let d=dn+r,f=d+i,h=hS(d,f),p=typeof c=="function"?c():c;return h[U]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function hS(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:mn);return n}function pS(e,t,n,r){let o=r.get(Gb,ey)||n===Tt.ShadowDom,s=e.selectRootElement(t,o);return gS(s),s}function gS(e){mS(e)}var mS=()=>null;function vS(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return XI()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Sm(e,t,n,r,i){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;r??={};let a,l=un.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let c=o;if(i!==null){if(!i.hasOwnProperty(o))continue;c=i[o]}e===0?Tm(r,n,c,a,l):Tm(r,n,c,a)}return r}function Tm(e,t,n,r,i){let o;e.hasOwnProperty(n)?(o=e[n]).push(t,r):o=e[n]=[t,r],i!==void 0&&o.push(i)}function yS(e,t,n){let r=t.directiveStart,i=t.directiveEnd,o=e.data,s=t.attrs,a=[],l=null,c=null;for(let u=r;u<i;u++){let d=o[u],f=n?n.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;l=Sm(0,d.inputs,u,l,h),c=Sm(1,d.outputs,u,c,p);let m=l!==null&&s!==null&&!ld(t)?RS(l,u,s):null;a.push(m)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}function _S(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function Cy(e,t,n,r,i,o,s,a){let l=gt(t,n),c=t.inputs,u;!a&&c!=null&&(u=c[r])?(Rd(e,n,u,r,i),Ba(t)&&CS(n,t.index)):t.type&3?(r=_S(r),i=s!=null?s(i,t.value||"",r):i,o.setProperty(l,r,i)):t.type&12}function CS(e,t){let n=gn(t,e);n[A]&16||(n[A]|=64)}function Dy(e,t,n,r){if(Cv()){let i=r===null?null:{"":-1},o=bS(e,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&wy(e,t,n,s,i,a),i&&SS(n,r,i)}n.mergedAttrs=Yi(n.mergedAttrs,n.attrs)}function wy(e,t,n,r,i,o){for(let c=0;c<r.length;c++)Ou(Ia(n,t),e,r[c].type);MS(n,e.data.length,r.length);for(let c=0;c<r.length;c++){let u=r[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=py(e,t,r.length,null);for(let c=0;c<r.length;c++){let u=r[c];n.mergedAttrs=Yi(n.mergedAttrs,u.hostAttrs),AS(e,n,t,l,u),TS(l,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}yS(e,n,o)}function DS(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;wS(s)!=a&&s.push(a),s.push(n,r,o)}}function wS(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function ES(e,t,n,r){let i=n.directiveStart,o=n.directiveEnd;Ba(n)&&NS(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||Ia(n,t),$n(r,t);let s=n.initialInputs;for(let a=i;a<o;a++){let l=e.data[a],c=Gr(t,e,a,n);if($n(c,t),s!==null&&xS(t,a-i,c,l,n,s),fn(l)){let u=gn(n.index,t);u[Ut]=Gr(t,e,a,n)}}}function Ey(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=ab();try{Bn(o);for(let a=r;a<i;a++){let l=e.data[a],c=t[a];Nu(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&IS(l,c)}}finally{Bn(-1),Nu(s)}}function IS(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function bS(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(CI(t,s.selectors,!1))if(r||(r=[]),fn(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let l=a.length;Gu(e,t,l)}else r.unshift(s),Gu(e,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Gu(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function SS(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new T(-301,!1);r.push(t[i],o)}}}function TS(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;fn(t)&&(n[""]=e)}}function MS(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function AS(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=Lr(i.type,!0)),s=new Un(o,fn(i),Q);e.blueprint[r]=s,n[r]=s,DS(e,t,r,py(e,n,i.hostVars,mn),i)}function NS(e,t,n){let r=gt(t,e),i=_y(n),o=e[$t].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=qa(e,Wa(e,i,null,s,r,t,null,o.createRenderer(r,n),null,null,null));e[t.index]=a}function xS(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],c=s[a++],u=s[a++],d=s[a++];hy(r,n,l,c,u,d)}}function RS(e,t,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let s=e[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function Iy(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function by(e,t){let n=e.contentQueries;if(n!==null){let r=H(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];bv(o),a.contentQueries(2,t[s],s)}}}finally{H(r)}}}function qa(e,t){return e[Zi]?e[fm][ht]=t:e[Zi]=t,e[fm]=t,t}function Wu(e,t,n){bv(0);let r=H(null);try{t(e,n)}finally{H(r)}}function OS(e){return e[va]??=[]}function kS(e){return e.cleanup??=[]}function Sy(e,t){let n=e[Ur],r=n?n.get(Ht,null):null;r&&r.handleError(t)}function Rd(e,t,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],l=n[o++],c=t[s],u=e.data[s];hy(u,c,r,a,l,i)}}function Ty(e,t,n){let r=pv(t,e);qb(e[ge],r,n)}function PS(e,t){let n=gn(t,e),r=n[U];FS(r,n);let i=n[qt];i!==null&&n[ma]===null&&(n[ma]=bd(i,n[Ur])),Od(r,n,n[Ut])}function FS(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Od(e,t,n){pd(t);try{let r=e.viewQuery;r!==null&&Wu(1,r,n);let i=e.template;i!==null&&gy(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Hr]?.finishViewCreation(e),e.staticContentQueries&&by(e,t),e.staticViewQueries&&Wu(2,e.viewQuery,n);let o=e.components;o!==null&&LS(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[A]&=-5,gd()}}function LS(e,t){for(let n=0;n<t.length;n++)PS(e,t[n])}function VS(e,t,n,r){let i=H(null);try{let o=t.tView,a=e[A]&4096?4096:16,l=Wa(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=e[t.index];l[$r]=c;let u=e[Hr];return u!==null&&(l[Hr]=u.createEmbeddedView(o)),Od(o,l,n),l}finally{H(i)}}function Mm(e,t){return!t||t.firstChild===null||Yv(e)}function jS(e,t,n,r=!0){let i=t[U];if(Kb(i,t,e,n),r){let s=Hu(n,e),a=t[ge],l=ly(a,e[Vn]);l!==null&&Qb(i,e[pt],a,t,l,s)}let o=t[ma];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Ma(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&r.push(At(o)),Yt(o)&&BS(o,r);let s=n.type;if(s&8)Ma(e,t,n.child,r);else if(s&32){let a=Td(n,t),l;for(;l=a();)r.push(l)}else if(s&16){let a=cy(t,n);if(Array.isArray(a))r.push(...a);else{let l=jn(t[Mt]);Ma(l[U],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function BS(e,t){for(let n=et;n<e.length;n++){let r=e[n],i=r[U].firstChild;i!==null&&Ma(r[U],r,i,t)}e[Vn]!==e[qt]&&t.push(e[Vn])}var My=[];function US(e){return e[Je]??$S(e)}function $S(e){let t=My.pop()??Object.create(GS);return t.lView=e,t}function HS(e){e.lView[Je]!==e&&(e.lView=null,My.push(e))}var GS=B(v({},Li),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{$a(e.lView)},consumerOnSignalRead(){this.lView[Je]=this}});function WS(e){let t=e[Je]??Object.create(zS);return t.lView=e,t}var zS=B(v({},Li),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=jn(e.lView);for(;t&&!Ay(t[U]);)t=jn(t);t&&vv(t)},consumerOnSignalRead(){this.lView[Je]=this}});function Ay(e){return e.type!==2}var qS=100;function Ny(e,t=!0,n=0){let r=e[$t],i=r.rendererFactory,o=!1;o||i.begin?.();try{YS(e,n)}catch(s){throw t&&Sy(e,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function YS(e,t){let n=Ev();try{pm(!0),zu(e,t);let r=0;for(;Ua(e);){if(r===qS)throw new T(103,!1);r++,zu(e,1)}}finally{pm(n)}}function QS(e,t,n,r){let i=t[A];if((i&256)===256)return;let o=!1,s=!1;!o&&t[$t].inlineEffectRunner?.flush(),pd(t);let a=!0,l=null,c=null;o||(Ay(e)?(c=US(t),l=Ss(c)):wg()===null?(a=!1,c=WS(t),l=Ss(c)):t[Je]&&(Vc(t[Je]),t[Je]=null));try{mv(t),ib(e.bindingStartIndex),n!==null&&gy(e,t,n,2,r);let u=(i&3)===3;if(!o)if(u){let h=e.preOrderCheckHooks;h!==null&&aa(t,h,null)}else{let h=e.preOrderHooks;h!==null&&la(t,h,0,null),uu(t,0)}if(s||ZS(t),xy(t,0),e.contentQueries!==null&&by(e,t),!o)if(u){let h=e.contentCheckHooks;h!==null&&aa(t,h)}else{let h=e.contentHooks;h!==null&&la(t,h,1),uu(t,1)}dS(e,t);let d=e.components;d!==null&&Oy(t,d,0);let f=e.viewQuery;if(f!==null&&Wu(2,f,r),!o)if(u){let h=e.viewCheckHooks;h!==null&&aa(t,h)}else{let h=e.viewHooks;h!==null&&la(t,h,2),uu(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[cu]){for(let h of t[cu])h();t[cu]=null}o||(t[A]&=-73)}catch(u){throw o||$a(t),u}finally{c!==null&&(Fc(c,l),a&&HS(c)),gd()}}function xy(e,t){for(let n=Zv(e);n!==null;n=Kv(n))for(let r=et;r<n.length;r++){let i=n[r];Ry(i,t)}}function ZS(e){for(let t=Zv(e);t!==null;t=Kv(t)){if(!(t[A]&Ca.HasTransplantedViews))continue;let n=t[_a];for(let r=0;r<n.length;r++){let i=n[r];vv(i)}}}function KS(e,t,n){let r=gn(t,e);Ry(r,n)}function Ry(e,t){fd(e)&&zu(e,t)}function zu(e,t){let r=e[U],i=e[A],o=e[Je],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&Lc(o)),s||=!1,o&&(o.dirty=!1),e[A]&=-9217,s)QS(r,e,r.template,e[Ut]);else if(i&8192){xy(e,1);let a=r.components;a!==null&&Oy(e,a,1)}}function Oy(e,t,n){for(let r=0;r<t.length;r++)KS(e,t[r],n)}function kd(e,t){let n=Ev()?64:1088;for(e[$t].changeDetectionScheduler?.notify(t);e;){e[A]|=n;let r=jn(e);if(Tu(e)&&!r)return e;e=r}return null}var Hn=class{get rootNodes(){let t=this._lView,n=t[U];return Ma(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ut]}set context(t){this._lView[Ut]=t}get destroyed(){return(this._lView[A]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Se];if(Yt(t)){let n=t[ya],r=n?n.indexOf(this):-1;r>-1&&($u(t,r),pa(n,r))}this._attachedToViewContainer=!1}sy(this._lView[U],this._lView)}onDestroy(t){yv(this._lView,t)}markForCheck(){kd(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[A]&=-129}reattach(){Au(this._lView),this._lView[A]|=128}detectChanges(){this._lView[A]|=1024,Ny(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new T(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Tu(this._lView),n=this._lView[$r];n!==null&&!t&&Md(n,this._lView),iy(this._lView[U],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new T(902,!1);this._appRef=t;let n=Tu(this._lView),r=this._lView[$r];r!==null&&!n&&oy(r,this._lView),Au(this._lView)}},Pd=(()=>{class e{static{this.__NG_ELEMENT_ID__=e0}}return e})(),XS=Pd,JS=class extends XS{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=VS(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new Hn(i)}};function e0(){return t0(Le(),oe())}function t0(e,t){return e.type&4?new JS(t,e,Ha(e,t)):null}var MB=new RegExp(`^(\\d+)*(${$b}|${Ub})*(.*)`);var n0=()=>null;function Am(e,t){return n0(e,t)}var Wr=class{},Ya=new D("",{providedIn:"root",factory:()=>!1});var ky=new D(""),Py=new D(""),qu=class{},Aa=class{};function r0(e){let t=Error(`No component factory found for ${be(e)}.`);return t[i0]=e,t}var i0="ngComponent";var Yu=class{resolveComponentFactory(t){throw r0(t)}},zr=class{static{this.NULL=new Yu}},qr=class{},yn=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>o0()}}return e})();function o0(){let e=oe(),t=Le(),n=gn(t.index,e);return(cn(n)?n:e)[ge]}var s0=(()=>{class e{static{this.\u0275prov=E({token:e,providedIn:"root",factory:()=>null})}}return e})();function Qu(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=nm(i,a);else if(o==2){let l=a,c=t[++s];r=nm(r,l+": "+c+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var Na=class extends zr{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Ln(t);return new Ki(n,this.ngModule)}};function Nm(e,t){let n=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let i=e[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:un.None;t?n.push({propName:s,templateName:r,isSignal:(a&un.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function a0(e){let t=e.toLowerCase();return t==="svg"?WI:t==="math"?zI:null}var Ki=class extends Aa{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=Nm(t.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Nm(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=II(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let o=H(null);try{i=i||this.ngModule;let s=i instanceof tt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new xu(t,s):t,l=a.get(qr,null);if(l===null)throw new T(407,!1);let c=a.get(s0,null),u=a.get(Wr,null),d={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,changeDetectionScheduler:u},f=l.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?pS(f,r,this.componentDef.encapsulation,a):ry(f,h,a0(h)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let C=null;p!==null&&(C=bd(p,a,!0));let b=xd(0,null,null,1,0,null,null,null,null,null,null),$=Wa(null,b,null,m,null,null,d,f,a,null,C);pd($);let k,ne,Ne=null;try{let Be=this.componentDef,hr,Ac=null;Be.findHostDirectiveDefs?(hr=[],Ac=new Map,Be.findHostDirectiveDefs(Be,hr,Ac),hr.push(Be)):hr=[Be];let fE=l0($,p);Ne=c0(fE,p,Be,hr,$,d,f),ne=gv(b,dn),p&&f0(f,Be,p,r),n!==void 0&&h0(ne,this.ngContentSelectors,n),k=d0(Ne,Be,hr,Ac,$,[p0]),Od(b,$,null)}catch(Be){throw Ne!==null&&ju(Ne),ju($),Be}finally{gd()}return new Zu(this.componentType,k,Ha(ne,$),$,ne)}finally{H(o)}}},Zu=class extends qu{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Hn(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView;Rd(o[U],o,i,t,n),this.previousInputValues.set(t,n);let s=gn(this._tNode.index,o);kd(s,1)}}get injector(){return new Fn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function l0(e,t){let n=e[U],r=dn;return e[r]=t,za(n,r,2,"#host",null)}function c0(e,t,n,r,i,o,s){let a=i[U];u0(r,e,t,s);let l=null;t!==null&&(l=bd(t,i[Ur]));let c=o.rendererFactory.createRenderer(t,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Wa(i,_y(n),null,u,i[e.index],e,o,c,null,null,l);return a.firstCreatePass&&Gu(a,e,r.length-1),qa(i,d),i[e.index]=d}function u0(e,t,n,r){for(let i of e)t.mergedAttrs=Yi(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(Qu(t,t.mergedAttrs,!0),n!==null&&dy(r,n,t))}function d0(e,t,n,r,i,o){let s=Le(),a=i[U],l=gt(s,i);wy(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,f=Gr(i,a,d,s);$n(f,i)}Ey(a,i,s),l&&$n(l,i);let c=Gr(i,a,s.directiveStart+s.componentOffset,s);if(e[Ut]=i[Ut]=c,o!==null)for(let u of o)u(c,t);return my(a,s,i),c}function f0(e,t,n,r){if(r)Eu(e,n,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=bI(t.selectors[0]);i&&Eu(e,n,i),o&&o.length>0&&uy(e,n,o.join(" "))}}function h0(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function p0(){let e=Le();yd(oe()[U],e)}var io=(()=>{class e{static{this.__NG_ELEMENT_ID__=g0}}return e})();function g0(){let e=Le();return v0(e,oe())}var m0=io,Fy=class extends m0{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Ha(this._hostTNode,this._hostLView)}get injector(){return new Fn(this._hostTNode,this._hostLView)}get parentInjector(){let t=_d(this._hostTNode,this._hostLView);if(kv(t)){let n=Ea(t,this._hostLView),r=wa(t),i=n[U].data[r+8];return new Fn(i,n)}else return new Fn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=xm(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-et}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Am(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Mm(this._hostTNode,s)),a}createComponent(t,n,r,i,o){let s=t&&!UI(t),a;if(s)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let l=s?t:new Ki(Ln(t)),c=r||this.parentInjector;if(!o&&l.ngModule==null){let m=(s?c:this.parentInjector).get(tt,null);m&&(o=m)}let u=Ln(l.componentType??{}),d=Am(this._lContainer,u?.id??null),f=d?.firstChild??null,h=l.create(c,i,f,o);return this.insertImpl(h.hostView,a,Mm(this._hostTNode,d)),h}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(qI(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=i[Se],c=new Fy(l,l[pt],l[Se]);c.detach(c.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return jS(s,i,o,r),t.attachToViewContainerRef(),zm(gu(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=xm(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=$u(this._lContainer,n);r&&(pa(gu(this._lContainer),n),sy(r[U],r))}detach(t){let n=this._adjustIndex(t,-1),r=$u(this._lContainer,n);return r&&pa(gu(this._lContainer),n)!=null?new Hn(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function xm(e){return e[ya]}function gu(e){return e[ya]||(e[ya]=[])}function v0(e,t){let n,r=t[e.index];return Yt(r)?n=r:(n=Iy(r,t,null,e),t[e.index]=n,qa(t,n)),_0(n,t,e,r),new Fy(n,e,t)}function y0(e,t){let n=e[ge],r=n.createComment(""),i=gt(t,e),o=ly(n,i);return Ta(n,o,r,nS(n,i),!1),r}var _0=w0,C0=()=>!1;function D0(e,t,n){return C0(e,t,n)}function w0(e,t,n,r){if(e[Vn])return;let i;n.type&8?i=At(r):i=y0(t,n),e[Vn]=i}var Rm=new Set;function oo(e){Rm.has(e)||(Rm.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function E0(e){return typeof e=="function"&&e[Lt]!==void 0}function Qa(e,t){oo("NgSignals");let n=Og(e),r=n[Lt];return t?.equal&&(r.equal=t.equal),n.set=i=>jc(r,i),n.update=i=>kg(r,i),n.asReadonly=I0.bind(n),n}function I0(){let e=this[Lt];if(e.readonlyFn===void 0){let t=()=>this();t[Lt]=e,e.readonlyFn=t}return e.readonlyFn}function Ly(e){return E0(e)&&typeof e.set=="function"}function b0(e){return Object.getPrototypeOf(e.prototype).constructor}function _n(e){let t=b0(e.type),n=!0,r=[e];for(;t;){let i;if(fn(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new T(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let s=e;s.inputs=ra(e.inputs),s.inputTransforms=ra(e.inputTransforms),s.declaredInputs=ra(e.declaredInputs),s.outputs=ra(e.outputs);let a=i.hostBindings;a&&N0(e,a);let l=i.viewQuery,c=i.contentQueries;if(l&&M0(e,l),c&&A0(e,c),S0(e,i),GE(e.outputs,i.outputs),fn(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===_n&&(n=!1)}}t=Object.getPrototypeOf(t)}T0(r)}function S0(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(i))continue;e.inputTransforms??={},e.inputTransforms[i]=t.inputTransforms[i]}}}function T0(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Yi(i.hostAttrs,n=Yi(n,i.hostAttrs))}}function ra(e){return e===Vr?{}:e===Xe?[]:e}function M0(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function A0(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function N0(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}var pn=class{},Xi=class{};var Ku=class extends pn{constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Na(this);let o=ev(t);this._bootstrapComponents=ny(o.bootstrap),this._r3Injector=Hv(t,n,[{provide:pn,useValue:this},{provide:zr,useValue:this.componentFactoryResolver},...r],be(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Xu=class extends Xi{constructor(t){super(),this.moduleType=t}create(t){return new Ku(this.moduleType,t,[])}};var xa=class extends pn{constructor(t){super(),this.componentFactoryResolver=new Na(this),this.instance=null;let n=new Qi([...t.providers,{provide:pn,useValue:this},{provide:zr,useValue:this.componentFactoryResolver}],t.parent||ud(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Fd(e,t,n=null){return new xa({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}function Yr(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function x0(e,t,n,r){let i=Yr(e,t,n);return Yr(e,t+1,r)||i}function R0(e){return(e.flags&32)===32}function O0(e,t,n,r,i,o,s,a,l){let c=t.consts,u=za(t,e,4,s||null,a||null);Dy(t,n,u,Da(c,l)),yd(t,u);let d=u.tView=xd(2,u,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return t.queries!==null&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}function k0(e,t,n,r,i,o,s,a,l,c){let u=n+dn,d=t.firstCreatePass?O0(u,t,e,r,i,o,s,a,l):t.data[u];ro(d,!1);let f=P0(t,e,d,n);md()&&Ad(t,e,f,d),$n(f,e);let h=Iy(f,e,f,d);return e[u]=h,qa(e,h),D0(h,d,e),dd(d)&&vy(t,e,d),l!=null&&yy(e,d,c),d}function Ld(e,t,n,r,i,o,s,a){let l=oe(),c=nt(),u=Da(c.consts,o);return k0(l,c,e,t,n,r,i,u,s,a),Ld}var P0=F0;function F0(e,t,n,r){return vd(!0),t[ge].createComment("")}var Wi=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(Wi||{}),L0=(()=>{class e{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=E({token:e,providedIn:"root",factory:()=>new e})}}return e})(),Om=class e{constructor(){this.ngZone=y(Y),this.scheduler=y(Wr),this.errorHandler=y(Ht,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Wi.EarlyRead,Wi.Write,Wi.MixedReadWrite,Wi.Read]}execute(){this.executing=!0;for(let t of e.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[t]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[t](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(6))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}static{this.\u0275prov=E({token:e,providedIn:"root",factory:()=>new e})}};function V0(e,t,n,r){return Yr(e,hd(),n)?t+fa(n)+r:mn}function j0(e,t,n,r,i,o){let s=rb(),a=x0(e,s,n,i);return Iv(2),a?t+fa(n)+r+fa(i)+o:mn}function ia(e,t){return e<<17|t<<2}function Gn(e){return e>>17&32767}function B0(e){return(e&2)==2}function U0(e,t){return e&131071|t<<17}function Ju(e){return e|2}function Qr(e){return(e&131068)>>2}function mu(e,t){return e&-131069|t<<2}function $0(e){return(e&1)===1}function ed(e){return e|1}function H0(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Gn(s),l=Qr(s);e[r]=n;let c=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||to(d,u)>0)&&(c=!0)}else u=n;if(i)if(l!==0){let f=Gn(e[a+1]);e[r+1]=ia(f,a),f!==0&&(e[f+1]=mu(e[f+1],r)),e[a+1]=U0(e[a+1],r)}else e[r+1]=ia(a,0),a!==0&&(e[a+1]=mu(e[a+1],r)),a=r;else e[r+1]=ia(l,0),a===0?a=r:e[l+1]=mu(e[l+1],r),l=r;c&&(e[r+1]=Ju(e[r+1])),km(e,u,r,!0),km(e,u,r,!1),G0(t,u,e,r,o),s=ia(a,l),o?t.classBindings=s:t.styleBindings=s}function G0(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&to(o,t)>=0&&(n[r+1]=ed(n[r+1]))}function km(e,t,n,r){let i=e[n+1],o=t===null,s=r?Gn(i):Qr(i),a=!1;for(;s!==0&&(a===!1||o);){let l=e[s],c=e[s+1];W0(l,t)&&(a=!0,e[s+1]=r?ed(c):Ju(c)),s=r?Gn(c):Qr(c)}a&&(e[n+1]=r?Ju(i):ed(i))}function W0(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?to(e,t)>=0:!1}function Jr(e,t,n){let r=oe(),i=hd();if(Yr(r,i,t)){let o=nt(),s=xv();Cy(o,s,r,e,t,r[ge],n,!1)}return Jr}function Pm(e,t,n,r,i){let o=t.inputs,s=i?"class":"style";Rd(e,n,o[s],s,r)}function Vd(e,t){return z0(e,t,null,!0),Vd}function z0(e,t,n,r){let i=oe(),o=nt(),s=Iv(2);if(o.firstUpdatePass&&Y0(o,e,s,r),t!==mn&&Yr(i,s,t)){let a=o.data[zn()];J0(o,a,i,i[ge],e,i[s+1]=eT(t,n),r,s)}}function q0(e,t){return t>=e.expandoStartIndex}function Y0(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[zn()],s=q0(e,n);tT(o,r)&&t===null&&!s&&(t=!1),t=Q0(i,o,t,r),H0(i,o,t,n,s,r)}}function Q0(e,t,n,r){let i=lb(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=vu(null,e,t,n,r),n=Ji(n,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==i)if(n=vu(i,e,t,n,r),o===null){let l=Z0(e,t,r);l!==void 0&&Array.isArray(l)&&(l=vu(null,e,t,l[1],r),l=Ji(l,t.attrs,r),K0(e,t,r,l))}else o=X0(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function Z0(e,t,n){let r=n?t.classBindings:t.styleBindings;if(Qr(r)!==0)return e[Gn(r)]}function K0(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[Gn(i)]=r}function X0(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=Ji(r,s,n)}return Ji(r,t.attrs,n)}function vu(e,t,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],r=Ji(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function Ji(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),dI(e,s,n?!0:t[++o]))}return e===void 0?null:e}function J0(e,t,n,r,i,o,s,a){if(!(t.type&3))return;let l=e.data,c=l[a+1],u=$0(c)?Fm(l,t,n,i,Qr(c),s):void 0;if(!Ra(u)){Ra(o)||B0(c)&&(o=Fm(l,null,n,i,a,s));let d=pv(zn(),n);cS(r,s,d,i,o)}}function Fm(e,t,n,r,i,o){let s=t===null,a;for(;i>0;){let l=e[i],c=Array.isArray(l),u=c?l[1]:l,d=u===null,f=n[i+1];f===mn&&(f=d?Xe:void 0);let h=d?au(f,r):u===r?f:void 0;if(c&&!Ra(h)&&(h=au(l,r)),Ra(h)&&(a=h,s))return a;let p=e[i+1];i=s?Gn(p):Qr(p)}if(t!==null){let l=o?t.residualClasses:t.residualStyles;l!=null&&(a=au(l,r))}return a}function Ra(e){return e!==void 0}function eT(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=be(Sd(e)))),e}function tT(e,t){return(e.flags&(t?8:16))!==0}function nT(e,t,n,r,i,o){let s=t.consts,a=Da(s,i),l=za(t,e,2,r,a);return Dy(t,n,l,Da(s,o)),l.attrs!==null&&Qu(l,l.attrs,!1),l.mergedAttrs!==null&&Qu(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function Ve(e,t,n,r){let i=oe(),o=nt(),s=dn+e,a=i[ge],l=o.firstCreatePass?nT(s,o,i,t,n,r):o.data[s],c=rT(o,i,l,a,t,e);i[s]=c;let u=dd(l);return ro(l,!0),dy(a,c,l),!R0(l)&&md()&&Ad(o,i,c,l),QI()===0&&$n(c,i),ZI(),u&&(vy(o,i,l),my(o,l,i)),r!==null&&yy(i,l),Ve}function je(){let e=Le();wv()?nb():(e=e.parent,ro(e,!1));let t=e;JI(t)&&eb(),KI();let n=nt();return n.firstCreatePass&&(yd(n,e),cv(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&pb(t)&&Pm(n,t,oe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&gb(t)&&Pm(n,t,oe(),t.stylesWithoutHost,!1),je}function Yn(e,t,n,r){return Ve(e,t,n,r),je(),Yn}var rT=(e,t,n,r,i,o)=>(vd(!0),ry(r,i,ub()));var Oa="en-US";var iT=Oa;function oT(e){typeof e=="string"&&(iT=e.toLowerCase().replace(/_/g,"-"))}var sT=(e,t,n)=>{};function mt(e,t,n,r){let i=oe(),o=nt(),s=Le();return Vy(o,i,i[ge],s,e,t,r),mt}function aT(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=t[va],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function Vy(e,t,n,r,i,o,s){let a=dd(r),c=e.firstCreatePass&&kS(e),u=t[Ut],d=OS(t),f=!0;if(r.type&3||s){let m=gt(r,t),C=s?s(m):m,b=d.length,$=s?ne=>s(At(ne[r.index])):r.index,k=null;if(!s&&a&&(k=aT(e,t,i,r.index)),k!==null){let ne=k.__ngLastListenerFn__||k;ne.__ngNextListenerFn__=o,k.__ngLastListenerFn__=o,f=!1}else{o=Vm(r,t,u,o),sT(m,i,o);let ne=n.listen(C,i,o);d.push(o,ne),c&&c.push(i,$,b,b+1)}}else o=Vm(r,t,u,o);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let m=p.length;if(m)for(let C=0;C<m;C+=2){let b=p[C],$=p[C+1],Ne=t[b][$].subscribe(o),Be=d.length;d.push(o,Ne),c&&c.push(i,r.index,Be,-(Be+1))}}}function Lm(e,t,n,r){let i=H(null);try{return bt(6,t,n),n(r)!==!1}catch(o){return Sy(e,o),!1}finally{bt(7,t,n),H(i)}}function Vm(e,t,n,r){return function i(o){if(o===Function)return r;let s=e.componentOffset>-1?gn(e.index,t):t;kd(s,5);let a=Lm(t,n,r,o),l=i.__ngNextListenerFn__;for(;l;)a=Lm(t,n,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function vt(e,t=""){let n=oe(),r=nt(),i=e+dn,o=r.firstCreatePass?za(r,i,1,t,null):r.data[i],s=lT(r,n,o,t,e);n[i]=s,md()&&Ad(r,n,s,o),ro(o,!1)}var lT=(e,t,n,r,i)=>(vd(!0),zb(t[ge],r));function jd(e,t,n){let r=oe(),i=V0(r,e,t,n);return i!==mn&&Ty(r,zn(),i),jd}function Bd(e,t,n,r,i){let o=oe(),s=j0(o,e,t,n,r,i);return s!==mn&&Ty(o,zn(),s),Bd}function Ud(e,t,n){Ly(t)&&(t=t());let r=oe(),i=hd();if(Yr(r,i,t)){let o=nt(),s=xv();Cy(o,s,r,e,t,r[ge],n,!1)}return Ud}function jy(e,t){let n=Ly(e);return n&&e.set(t),n}function $d(e,t){let n=oe(),r=nt(),i=Le();return Vy(r,n,n[ge],i,e,t),$d}function cT(e,t,n){let r=nt();if(r.firstCreatePass){let i=fn(e);td(n,r.data,r.blueprint,i,!0),td(t,r.data,r.blueprint,i,!1)}}function td(e,t,n,r,i){if(e=Ie(e),Array.isArray(e))for(let o=0;o<e.length;o++)td(e[o],t,n,r,i);else{let o=nt(),s=oe(),a=Le(),l=Br(e)?e:Ie(e.provide),c=sv(e),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(Br(e)||!e.multi){let h=new Un(c,i,Q),p=_u(l,t,i?u:u+f,d);p===-1?(Ou(Ia(a,s),o,l),yu(o,e,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[p]=h,s[p]=h)}else{let h=_u(l,t,u+f,d),p=_u(l,t,u,u+f),m=h>=0&&n[h],C=p>=0&&n[p];if(i&&!C||!i&&!m){Ou(Ia(a,s),o,l);let b=fT(i?dT:uT,n.length,i,r,c);!i&&C&&(n[p].providerFactory=b),yu(o,e,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(b),s.push(b)}else{let b=By(n[i?p:h],c,!i&&r);yu(o,e,h>-1?h:p,b)}!i&&r&&C&&n[p].componentProviders++}}}function yu(e,t,n,r){let i=Br(t),o=OI(t);if(i||o){let l=(o?Ie(t.useClass):t).prototype.ngOnDestroy;if(l){let c=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=c.indexOf(n);u===-1?c.push(n,[r,l]):c[u+1].push(r,l)}else c.push(n,l)}}}function By(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function _u(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function uT(e,t,n,r){return nd(this.multi,[])}function dT(e,t,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Gr(n,n[U],this.providerFactory.index,r);o=a.slice(0,s),nd(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],nd(i,o);return o}function nd(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function fT(e,t,n,r,i){let o=new Un(e,n,Q);return o.multi=[],o.index=t,o.componentProviders=0,By(o,i,r&&!n),o}function so(e,t=[]){return n=>{n.providersResolver=(r,i)=>cT(r,i?i(e):e,t)}}var hT=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=rv(!1,n.type),i=r.length>0?Fd([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=E({token:e,providedIn:"environment",factory:()=>new e(_(tt))})}}return e})();function Za(e){oo("NgStandalone"),e.getStandaloneInjector=t=>t.get(hT).getOrCreateStandaloneInjector(e)}var Wt=class{constructor(t){this.full=t;let n=t.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Uy=new Wt("18.2.13");var Ka=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var $y=new D("");function Qn(e){return!!e&&typeof e.then=="function"}function Hy(e){return!!e&&typeof e.subscribe=="function"}var Gy=new D(""),Wy=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=y(Gy,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=i();if(Qn(o))n.push(o);else if(Hy(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Hd=new D("");function pT(){Rg(()=>{throw new T(600,!1)})}function gT(e){return e.isBoundToModule}var mT=10;function vT(e,t,n){try{let r=n();return Qn(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var Zn=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=y(kb),this.afterRenderManager=y(L0),this.zonelessEnabled=y(Ya),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new re,this.afterTick=new re,this.componentTypes=[],this.components=[],this.isStable=y(Xr).hasPendingTasks.pipe(S(n=>!n)),this._injector=y(tt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Aa;if(!this._injector.get(Wy).done){let f=!i&&Jm(n),h=!1;throw new T(405,h)}let s;i?s=n:s=this._injector.get(zr).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=gT(s)?void 0:this._injector.get(pn),l=r||s.selector,c=s.create(hn.NULL,[],l,a),u=c.location.nativeElement,d=c.injector.get($y,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),ca(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new T(101,!1);let n=H(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,H(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(qr,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<mT;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)yT(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Ua(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ca(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(Hd,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ca(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new T(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function ca(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function yT(e,t,n,r){if(!n&&!Ua(e))return;Ny(e,t,n&&!r?0:1)}var rd=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Gd=(()=>{class e{compileModuleSync(n){return new Xu(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=ev(n),o=ny(i.declarations).reduce((s,a)=>{let l=Ln(a);return l&&s.push(new Ki(l)),s},[]);return new rd(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var _T=(()=>{class e{constructor(){this.zone=y(Y),this.changeDetectionScheduler=y(Wr),this.applicationRef=y(Zn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),CT=new D("",{factory:()=>!1});function zy({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new Y(B(v({},Yy()),{scheduleInRootZone:n})),[{provide:Y,useFactory:e},{provide:jr,multi:!0,useFactory:()=>{let r=y(_T,{optional:!0});return()=>r.initialize()}},{provide:jr,multi:!0,useFactory:()=>{let r=y(DT);return()=>{r.initialize()}}},t===!0?{provide:ky,useValue:!0}:[],{provide:Py,useValue:n??Gv}]}function qy(e){let t=e?.ignoreChangesOutsideZone,n=e?.scheduleInRootZone,r=zy({ngZoneFactory:()=>{let i=Yy(e);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&oo("NgZone_CoalesceEvent"),new Y(i)},ignoreChangesOutsideZone:t,scheduleInRootZone:n});return La([{provide:CT,useValue:!0},{provide:Ya,useValue:!1},r])}function Yy(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var DT=(()=>{class e{constructor(){this.subscription=new ae,this.initialized=!1,this.zone=y(Y),this.pendingTasks=y(Xr)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Y.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Y.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var wT=(()=>{class e{constructor(){this.appRef=y(Zn),this.taskService=y(Xr),this.ngZone=y(Y),this.zonelessEnabled=y(Ya),this.disableScheduling=y(ky,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ae,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Sa):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(y(Py,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Vu||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Cm:zv;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Sa+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Cm(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function ET(){return typeof $localize<"u"&&$localize.locale||Oa}var Wd=new D("",{providedIn:"root",factory:()=>y(Wd,P.Optional|P.SkipSelf)||ET()});var id=new D("");function oa(e){return!e.moduleRef}function IT(e){let t=oa(e)?e.r3Injector:e.moduleRef.injector,n=t.get(Y);return n.run(()=>{oa(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(Ht,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),oa(e)){let o=()=>t.destroy(),s=e.platformInjector.get(id);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>e.moduleRef.destroy(),s=e.platformInjector.get(id);s.add(o),e.moduleRef.onDestroy(()=>{ca(e.allPlatformModules,e.moduleRef),i.unsubscribe(),s.delete(o)})}return vT(r,n,()=>{let o=t.get(Wy);return o.runInitializers(),o.donePromise.then(()=>{let s=t.get(Wd,Oa);if(oT(s||Oa),oa(e)){let a=t.get(Zn);return e.rootComponent!==void 0&&a.bootstrap(e.rootComponent),a}else return bT(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function bT(e,t){let n=e.injector.get(Zn);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new T(-403,!1);t.push(e)}var ua=null;function ST(e=[],t){return hn.create({name:t,providers:[{provide:Va,useValue:"platform"},{provide:id,useValue:new Set([()=>ua=null])},...e]})}function TT(e=[]){if(ua)return ua;let t=ST(e);return ua=t,pT(),MT(t),t}function MT(e){e.get(Ed,null)?.forEach(n=>n())}function zd(){return!1}var Kn=(()=>{class e{static{this.__NG_ELEMENT_ID__=AT}}return e})();function AT(e){return NT(Le(),oe(),(e&16)===16)}function NT(e,t,n){if(Ba(e)&&!n){let r=gn(e.index,t);return new Hn(r,r)}else if(e.type&175){let r=t[Mt];return new Hn(r,t)}return null}function Qy(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,i=TT(r),o=[zy({}),{provide:Wr,useExisting:wT},...n||[]],s=new xa({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return IT({r3Injector:s.injector,platformInjector:i,rootComponent:t})}catch(t){return Promise.reject(t)}}function Xa(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function Ja(e,t){oo("NgSignals");let n=Ag(e);return t?.equal&&(n[Lt].equal=t.equal),n}function Cn(e){let t=H(null);try{return e()}finally{H(t)}}var Jy=null;function Zt(){return Jy}function e_(e){Jy??=e}var el=class{};var it=new D(""),t_=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>y(OT),providedIn:"platform"})}}return e})();var OT=(()=>{class e extends t_{constructor(){super(),this._doc=y(it),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Zt().getBaseHref(this._doc)}onPopState(n){let r=Zt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Zt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function n_(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function Zy(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function Xn(e){return e&&e[0]!=="?"?"?"+e:e}var nl=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>y(r_),providedIn:"root"})}}return e})(),kT=new D(""),r_=(()=>{class e extends nl{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??y(it).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return n_(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Xn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Xn(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Xn(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(_(t_),_(kT,8))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ao=(()=>{class e{constructor(n){this._subject=new he,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=LT(Zy(Ky(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Xn(r))}normalize(n){return e.stripTrailingSlash(FT(this._basePath,Ky(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Xn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Xn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Xn}static{this.joinWithSlash=n_}static{this.stripTrailingSlash=Zy}static{this.\u0275fac=function(r){return new(r||e)(_(nl))}}static{this.\u0275prov=E({token:e,factory:()=>PT(),providedIn:"root"})}}return e})();function PT(){return new ao(_(nl))}function FT(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function Ky(e){return e.replace(/\/index.html$/,"")}function LT(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function i_(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var o_=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new qd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Xy("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Xy("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(Q(io),Q(Pd))}}static{this.\u0275dir=Fe({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})(),qd=class{constructor(){this.$implicit=null,this.ngIf=null}};function Xy(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${be(t)}'.`)}var Yd=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Pe({type:e})}static{this.\u0275inj=ke({})}}return e})(),s_="browser",VT="server";function lo(e){return e===VT}var tl=class{};var Kd=class extends el{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Xd=class e extends Kd{static makeCurrent(){e_(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=BT();return n==null?null:UT(n)}resetBaseElement(){co=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return i_(document.cookie,t)}},co=null;function BT(){return co=co||document.querySelector("base"),co?co.getAttribute("href"):null}function UT(e){return new URL(e,document.baseURI).pathname}var $T=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),Jd=new D(""),u_=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new T(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||e)(_(Jd),_(Y))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),rl=class{constructor(t){this._doc=t}},Qd="ng-app-id",d_=(()=>{class e{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=lo(o),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Qd}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(Qd),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Qd,this.appId),n.appendChild(s),s}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(_(it),_(wd),_(Id,8),_(rt))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),Zd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},tf=/%COMP%/g,f_="%COMP%",HT=`_nghost-${f_}`,GT=`_ngcontent-${f_}`,WT=!0,zT=new D("",{providedIn:"root",factory:()=>WT});function qT(e){return GT.replace(tf,e)}function YT(e){return HT.replace(tf,e)}function h_(e,t){return t.map(n=>n.replace(tf,e))}var a_=(()=>{class e{constructor(n,r,i,o,s,a,l,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=lo(a),this.defaultRenderer=new uo(n,s,l,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Tt.ShadowDom&&(r=B(v({},r),{encapsulation:Tt.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof il?i.applyToHost(n):i instanceof fo&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Tt.Emulated:o=new il(l,c,r,this.appId,u,s,a,d);break;case Tt.ShadowDom:return new ef(l,c,n,r,s,a,this.nonce,d);default:o=new fo(l,c,r,u,s,a,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(_(u_),_(d_),_(wd),_(zT),_(it),_(rt),_(Y),_(Id))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),uo=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Zd[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(l_(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(l_(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new T(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=Zd[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=Zd[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Gt.DashCase|Gt.Important)?t.style.setProperty(n,r,i&Gt.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Gt.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=Zt().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function l_(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var ef=class extends uo{constructor(t,n,r,i,o,s,a,l){super(t,o,s,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=h_(i.id,i.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},fo=class extends uo{constructor(t,n,r,i,o,s,a,l){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?h_(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},il=class extends fo{constructor(t,n,r,i,o,s,a,l){let c=i+"-"+r.id;super(t,n,r,o,s,a,l,c),this.contentAttr=qT(c),this.hostAttr=YT(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},QT=(()=>{class e extends rl{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(_(it))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})(),c_=["alt","control","meta","shift"],ZT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},KT={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},XT=(()=>{class e extends rl{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i){let o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Zt().onAndCancel(n,o.domEventName,s))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),c_.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(n,r){let i=ZT[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),c_.forEach(s=>{if(s!==i){let a=KT[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||e)(_(it))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac})}}return e})();function p_(e,t){return Qy(v({rootComponent:e},JT(t)))}function JT(e){return{appProviders:[...iM,...e?.providers??[]],platformProviders:rM}}function eM(){Xd.makeCurrent()}function tM(){return new Ht}function nM(){return Jv(document),document}var rM=[{provide:rt,useValue:s_},{provide:Ed,useValue:eM,multi:!0},{provide:it,useFactory:nM,deps:[]}];var iM=[{provide:Va,useValue:"root"},{provide:Ht,useFactory:tM,deps:[]},{provide:Jd,useClass:QT,multi:!0,deps:[it,Y,rt]},{provide:Jd,useClass:XT,multi:!0,deps:[it]},a_,d_,u_,{provide:qr,useExisting:a_},{provide:tl,useClass:$T,deps:[]},[]];var g_=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||e)(_(it))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var O="primary",Ao=Symbol("RouteTitle"),af=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function oi(e){return new af(e)}function aM(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=e[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function lM(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Nt(e[n],t[n]))return!1;return!0}function Nt(e,t){let n=e?lf(e):void 0,r=t?lf(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!E_(e[i],t[i]))return!1;return!0}function lf(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function E_(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function I_(e){return e.length>0?e[e.length-1]:null}function Dn(e){return Kc(e)?e:Qn(e)?J(Promise.resolve(e)):I(e)}var cM={exact:S_,subset:T_},b_={exact:uM,subset:dM,ignored:()=>!0};function m_(e,t,n){return cM[n.paths](e.root,t.root,n.matrixParams)&&b_[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function uM(e,t){return Nt(e,t)}function S_(e,t,n){if(!er(e.segments,t.segments)||!al(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!S_(e.children[r],t.children[r],n))return!1;return!0}function dM(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>E_(e[n],t[n]))}function T_(e,t,n){return M_(e,t,t.segments,n)}function M_(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!er(i,n)||t.hasChildren()||!al(i,n,r))}else if(e.segments.length===n.length){if(!er(e.segments,n)||!al(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!T_(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!er(e.segments,i)||!al(e.segments,i,r)||!e.children[O]?!1:M_(e.children[O],t,o,r)}}function al(e,t,n){return t.every((r,i)=>b_[n](e[i].parameters,r.parameters))}var Xt=class{constructor(t=new q([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=oi(this.queryParams),this._queryParamMap}toString(){return pM.serialize(this)}},q=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ll(this)}},Jn=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=oi(this.parameters),this._parameterMap}toString(){return N_(this)}};function fM(e,t){return er(e,t)&&e.every((n,r)=>Nt(n.parameters,t[r].parameters))}function er(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function hM(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===O&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==O&&(n=n.concat(t(i,r)))}),n}var kf=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>new _o,providedIn:"root"})}}return e})(),_o=class{parse(t){let n=new uf(t);return new Xt(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${ho(t.root,!0)}`,r=vM(t.queryParams),i=typeof t.fragment=="string"?`#${gM(t.fragment)}`:"";return`${n}${r}${i}`}},pM=new _o;function ll(e){return e.segments.map(t=>N_(t)).join("/")}function ho(e,t){if(!e.hasChildren())return ll(e);if(t){let n=e.children[O]?ho(e.children[O],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==O&&r.push(`${i}:${ho(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=hM(e,(r,i)=>i===O?[ho(e.children[O],!1)]:[`${i}:${ho(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[O]!=null?`${ll(e)}/${n[0]}`:`${ll(e)}/(${n.join("//")})`}}function A_(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ol(e){return A_(e).replace(/%3B/gi,";")}function gM(e){return encodeURI(e)}function cf(e){return A_(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cl(e){return decodeURIComponent(e)}function v_(e){return cl(e.replace(/\+/g,"%20"))}function N_(e){return`${cf(e.path)}${mM(e.parameters)}`}function mM(e){return Object.entries(e).map(([t,n])=>`;${cf(t)}=${cf(n)}`).join("")}function vM(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${ol(n)}=${ol(i)}`).join("&"):`${ol(n)}=${ol(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var yM=/^[^\/()?;#]+/;function nf(e){let t=e.match(yM);return t?t[0]:""}var _M=/^[^\/()?;=#]+/;function CM(e){let t=e.match(_M);return t?t[0]:""}var DM=/^[^=?&#]+/;function wM(e){let t=e.match(DM);return t?t[0]:""}var EM=/^[^&#]+/;function IM(e){let t=e.match(EM);return t?t[0]:""}var uf=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new q([],{}):new q([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[O]=new q(t,n)),r}parseSegment(){let t=nf(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new T(4009,!1);return this.capture(t),new Jn(cl(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=CM(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=nf(this.remaining);i&&(r=i,this.capture(r))}t[cl(n)]=cl(r)}parseQueryParam(t){let n=wM(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=IM(this.remaining);s&&(r=s,this.capture(r))}let i=v_(n),o=v_(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=nf(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new T(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=O);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[O]:new q([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new T(4011,!1)}};function x_(e){return e.segments.length>0?new q([],{[O]:e}):e}function R_(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=R_(i);if(r===O&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new q(e.segments,t);return bM(n)}function bM(e){if(e.numberOfChildren===1&&e.children[O]){let t=e.children[O];return new q(e.segments.concat(t.segments),t.children)}return e}function Co(e){return e instanceof Xt}function SM(e,t,n=null,r=null){let i=O_(e);return k_(i,t,n,r)}function O_(e){let t;function n(o){let s={};for(let l of o.children){let c=n(l);s[l.outlet]=c}let a=new q(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=x_(r);return t??i}function k_(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return rf(i,i,i,n,r);let o=TM(t);if(o.toRoot())return rf(i,i,new q([],{}),n,r);let s=MM(o,i,e),a=s.processChildren?mo(s.segmentGroup,s.index,o.commands):F_(s.segmentGroup,s.index,o.commands);return rf(i,s.segmentGroup,a,n,r)}function ul(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Do(e){return typeof e=="object"&&e!=null&&e.outlets}function rf(e,t,n,r,i){let o={};r&&Object.entries(r).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;e===t?s=n:s=P_(e,t,n);let a=x_(R_(s));return new Xt(a,o,i)}function P_(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=P_(o,t,n)}),new q(e.segments,r)}var dl=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&ul(r[0]))throw new T(4003,!1);let i=r.find(Do);if(i&&i!==I_(r))throw new T(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function TM(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new dl(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new dl(n,t,r)}var ni=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function MM(e,t,n){if(e.isAbsolute)return new ni(t,!0,0);if(!n)return new ni(t,!1,NaN);if(n.parent===null)return new ni(n,!0,0);let r=ul(e.commands[0])?0:1,i=n.segments.length-1+r;return AM(n,i,e.numberOfDoubleDots)}function AM(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new T(4005,!1);i=r.segments.length}return new ni(r,!1,i-o)}function NM(e){return Do(e[0])?e[0].outlets:{[O]:e}}function F_(e,t,n){if(e??=new q([],{}),e.segments.length===0&&e.hasChildren())return mo(e,t,n);let r=xM(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new q(e.segments.slice(0,r.pathIndex),{});return o.children[O]=new q(e.segments.slice(r.pathIndex),e.children),mo(o,0,i)}else return r.match&&i.length===0?new q(e.segments,{}):r.match&&!e.hasChildren()?df(e,t,n):r.match?mo(e,0,i):df(e,t,n)}function mo(e,t,n){if(n.length===0)return new q(e.segments,{});{let r=NM(n),i={};if(Object.keys(r).some(o=>o!==O)&&e.children[O]&&e.numberOfChildren===1&&e.children[O].segments.length===0){let o=mo(e.children[O],t,n);return new q(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=F_(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new q(e.segments,i)}}function xM(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(Do(a))break;let l=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!__(l,c,s))return o;r+=2}else{if(!__(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function df(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(Do(o)){let l=RM(o.outlets);return new q(r,l)}if(i===0&&ul(n[0])){let l=e.segments[t];r.push(new Jn(l.path,y_(n[0]))),i++;continue}let s=Do(o)?o.outlets[O]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&ul(a)?(r.push(new Jn(s,y_(a))),i+=2):(r.push(new Jn(s,{})),i++)}return new q(r,{})}function RM(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=df(new q([],{}),0,r))}),t}function y_(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function __(e,t,n){return e==n.path&&Nt(t,n.parameters)}var vo="imperative",Ce=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Ce||{}),ot=class{constructor(t,n){this.id=t,this.url=n}},wo=class extends ot{constructor(t,n,r="imperative",i=null){super(t,n),this.type=Ce.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},tr=class extends ot{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=Ce.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},He=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(He||{}),ff=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(ff||{}),Kt=class extends ot{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Ce.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},nr=class extends ot{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Ce.NavigationSkipped}},Eo=class extends ot{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=Ce.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},fl=class extends ot{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Ce.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hf=class extends ot{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Ce.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pf=class extends ot{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Ce.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},gf=class extends ot{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Ce.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mf=class extends ot{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Ce.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vf=class{constructor(t){this.route=t,this.type=Ce.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},yf=class{constructor(t){this.route=t,this.type=Ce.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},_f=class{constructor(t){this.snapshot=t,this.type=Ce.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cf=class{constructor(t){this.snapshot=t,this.type=Ce.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Df=class{constructor(t){this.snapshot=t,this.type=Ce.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wf=class{constructor(t){this.snapshot=t,this.type=Ce.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Io=class{},si=class{constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function OM(e,t){return e.providers&&!e._injector&&(e._injector=Fd(e.providers,t,`Route: ${e.path}`)),e._injector??t}function _t(e){return e.outlet||O}function kM(e,t){let n=e.filter(r=>_t(r)===t);return n.push(...e.filter(r=>_t(r)!==t)),n}function No(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Ef=class{get injector(){return No(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new _l(this.rootInjector),this.attachRef=null}},_l=(()=>{class e{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Ef(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||e)(_(tt))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),hl=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=If(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=If(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=bf(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return bf(t,this._root).map(n=>n.value)}};function If(e,t){if(e===t.value)return t;for(let n of t.children){let r=If(e,n);if(r)return r}return null}function bf(e,t){if(e===t.value)return[t];for(let n of t.children){let r=bf(e,n);if(r.length)return r.unshift(t),r}return[]}var $e=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function ti(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var pl=class extends hl{constructor(t,n){super(t),this.snapshot=n,Pf(this,t)}toString(){return this.snapshot.toString()}};function L_(e){let t=PM(e),n=new _e([new Jn("",{})]),r=new _e({}),i=new _e({}),o=new _e({}),s=new _e(""),a=new ai(n,r,o,s,i,O,e,t.root);return a.snapshot=t.root,new pl(new $e(a,[]),t)}function PM(e){let t={},n={},r={},i="",o=new ri([],t,r,i,n,O,e,null,{});return new ml("",new $e(o,[]))}var ai=class{constructor(t,n,r,i,o,s,a,l){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(S(c=>c[Ao]))??I(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(S(t=>oi(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(S(t=>oi(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function gl(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:v(v({},t.params),e.params),data:v(v({},t.data),e.data),resolve:v(v(v(v({},e.data),t.data),i?.data),e._resolvedData)}:r={params:v({},e.params),data:v({},e.data),resolve:v(v({},e.data),e._resolvedData??{})},i&&j_(i)&&(r.resolve[Ao]=i.title),r}var ri=class{get title(){return this.data?.[Ao]}constructor(t,n,r,i,o,s,a,l,c){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=oi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=oi(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},ml=class extends hl{constructor(t,n){super(n),this.url=t,Pf(this,n)}toString(){return V_(this._root)}};function Pf(e,t){t.value._routerState=e,t.children.forEach(n=>Pf(e,n))}function V_(e){let t=e.children.length>0?` { ${e.children.map(V_).join(", ")} } `:"";return`${e.value}${t}`}function of(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Nt(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Nt(t.params,n.params)||e.paramsSubject.next(n.params),lM(t.url,n.url)||e.urlSubject.next(n.url),Nt(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Sf(e,t){let n=Nt(e.params,t.params)&&fM(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Sf(e.parent,t.parent))}function j_(e){return typeof e.title=="string"||e.title===null}var FM=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=O,this.activateEvents=new he,this.deactivateEvents=new he,this.attachEvents=new he,this.detachEvents=new he,this.parentContexts=y(_l),this.location=y(io),this.changeDetector=y(Kn),this.inputBinder=y(Ff,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new T(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new T(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new T(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new T(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Tf(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=Fe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Kr]})}}return e})(),Tf=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===ai?this.route:t===_l?this.childContexts:this.parent.get(t,n)}},Ff=new D("");function LM(e,t,n){let r=bo(e,t._root,n?n._root:void 0);return new pl(r,t)}function bo(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=VM(e,t,n);return new $e(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>bo(e,a)),s}}let r=jM(t.value),i=t.children.map(o=>bo(e,o));return new $e(r,i)}}function VM(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return bo(e,r,i);return bo(e,r)})}function jM(e){return new ai(new _e(e.url),new _e(e.params),new _e(e.queryParams),new _e(e.fragment),new _e(e.data),e.outlet,e.component,e)}var So=class{constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},B_="ngNavigationCancelingError";function vl(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=Co(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=U_(!1,He.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function U_(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[B_]=!0,n.cancellationCode=t,n}function BM(e){return $_(e)&&Co(e.url)}function $_(e){return!!e&&e[B_]}var UM=(e,t,n,r)=>S(i=>(new Mf(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),Mf=class{constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),of(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=ti(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=ti(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=ti(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=ti(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new wf(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Cf(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(of(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),of(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},yl=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},ii=class{constructor(t,n){this.component=t,this.route=n}};function $M(e,t,n){let r=e._root,i=t?t._root:null;return po(r,i,n,[r.value])}function HM(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function ci(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!Bm(e)?e:t.get(e):r}function po(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ti(t);return e.children.forEach(s=>{GM(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>yo(a,n.getContext(s),i)),i}function GM(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=WM(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new yl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?po(e,t,a?a.children:null,r,i):po(e,t,n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ii(a.outlet.component,s))}else s&&yo(t,a,i),i.canActivateChecks.push(new yl(r)),o.component?po(e,null,a?a.children:null,r,i):po(e,null,n,r,i);return i}function WM(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!er(e.url,t.url);case"pathParamsOrQueryParamsChange":return!er(e.url,t.url)||!Nt(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Sf(e,t)||!Nt(e.queryParams,t.queryParams);case"paramsChange":default:return!Sf(e,t)}}function yo(e,t,n){let r=ti(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?yo(s,t.children.getContext(o),n):yo(s,null,n):yo(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new ii(t.outlet.component,i)):n.canDeactivateChecks.push(new ii(null,i)):n.canDeactivateChecks.push(new ii(null,i))}function xo(e){return typeof e=="function"}function zM(e){return typeof e=="boolean"}function qM(e){return e&&xo(e.canLoad)}function YM(e){return e&&xo(e.canActivate)}function QM(e){return e&&xo(e.canActivateChild)}function ZM(e){return e&&xo(e.canDeactivate)}function KM(e){return e&&xo(e.canMatch)}function H_(e){return e instanceof jt||e?.name==="EmptyError"}var sl=Symbol("INITIAL_VALUE");function li(){return ie(e=>Ks(e.map(t=>t.pipe(Bt(1),iu(sl)))).pipe(S(t=>{for(let n of t)if(n!==!0){if(n===sl)return sl;if(n===!1||XM(n))return n}return!0}),Ue(t=>t!==sl),Bt(1)))}function XM(e){return Co(e)||e instanceof So}function JM(e,t){return de(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?I(B(v({},n),{guardsResult:!0})):eA(s,r,i,e).pipe(de(a=>a&&zM(a)?tA(r,o,e,t):I(a)),S(a=>B(v({},n),{guardsResult:a})))})}function eA(e,t,n,r){return J(e).pipe(de(i=>sA(i.component,i.route,n,t,r)),Ze(i=>i!==!0,!0))}function tA(e,t,n,r){return J(t).pipe(Ar(i=>Tr(rA(i.route.parent,r),nA(i.route,r),oA(e,i.path,n),iA(e,i.route,n))),Ze(i=>i!==!0,!0))}function nA(e,t){return e!==null&&t&&t(new Df(e)),I(!0)}function rA(e,t){return e!==null&&t&&t(new _f(e)),I(!0)}function iA(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return I(!0);let i=r.map(o=>Xs(()=>{let s=No(t)??n,a=ci(o,s),l=YM(a)?a.canActivate(t,e):zt(s,()=>a(t,e));return Dn(l).pipe(Ze())}));return I(i).pipe(li())}function oA(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>HM(s)).filter(s=>s!==null).map(s=>Xs(()=>{let a=s.guards.map(l=>{let c=No(s.node)??n,u=ci(l,c),d=QM(u)?u.canActivateChild(r,e):zt(c,()=>u(r,e));return Dn(d).pipe(Ze())});return I(a).pipe(li())}));return I(o).pipe(li())}function sA(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return I(!0);let s=o.map(a=>{let l=No(t)??i,c=ci(a,l),u=ZM(c)?c.canDeactivate(e,t,n,r):zt(l,()=>c(e,t,n,r));return Dn(u).pipe(Ze())});return I(s).pipe(li())}function aA(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return I(!0);let o=i.map(s=>{let a=ci(s,e),l=qM(a)?a.canLoad(t,n):zt(e,()=>a(t,n));return Dn(l)});return I(o).pipe(li(),G_(r))}function G_(e){return Wc(fe(t=>{if(typeof t!="boolean")throw vl(e,t)}),S(t=>t===!0))}function lA(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return I(!0);let o=i.map(s=>{let a=ci(s,e),l=KM(a)?a.canMatch(t,n):zt(e,()=>a(t,n));return Dn(l)});return I(o).pipe(li(),G_(r))}var To=class{constructor(t){this.segmentGroup=t||null}},Mo=class extends Error{constructor(t){super(),this.urlTree=t}};function ei(e){return Sr(new To(e))}function cA(e){return Sr(new T(4e3,!1))}function uA(e){return Sr(U_(!1,He.GuardRejected))}var Af=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return I(r);if(i.numberOfChildren>1||!i.children[O])return cA(`${t.redirectTo}`);i=i.children[O]}}applyRedirectCommands(t,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:f,params:h,data:p,title:m}=i,C=zt(o,()=>a({params:h,data:p,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:f,title:m}));if(C instanceof Xt)throw new Mo(C);n=C}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n[0]==="/")throw new Mo(s);return s}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new Xt(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,r,i)}),new q(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new T(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},Nf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function dA(e,t,n,r,i){let o=W_(e,t,n);return o.matched?(r=OM(t,r),lA(r,t,n,i).pipe(S(s=>s===!0?o:v({},Nf)))):I(o)}function W_(e,t,n){if(t.path==="**")return fA(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?v({},Nf):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||aM)(n,e,t);if(!i)return v({},Nf);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?v(v({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function fA(e){return{matched:!0,parameters:e.length>0?I_(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function C_(e,t,n,r){return n.length>0&&gA(e,n,r)?{segmentGroup:new q(t,pA(r,new q(n,e.children))),slicedSegments:[]}:n.length===0&&mA(e,n,r)?{segmentGroup:new q(e.segments,hA(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new q(e.segments,e.children),slicedSegments:n}}function hA(e,t,n,r){let i={};for(let o of n)if(Cl(e,t,o)&&!r[_t(o)]){let s=new q([],{});i[_t(o)]=s}return v(v({},r),i)}function pA(e,t){let n={};n[O]=t;for(let r of e)if(r.path===""&&_t(r)!==O){let i=new q([],{});n[_t(r)]=i}return n}function gA(e,t,n){return n.some(r=>Cl(e,t,r)&&_t(r)!==O)}function mA(e,t,n){return n.some(r=>Cl(e,t,r))}function Cl(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function vA(e,t,n){return t.length===0&&!e.children[n]}var xf=class{};function yA(e,t,n,r,i,o,s="emptyOnly"){return new Rf(e,t,n,r,i,s,o).recognize()}var _A=31,Rf=class{constructor(t,n,r,i,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Af(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new T(4002,`'${t.segmentGroup}'`)}recognize(){let t=C_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(S(({children:n,rootSnapshot:r})=>{let i=new $e(r,n),o=new ml("",i),s=SM(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let n=new ri([],Object.freeze({}),Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),O,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,O,n).pipe(S(r=>({children:r,rootSnapshot:n})),on(r=>{if(r instanceof Mo)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof To?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,o):this.processSegment(t,n,r,r.segments,i,!0,o).pipe(S(s=>s instanceof $e?[s]:[]))}processChildren(t,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return J(o).pipe(Ar(s=>{let a=r.children[s],l=kM(n,s);return this.processSegmentGroup(t,l,a,s,i)}),xr((s,a)=>(s.push(...a),s)),sn(null),tu(),de(s=>{if(s===null)return ei(r);let a=z_(s);return CA(a),I(a)}))}processSegment(t,n,r,i,o,s,a){return J(n).pipe(Ar(l=>this.processSegmentAgainstRoute(l._injector??t,n,l,r,i,o,s,a).pipe(on(c=>{if(c instanceof To)return I(null);throw c}))),Ze(l=>!!l),on(l=>{if(H_(l))return vA(r,i,o)?I(new xf):ei(r);throw l}))}processSegmentAgainstRoute(t,n,r,i,o,s,a,l){return _t(r)!==s&&(s===O||!Cl(i,o,r))?ei(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s,l):ei(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=W_(n,i,o);if(!l)return ei(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>_A&&(this.allowRedirects=!1));let h=new ri(o,c,Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,D_(i),_t(i),i.component??i._loadedComponent??null,i,w_(i)),p=gl(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let m=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,t);return this.applyRedirects.lineralizeSegments(i,m).pipe(de(C=>this.processSegment(t,r,n,C.concat(f),s,!1,a)))}matchSegmentAgainstRoute(t,n,r,i,o,s){let a=dA(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(ie(l=>l.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(ie(({routes:c})=>{let u=r._loadedInjector??t,{parameters:d,consumedSegments:f,remainingSegments:h}=l,p=new ri(f,d,Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,D_(r),_t(r),r.component??r._loadedComponent??null,r,w_(r)),m=gl(p,s,this.paramsInheritanceStrategy);p.params=Object.freeze(m.params),p.data=Object.freeze(m.data);let{segmentGroup:C,slicedSegments:b}=C_(n,f,h,c);if(b.length===0&&C.hasChildren())return this.processChildren(u,c,C,p).pipe(S(k=>new $e(p,k)));if(c.length===0&&b.length===0)return I(new $e(p,[]));let $=_t(r)===o;return this.processSegment(u,c,C,b,$?O:o,!0,p).pipe(S(k=>new $e(p,k instanceof $e?[k]:[])))}))):ei(n)))}getChildConfig(t,n,r){return n.children?I({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?I({routes:n._loadedRoutes,injector:n._loadedInjector}):aA(t,n,r,this.urlSerializer).pipe(de(i=>i?this.configLoader.loadChildren(t,n).pipe(fe(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):uA(n))):I({routes:[],injector:t})}};function CA(e){e.sort((t,n)=>t.value.outlet===O?-1:n.value.outlet===O?1:t.value.outlet.localeCompare(n.value.outlet))}function DA(e){let t=e.value.routeConfig;return t&&t.path===""}function z_(e){let t=[],n=new Set;for(let r of e){if(!DA(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=z_(r.children);t.push(new $e(r.value,i))}return t.filter(r=>!n.has(r))}function D_(e){return e.data||{}}function w_(e){return e.resolve||{}}function wA(e,t,n,r,i,o){return de(s=>yA(e,t,n,r,s.extractedUrl,i,o).pipe(S(({state:a,tree:l})=>B(v({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function EA(e,t){return de(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return I(n);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of q_(l))s.add(c);let a=0;return J(s).pipe(Ar(l=>o.has(l)?IA(l,r,e,t):(l.data=gl(l,l.parent,e).resolve,I(void 0))),fe(()=>a++),Nr(1),de(l=>a===s.size?I(n):Ee))})}function q_(e){let t=e.children.map(n=>q_(n)).flat();return[e,...t]}function IA(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!j_(i)&&(o[Ao]=i.title),bA(o,e,t,r).pipe(S(s=>(e._resolvedData=s,e.data=gl(e,e.parent,n).resolve,null)))}function bA(e,t,n,r){let i=lf(e);if(i.length===0)return I({});let o={};return J(i).pipe(de(s=>SA(e[s],t,n,r).pipe(Ze(),fe(a=>{if(a instanceof So)throw vl(new _o,a);o[s]=a}))),Nr(1),Jc(o),on(s=>H_(s)?Ee:Sr(s)))}function SA(e,t,n,r){let i=No(t)??r,o=ci(e,i),s=o.resolve?o.resolve(t,n):zt(i,()=>o(t,n));return Dn(s)}function sf(e){return ie(t=>{let n=e(t);return n?J(n).pipe(S(()=>t)):I(t)})}var Y_=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===O);return r}getResolvedTitleForRoute(n){return n.data[Ao]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>y(TA),providedIn:"root"})}}return e})(),TA=(()=>{class e extends Y_{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||e)(_(g_))}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Lf=new D("",{providedIn:"root",factory:()=>({})}),MA=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=Zr({type:e,selectors:[["ng-component"]],standalone:!0,features:[Za],decls:1,vars:0,template:function(r,i){r&1&&Yn(0,"router-outlet")},dependencies:[FM],encapsulation:2})}}return e})();function Vf(e){let t=e.children&&e.children.map(Vf),n=t?B(v({},e),{children:t}):v({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==O&&(n.component=MA),n}var jf=new D(""),AA=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=y(Gd)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return I(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Dn(n.loadComponent()).pipe(S(Q_),fe(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),$i(()=>{this.componentLoaders.delete(n)})),i=new Dr(r,()=>new re).pipe(Cr());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return I({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=NA(r,this.compiler,n,this.onLoadEndListener).pipe($i(()=>{this.childrenLoaders.delete(r)})),s=new Dr(o,()=>new re).pipe(Cr());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function NA(e,t,n,r){return Dn(e.loadChildren()).pipe(S(Q_),de(i=>i instanceof Xi||Array.isArray(i)?I(i):J(t.compileModuleAsync(i))),S(i=>{r&&r(e);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(jf,[],{optional:!0,self:!0}).flat()),{routes:s.map(Vf),injector:o}}))}function xA(e){return e&&typeof e=="object"&&"default"in e}function Q_(e){return xA(e)?e.default:e}var Bf=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>y(RA),providedIn:"root"})}}return e})(),RA=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),OA=new D("");var kA=new D(""),PA=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new re,this.transitionAbortSubject=new re,this.configLoader=y(AA),this.environmentInjector=y(tt),this.urlSerializer=y(kf),this.rootContexts=y(_l),this.location=y(ao),this.inputBindingEnabled=y(Ff,{optional:!0})!==null,this.titleStrategy=y(Y_),this.options=y(Lf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=y(Bf),this.createViewTransition=y(OA,{optional:!0}),this.navigationErrorHandler=y(kA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>I(void 0),this.rootComponentType=null;let n=i=>this.events.next(new vf(i)),r=i=>this.events.next(new yf(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(B(v(v({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new _e({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:vo,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ue(o=>o.id!==0),S(o=>B(v({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ie(o=>{let s=!1,a=!1;return I(o).pipe(ie(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",He.SupersededByNewNavigation),Ee;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?B(v({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=l.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!c&&u!=="reload"){let d="";return this.events.next(new nr(l.id,this.urlSerializer.serialize(l.rawUrl),d,ff.IgnoredSameUrlNavigation)),l.resolve(!1),Ee}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return I(l).pipe(ie(d=>{let f=this.transitions?.getValue();return this.events.next(new wo(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?Ee:Promise.resolve(d)}),wA(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),fe(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=B(v({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let f=new fl(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:f,source:h,restoredState:p,extras:m}=l,C=new wo(d,this.urlSerializer.serialize(f),h,p);this.events.next(C);let b=L_(this.rootComponentType).snapshot;return this.currentTransition=o=B(v({},l),{targetSnapshot:b,urlAfterRedirects:f,extras:B(v({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,I(o)}else{let d="";return this.events.next(new nr(l.id,this.urlSerializer.serialize(l.extractedUrl),d,ff.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Ee}}),fe(l=>{let c=new hf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),S(l=>(this.currentTransition=o=B(v({},l),{guards:$M(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),JM(this.environmentInjector,l=>this.events.next(l)),fe(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw vl(this.urlSerializer,l.guardsResult);let c=new pf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),Ue(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",He.GuardRejected),!1)),sf(l=>{if(l.guards.canActivateChecks.length)return I(l).pipe(fe(c=>{let u=new gf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),ie(c=>{let u=!1;return I(c).pipe(EA(this.paramsInheritanceStrategy,this.environmentInjector),fe({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",He.NoDataFromResolver)}}))}),fe(c=>{let u=new mf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),sf(l=>{let c=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(fe(f=>{u.component=f}),S(()=>{})));for(let f of u.children)d.push(...c(f));return d};return Ks(c(l.targetSnapshot.root)).pipe(sn(null),Bt(1))}),sf(()=>this.afterPreactivation()),ie(()=>{let{currentSnapshot:l,targetSnapshot:c}=o,u=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return u?J(u).pipe(S(()=>o)):I(o)}),S(l=>{let c=LM(n.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=B(v({},l),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,o}),fe(()=>{this.events.next(new Io)}),UM(this.rootContexts,n.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Bt(1),fe({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new tr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),ou(this.transitionAbortSubject.pipe(fe(l=>{throw l}))),$i(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",He.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),on(l=>{if(a=!0,$_(l))this.events.next(new Kt(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),BM(l)?this.events.next(new si(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let c=new Eo(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let u=zt(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof So){let{message:d,cancellationCode:f}=vl(this.urlSerializer,u);this.events.next(new Kt(o.id,this.urlSerializer.serialize(o.extractedUrl),d,f)),this.events.next(new si(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(c);let d=n.errorHandler(l);o.resolve(!!d)}}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return Ee}))}))}cancelNavigationTransition(n,r,i){let o=new Kt(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function FA(e){return e!==vo}var LA=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>y(VA),providedIn:"root"})}}return e})(),Of=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},VA=(()=>{class e extends Of{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=qn(e)))(i||e)}})()}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Z_=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:()=>y(jA),providedIn:"root"})}}return e})(),jA=(()=>{class e extends Z_{constructor(){super(...arguments),this.location=y(ao),this.urlSerializer=y(kf),this.options=y(Lf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=y(Bf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Xt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=L_(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof wo)this.stateMemento=this.createStateMemento();else if(n instanceof nr)this.rawUrlTree=r.initialUrl;else if(n instanceof fl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof Io?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Kt&&(n.code===He.GuardRejected||n.code===He.NoDataFromResolver)?this.restoreHistory(r):n instanceof Eo?this.restoreHistory(r,!0):n instanceof tr&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Xt?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=v(v({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=v(v({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=qn(e)))(i||e)}})()}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),go=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(go||{});function BA(e,t){e.events.pipe(Ue(n=>n instanceof tr||n instanceof Kt||n instanceof Eo||n instanceof nr),S(n=>n instanceof tr||n instanceof nr?go.COMPLETE:(n instanceof Kt?n.code===He.Redirect||n.code===He.SupersededByNewNavigation:!1)?go.REDIRECTING:go.FAILED),Ue(n=>n!==go.REDIRECTING),Bt(1)).subscribe(()=>{t()})}function UA(e){throw e}var $A={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},HA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},K_=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=y(Ka),this.stateManager=y(Z_),this.options=y(Lf,{optional:!0})||{},this.pendingTasks=y(Xr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=y(PA),this.urlSerializer=y(kf),this.location=y(ao),this.urlHandlingStrategy=y(Bf),this._events=new re,this.errorHandler=this.options.errorHandler||UA,this.navigated=!1,this.routeReuseStrategy=y(LA),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=y(jf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!y(Ff,{optional:!0}),this.eventsSubscription=new ae,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Kt&&r.code!==He.Redirect&&r.code!==He.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof tr)this.navigated=!0;else if(r instanceof si){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=v({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||FA(i.source)},s);this.scheduleNavigation(a,vo,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}WA(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),vo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=v({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Vf),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=v(v({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=O_(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return k_(d,n,u,c??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Co(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,vo,null,r)}navigate(n,r={skipLocationChange:!1}){return GA(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=v({},$A):r===!1?i=v({},HA):i=r,Co(n))return m_(this.currentUrlTree,n,i);let o=this.parseUrl(n);return m_(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,f)=>{a=d,l=f});let u=this.pendingTasks.add();return BA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function GA(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new T(4008,!1)}function WA(e){return!(e instanceof Io)&&!(e instanceof si)}var zA=new D("");function X_(e,...t){return La([{provide:jf,multi:!0,useValue:e},[],{provide:ai,useFactory:qA,deps:[K_]},{provide:Hd,multi:!0,useFactory:YA},t.map(n=>n.\u0275providers)])}function qA(e){return e.routerState.root}function YA(){let e=y(hn);return t=>{let n=e.get(Zn);if(t!==n.components[0])return;let r=e.get(K_),i=e.get(QA);e.get(ZA)===1&&r.initialNavigation(),e.get(KA,null,P.Optional)?.setUpPreloading(),e.get(zA,null,P.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var QA=new D("",{factory:()=>new re}),ZA=new D("",{providedIn:"root",factory:()=>1});var KA=new D("");var J_=[];var eC={providers:[qy({eventCoalescing:!0}),X_(J_)]};var cC=(()=>{class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||e)(Q(yn),Q(Qt))}}static{this.\u0275dir=Fe({type:e})}}return e})(),Wf=(()=>{class e extends cC{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=qn(e)))(i||e)}})()}static{this.\u0275dir=Fe({type:e,features:[_n]})}}return e})(),bl=new D("");var XA={provide:bl,useExisting:Wn(()=>uC),multi:!0};function JA(){let e=Zt()?Zt().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var eN=new D(""),uC=(()=>{class e extends cC{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!JA())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||e)(Q(yn),Q(Qt),Q(eN,8))}}static{this.\u0275dir=Fe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&mt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[so([XA]),_n]})}}return e})();var tN=new D(""),nN=new D("");function dC(e){return e!=null}function fC(e){return Qn(e)?J(e):e}function hC(e){let t={};return e.forEach(n=>{t=n!=null?v(v({},t),n):t}),Object.keys(t).length===0?null:t}function pC(e,t){return t.map(n=>n(e))}function rN(e){return!e.validate}function gC(e){return e.map(t=>rN(t)?t:n=>t.validate(n))}function iN(e){if(!e)return null;let t=e.filter(dC);return t.length==0?null:function(n){return hC(pC(n,t))}}function mC(e){return e!=null?iN(gC(e)):null}function oN(e){if(!e)return null;let t=e.filter(dC);return t.length==0?null:function(n){let r=pC(n,t).map(fC);return Xc(r).pipe(S(hC))}}function vC(e){return e!=null?oN(gC(e)):null}function tC(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function sN(e){return e._rawValidators}function aN(e){return e._rawAsyncValidators}function Uf(e){return e?Array.isArray(e)?e:[e]:[]}function wl(e,t){return Array.isArray(e)?e.includes(t):e===t}function nC(e,t){let n=Uf(t);return Uf(e).forEach(i=>{wl(n,i)||n.push(i)}),n}function rC(e,t){return Uf(t).filter(n=>!wl(e,n))}var El=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=mC(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=vC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},$f=class extends El{get formDirective(){return null}get path(){return null}},Fo=class extends El{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Hf=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},lN={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},M$=B(v({},lN),{"[class.ng-submitted]":"isSubmitted"}),yC=(()=>{class e extends Hf{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(Q(Fo,2))}}static{this.\u0275dir=Fe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Vd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[_n]})}}return e})();var Ro="VALID",Dl="INVALID",ui="PENDING",Oo="DISABLED",fi=class{},Il=class extends fi{constructor(t,n){super(),this.value=t,this.source=n}},ko=class extends fi{constructor(t,n){super(),this.pristine=t,this.source=n}},Po=class extends fi{constructor(t,n){super(),this.touched=t,this.source=n}},di=class extends fi{constructor(t,n){super(),this.status=t,this.source=n}};function cN(e){return(Sl(e)?e.validators:e)||null}function uN(e){return Array.isArray(e)?mC(e):e||null}function dN(e,t){return(Sl(t)?t.asyncValidators:e)||null}function fN(e){return Array.isArray(e)?vC(e):e||null}function Sl(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}var Gf=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ja(()=>this.statusReactive()),this.statusReactive=Qa(void 0),this._pristine=Ja(()=>this.pristineReactive()),this.pristineReactive=Qa(!0),this._touched=Ja(()=>this.touchedReactive()),this.touchedReactive=Qa(!1),this._events=new re,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Cn(this.statusReactive)}set status(t){Cn(()=>this.statusReactive.set(t))}get valid(){return this.status===Ro}get invalid(){return this.status===Dl}get pending(){return this.status==ui}get disabled(){return this.status===Oo}get enabled(){return this.status!==Oo}get pristine(){return Cn(this.pristineReactive)}set pristine(t){Cn(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return Cn(this.touchedReactive)}set touched(t){Cn(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(nC(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(nC(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(rC(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(rC(t,this._rawAsyncValidators))}hasValidator(t){return wl(this._rawValidators,t)}hasAsyncValidator(t){return wl(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(B(v({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Po(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new Po(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(B(v({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new ko(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new ko(!0,r))}markAsPending(t={}){this.status=ui;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new di(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(B(v({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Oo,this.errors=null,this._forEachChild(i=>{i.disable(B(v({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Il(this.value,r)),this._events.next(new di(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(B(v({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Ro,this._forEachChild(r=>{r.enable(B(v({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(B(v({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ro||this.status===ui)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Il(this.value,n)),this._events.next(new di(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(B(v({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Oo:Ro}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=ui,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=fC(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new di(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new he,this.statusChanges=new he}_calculateStatus(){return this._allControlsDisabled()?Oo:this.errors?Dl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ui)?ui:this._anyControlsHaveStatus(Dl)?Dl:Ro}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),i&&this._events.next(new ko(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new Po(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Sl(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=uN(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=fN(this._rawAsyncValidators)}};var _C=new D("CallSetDisabledState",{providedIn:"root",factory:()=>zf}),zf="always";function hN(e,t){return[...t.path,e]}function pN(e,t,n=zf){mN(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),vN(e,t),_N(e,t),yN(e,t),gN(e,t)}function iC(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function gN(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function mN(e,t){let n=sN(e);t.validator!==null?e.setValidators(tC(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=aN(e);t.asyncValidator!==null?e.setAsyncValidators(tC(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();iC(t._rawValidators,i),iC(t._rawAsyncValidators,i)}function vN(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&CC(e,t)})}function yN(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&CC(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function CC(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function _N(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function CN(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function DN(e){return Object.getPrototypeOf(e.constructor)===Wf}function wN(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===uC?n=o:DN(o)?r=o:i=o}),i||r||n||null}function oC(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function sC(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var EN=class extends Gf{constructor(t=null,n,r){super(cN(n),dN(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Sl(n)&&(n.nonNullable||n.initialValueIsDefault)&&(sC(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){oC(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){oC(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){sC(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var IN={provide:Fo,useExisting:Wn(()=>qf)},aC=Promise.resolve(),qf=(()=>{class e extends Fo{constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new EN,this._registered=!1,this.name="",this.update=new he,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=wN(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),CN(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){pN(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){aC.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Xa(r);aC.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?hN(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||e)(Q($f,9),Q(tN,10),Q(nN,10),Q(bl,10),Q(Kn,8),Q(_C,8))}}static{this.\u0275dir=Fe({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[so([IN]),_n,Kr]})}}return e})();var bN={provide:bl,useExisting:Wn(()=>Tl),multi:!0};function DC(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function SN(e){return e.split(":")[0]}var Tl=(()=>{class e extends Wf{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r=this._getOptionId(n),i=DC(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=SN(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=qn(e)))(i||e)}})()}static{this.\u0275dir=Fe({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&mt("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[so([bN]),_n]})}}return e})(),wC=(()=>{class e{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(DC(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||e)(Q(Qt),Q(yn),Q(Tl,9))}}static{this.\u0275dir=Fe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return e})(),TN={provide:bl,useExisting:Wn(()=>EC),multi:!0};function lC(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function MN(e){return e.split(":")[0]}var EC=(()=>{class e extends Wf{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],c=this._getOptionValue(l.value);i.push(c)}}else{let s=r.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let c=this._getOptionValue(l.value);i.push(c)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=MN(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=qn(e)))(i||e)}})()}static{this.\u0275dir=Fe({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&mt("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[so([TN]),_n]})}}return e})(),IC=(()=>{class e{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(lC(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(lC(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||e)(Q(Qt),Q(yn),Q(EC,9))}}static{this.\u0275dir=Fe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return e})();var AN=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Pe({type:e})}static{this.\u0275inj=ke({})}}return e})();var Ml=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:_C,useValue:n.callSetDisabledState??zf}]}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Pe({type:e})}static{this.\u0275inj=ke({imports:[AN]})}}return e})();var xN="firebase",RN="10.14.1";rn(xN,RN,"app");var hi=new Wt("ANGULARFIRE2_VERSION");var ON=(e,t)=>{let n=t?[t]:Cg(),r=[];return n.forEach(i=>{i.container.getProvider(e).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},rr=class{constructor(){return ON(kN)}},kN="app-check";function Yf(){}var Al=class{zone;delegate;constructor(t,n=Qc){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{t.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},Qf=class{zone;task=null;constructor(t){this.zone=t}call(t,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Yf,{},Yf,Yf)),n.pipe(fe({next:r,complete:r,error:r})).subscribe(t).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Nl=(()=>{class e{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Al(Zone.current)),this.insideAngular=n.run(()=>new Al(Zone.current,Bi)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||e)(_(Y))};static \u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function PN(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function Jt(e){return FN(PN())(e)}function FN(e){return function(n){return n=n.lift(new Qf(e.ngZone)),n.pipe(dt(e.outsideAngular),Qe(e.insideAngular))}}var jN=new Map,BN={activated:!1,tokenObservers:[]},UN={initialized:!1,enabled:!1};function Ct(e){return jN.get(e)||Object.assign({},BN)}function NC(){return UN}var $N="https://content-firebaseappcheck.googleapis.com/v1";var HN="exchangeDebugToken",SC={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},q$=24*60*60*1e3;var Kf=class{constructor(t,n,r,i,o){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return ct(this,null,function*(){this.stop();try{this.pending=new pe,this.pending.promise.catch(n=>{}),yield GN(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new pe,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function GN(e){return new Promise(t=>{setTimeout(t,e)})}var WN={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},wn=new fg("appCheck","AppCheck",WN);function xC(e){if(!Ct(e).activated)throw wn.create("use-before-activation",{appName:e.name})}function RC(r,i){return ct(this,arguments,function*({url:e,body:t},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let h=yield s.getHeartbeatsHeader();h&&(o["X-Firebase-Client"]=h)}let a={method:"POST",body:JSON.stringify(t),headers:o},l;try{l=yield fetch(e,a)}catch(h){throw wn.create("fetch-network-error",{originalErrorMessage:h?.message})}if(l.status!==200)throw wn.create("fetch-status-error",{httpStatus:l.status});let c;try{c=yield l.json()}catch(h){throw wn.create("fetch-parse-error",{originalErrorMessage:h?.message})}let u=c.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw wn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let d=Number(u[1])*1e3,f=Date.now();return{token:c.token,expireTimeMillis:f+d,issuedAtTimeMillis:f}})}function OC(e,t){let{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${$N}/projects/${n}/apps/${r}:${HN}?key=${i}`,body:{debug_token:t}}}var zN="firebase-app-check-database",qN=1,Xf="firebase-app-check-store";var xl=null;function YN(){return xl||(xl=new Promise((e,t)=>{try{let n=indexedDB.open(zN,qN);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(wn.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Xf,{keyPath:"compositeKey"})}}}catch(n){t(wn.create("storage-open",{originalErrorMessage:n?.message}))}}),xl)}function QN(e,t){return ZN(KN(e),t)}function ZN(e,t){return ct(this,null,function*(){let r=(yield YN()).transaction(Xf,"readwrite"),o=r.objectStore(Xf).put({compositeKey:e,value:t});return new Promise((s,a)=>{o.onsuccess=l=>{s()},r.onerror=l=>{var c;a(wn.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})})}function KN(e){return`${e.options.appId}-${e.name}`}var Jf=new gr("@firebase/app-check");function Zf(e,t){return dg()?QN(e,t).catch(n=>{Jf.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function kC(){return NC().enabled}function PC(){return ct(this,null,function*(){let e=NC();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var XN={error:"UNKNOWN_ERROR"};function JN(e){return _s.encodeString(JSON.stringify(e),!1)}function eh(e,t=!1){return ct(this,null,function*(){let n=e.app;xC(n);let r=Ct(n),i=r.token,o;if(i&&!Lo(i)&&(r.token=void 0,i=void 0),!i){let l=yield r.cachedTokenPromise;l&&(Lo(l)?i=l:yield Zf(n,void 0))}if(!t&&i&&Lo(i))return{token:i.token};let s=!1;if(kC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=RC(OC(n,yield PC()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let l=yield r.exchangeTokenPromise;return yield Zf(n,l),r.token=l,{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Ct(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?Jf.warn(l.message):Jf.error(l),o=l}let a;return i?o?Lo(i)?a={token:i.token,internalError:o}:a=MC(o):(a={token:i.token},r.token=i,yield Zf(n,i)):a=MC(o),s&&rx(n,a),a})}function ex(e){return ct(this,null,function*(){let t=e.app;xC(t);let{provider:n}=Ct(t);if(kC()){let r=yield PC(),{token:i}=yield RC(OC(t,r),e.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function tx(e,t,n,r){let{app:i}=e,o=Ct(i),s={next:n,error:r,type:t};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Lo(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),TC(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>TC(e))}function FC(e,t){let n=Ct(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function TC(e){let{app:t}=e,n=Ct(t),r=n.tokenRefresher;r||(r=nx(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function nx(e){let{app:t}=e;return new Kf(()=>ct(this,null,function*(){let n=Ct(t),r;if(n.token?r=yield eh(e,!0):r=yield eh(e),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Ct(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},SC.RETRIAL_MIN_WAIT,SC.RETRIAL_MAX_WAIT)}function rx(e,t){let n=Ct(e).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function Lo(e){return e.expireTimeMillis-Date.now()>0}function MC(e){return{token:JN(XN),error:e}}var th=class{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:t}=Ct(this.app);for(let n of t)FC(this.app,n.next);return Promise.resolve()}};function ix(e,t){return new th(e,t)}function ox(e){return{getToken:t=>eh(e,t),getLimitedUseToken:()=>ex(e),addTokenListener:t=>tx(e,"INTERNAL",t),removeTokenListener:t=>FC(e.app,t)}}var sx="@firebase/app-check",ax="0.8.8";var lx="app-check",AC="app-check-internal";function cx(){Pi(new Ft(lx,e=>{let t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return ix(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(AC).initialize()})),Pi(new Ft(AC,e=>{let t=e.getProvider("app-check").getImmediate();return ox(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),rn(sx,ax)}cx();var ux=["localhost","0.0.0.0","127.0.0.1"],oH=typeof window<"u"&&ux.includes(window.location.hostname);var dx="firebase",fx="10.14.1";Re.registerVersion(dx,fx,"app-compat");var hx=["ngOnDestroy"],jC=(e,t,n,r={})=>new Proxy(e,{get:(i,o)=>n.runOutsideAngular(()=>{if(e[o])return r?.spy?.get&&r.spy.get(o,e[o]),e[o];if(hx.indexOf(o)>-1)return()=>{};let s=t.toPromise().then(a=>{let l=a?.[o];return typeof l=="function"?l.bind(a):l?.then?l.then(c=>n.run(()=>c)):n.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>s[l],apply:(a,l,c)=>s.then(u=>{let d=u?.(...c);return r?.spy?.apply&&r.spy.apply(o,c,d),d})})})});var Rl=class{constructor(t){return t}},pi=new D("angularfire2.app.options"),gi=new D("angularfire2.app.name");function Vo(e,t,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=Re.apps.filter(a=>a&&a.name===i.name)[0]||t.runOutsideAngular(()=>Re.initializeApp(e,i));try{if(JSON.stringify(e)!==JSON.stringify(s.options)){let a=!!module.hot;px("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Rl(s)}var px=(e,...t)=>{zd()&&typeof console<"u"&&console[e](...t)},gx={provide:Rl,useFactory:Vo,deps:[pi,Y,[new Fa,gi]]},BC=(()=>{class e{static initializeApp(n,r){return{ngModule:e,providers:[{provide:pi,useValue:n},{provide:gi,useValue:r}]}}constructor(n){Re.registerVersion("angularfire",hi.full,"core"),Re.registerVersion("angularfire",hi.full,"app-compat"),Re.registerVersion("angular",Uy.full,n.toString())}static \u0275fac=function(r){return new(r||e)(_(rt))};static \u0275mod=Pe({type:e});static \u0275inj=ke({providers:[gx]})}return e})();function Ol(e,t,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===e)||[];if(o)return mx(i,s)||(VC("error",`${t} was already initialized on the ${n} Firebase App with different settings.${vx?" You may need to reload as Firebase is not HMR aware.":""}`),VC("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([e,a,i]),a}}function mx(e,t){try{return e.toString()===t.toString()}catch{return e===t}}var vx=typeof module<"u"&&!!module.hot,VC=(e,...t)=>{zd()&&typeof console<"u"&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var nh=new D("angularfire2.auth.use-emulator"),rh=new D("angularfire2.auth.settings"),ih=new D("angularfire2.auth.tenant-id"),oh=new D("angularfire2.auth.langugage-code"),sh=new D("angularfire2.auth.use-device-language"),ah=new D("angularfire.auth.persistence"),lh=(e,t,n,r,i,o,s,a)=>Ol(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{let l=t.runOutsideAngular(()=>e.auth());if(n&&l.useEmulator(...n),r&&(l.tenantId=r),l.languageCode=i,o&&l.useDeviceLanguage(),s)for(let[c,u]of Object.entries(s))l.settings[c]=u;return a&&l.setPersistence(a),l},[n,r,i,o,s,a]),UC=(()=>{class e{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,l,c,u,d,f,h){let p=new re,m=I(void 0).pipe(Qe(s.outsideAngular),ie(()=>o.runOutsideAngular(()=>import("./chunk-HFG2JIZC.js"))),S(()=>Vo(n,o,r)),S(C=>lh(C,o,a,c,u,d,l,f)),ea({bufferSize:1,refCount:!1}));if(lo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=I(null);else{m.pipe(Ze()).subscribe();let C=m.pipe(ie(k=>k.getRedirectResult().then(ne=>ne,()=>null)),Jt,ea({bufferSize:1,refCount:!1})),b=m.pipe(ie(k=>new j(ne=>({unsubscribe:o.runOutsideAngular(()=>k.onAuthStateChanged(Ne=>ne.next(Ne),Ne=>ne.error(Ne),()=>ne.complete()))})))),$=m.pipe(ie(k=>new j(ne=>({unsubscribe:o.runOutsideAngular(()=>k.onIdTokenChanged(Ne=>ne.next(Ne),Ne=>ne.error(Ne),()=>ne.complete()))}))));this.authState=C.pipe(ta(b),dt(s.outsideAngular),Qe(s.insideAngular)),this.user=C.pipe(ta($),dt(s.outsideAngular),Qe(s.insideAngular)),this.idToken=this.user.pipe(ie(k=>k?J(k.getIdToken()):I(null))),this.idTokenResult=this.user.pipe(ie(k=>k?J(k.getIdTokenResult()):I(null))),this.credential=Mr(C,p,this.authState.pipe(Ue(k=>!k))).pipe(S(k=>k?.user?k:null),dt(s.outsideAngular),Qe(s.insideAngular))}return jC(this,m,o,{spy:{apply:(C,b,$)=>{(C.startsWith("signIn")||C.startsWith("createUser"))&&$.then(k=>p.next(k))}}})}static \u0275fac=function(r){return new(r||e)(_(pi),_(gi,8),_(rt),_(Y),_(Nl),_(nh,8),_(rh,8),_(ih,8),_(oh,8),_(sh,8),_(ah,8),_(rr,8))};static \u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();var $C="@firebase/database",HC="1.0.8";var Cp="";function Dp(e){Cp=e}var mh=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),le(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:Cs(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var vh=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Ye(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var CD=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new mh(t)}}catch{}return new vh},or=CD("localStorage"),yh=CD("sessionStorage");var _i=new gr("@firebase/database"),DD=function(){let e=1;return function(){return e++}}(),wD=function(e){let t=vg(e),n=new mg;n.update(t);let r=n.digest();return _s.encodeByteArray(r)},ls=function(...e){let t="";for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=ls.apply(null,r):typeof r=="object"?t+=le(r):t+=r,t+=" "}return t},sr=null,GC=!0,ED=function(e,t){g(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(_i.logLevel=yg.VERBOSE,sr=_i.log.bind(_i),t&&yh.set("logging_enabled",!0)):typeof e=="function"?sr=e:(sr=null,yh.remove("logging_enabled"))},me=function(...e){if(GC===!0&&(GC=!1,sr===null&&yh.get("logging_enabled")===!0&&ED(!0)),sr){let t=ls.apply(null,e);sr(t)}},cs=function(e){return function(...t){me(e,...t)}},_h=function(...e){let t="FIREBASE INTERNAL ERROR: "+ls(...e);_i.error(t)},Ot=function(...e){let t=`FIREBASE FATAL ERROR: ${ls(...e)}`;throw _i.error(t),new Error(t)},De=function(...e){let t="FIREBASE WARNING: "+ls(...e);_i.warn(t)},_x=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&De("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ac=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Cx=function(e){if(Et()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Sn="[MIN_NAME]",en="[MAX_NAME]",lr=function(e,t){if(e===t)return 0;if(e===Sn||t===en)return-1;if(t===Sn||e===en)return 1;{let n=WC(e),r=WC(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},Dx=function(e,t){return e===t?0:e<t?-1:1},jo=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+le(t))},wp=function(e){if(typeof e!="object"||e===null)return le(e);let t=[];for(let r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=le(t[r]),n+=":",n+=wp(e[t[r]]);return n+="}",n},ID=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function ve(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var bD=function(e){g(!ac(e),"Invalid JSON number");let t=11,n=52,r=(1<<t-1)-1,i,o,s,a,l;e===0?(o=0,s=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=a+r,s=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(e/Math.pow(2,1-r-n))));let c=[];for(l=n;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(l=t;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(i?1:0),c.reverse();let u=c.join(""),d="";for(l=0;l<64;l+=8){let f=parseInt(u.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},wx=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Ex=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Ix(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");let r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var bx=new RegExp("^-?(0*)\\d{1,10}$"),Sx=-2147483648,Tx=2147483647,WC=function(e){if(bx.test(e)){let t=Number(e);if(t>=Sx&&t<=Tx)return t}return null},Mi=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw De("Exception was thrown by user callback.",n),t},Math.floor(0))}},Mx=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ho=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Ch=class{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){De(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Dh=class{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(me("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',De(t)}},Go=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),Pl="5",SD="v",TD="s",MD="r",AD="f",ND=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,xD="ls",RD="p",wh="ac",OD="websocket",kD="long_polling";var Fl=class{constructor(t,n,r,i,o=!1,s="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=or.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&or.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function Ax(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function PD(e,t,n){g(typeof t=="string","typeof type must == string"),g(typeof n=="object","typeof params must == object");let r;if(t===OD)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===kD)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);Ax(e)&&(n.ns=e.namespace);let i=[];return ve(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var Eh=class{constructor(){this.counters_={}}incrementCounter(t,n=1){Ye(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return lg(this.counters_)}};var ch={},uh={};function Ep(e){let t=e.toString();return ch[t]||(ch[t]=new Eh),ch[t]}function Nx(e,t){let n=e.toString();return uh[n]||(uh[n]=t()),uh[n]}var Ih=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Mi(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var zC="start",xx="close",Rx="pLPCommand",Ox="pRTLPCB",FD="id",LD="pw",VD="ser",kx="cb",Px="seg",Fx="ts",Lx="d",Vx="dframe",jD=1870,BD=30,jx=jD-BD,Bx=25e3,Ux=3e4,Yo=class e{constructor(t,n,r,i,o,s,a){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=cs(t),this.stats_=Ep(n),this.urlFn=l=>(this.appCheckToken&&(l[wh]=this.appCheckToken),PD(n,kD,l))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Ih(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Ux)),Cx(()=>{if(this.isClosed_)return;this.scriptTagHolder=new bh((...o)=>{let[s,a,l,c,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===zC)this.id=a,this.password=l;else if(s===xx)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[zC]="t",r[VD]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[kx]=this.scriptTagHolder.uniqueCallbackIdentifier),r[SD]=Pl,this.transportSessionId&&(r[TD]=this.transportSessionId),this.lastSessionId&&(r[xD]=this.lastSessionId),this.applicationId&&(r[RD]=this.applicationId),this.appCheckToken&&(r[wh]=this.appCheckToken),typeof location<"u"&&location.hostname&&ND.test(location.hostname)&&(r[MD]=AD);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return Et()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!wx()&&!Ex()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=le(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=ag(n),i=ID(r,jx);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(Et())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[Vx]="t",r[FD]=t,r[LD]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=le(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},bh=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Et())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=DD(),window[Rx+this.uniqueCallbackIdentifier]=t,window[Ox+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){me("frame writing exception"),a.stack&&me(a.stack),me(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||me("No IE domain setting required")}catch{let r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[FD]=this.myID,t[LD]=this.myPW,t[VD]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+BD+r.length<=jD;){let s=this.pendingSegs.shift();r=r+"&"+Px+i+"="+s.seg+"&"+Fx+i+"="+s.ts+"&"+Lx+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Bx)),o=()=>{clearTimeout(i),r()};this.addTag(t,o)}addTag(t,n){Et()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{me("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var $x=16384,Hx=45e3,Ll=null;typeof MozWebSocket<"u"?Ll=MozWebSocket:typeof WebSocket<"u"&&(Ll=WebSocket);var vi=(()=>{class e{constructor(n,r,i,o,s,a,l){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=cs(this.connId),this.stats_=Ep(r),this.connURL=e.connectionURL_(r,a,l,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[SD]=Pl,!Et()&&typeof location<"u"&&location.hostname&&ND.test(location.hostname)&&(a[MD]=AD),r&&(a[TD]=r),i&&(a[xD]=i),o&&(a[wh]=o),s&&(a[RD]=s),PD(n,OD,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,or.set("previous_websocket_failure",!0);try{let i;if(Et()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Pl}/${Cp}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Ll(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Ll!==null&&!e.forceDisallow_}static previouslyFailed(){return or.isInMemoryStorage||or.get("previous_websocket_failure")===!0}markConnectionHealthy(){or.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Cs(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(g(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=le(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=ID(r,$x);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Hx))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),UD=(()=>{class e{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Yo,vi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=vi&&vi.isAvailable(),i=r&&!vi.previouslyFailed();if(n.webSocketOnly&&(r||De("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[vi];else{let o=this.transports_=[];for(let s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),Gx=6e4,Wx=5e3,zx=10*1024,qx=100*1024,dh="t",qC="d",Yx="s",YC="r",Qx="e",QC="o",ZC="a",KC="n",XC="p",Zx="h",Sh=class{constructor(t,n,r,i,o,s,a,l,c,u){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=cs("c:"+this.id+":"),this.transportManager_=new UD(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ho(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>qx?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>zx?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(dh in t){let n=t[dh];n===ZC?this.upgradeIfSecondaryHealthy_():n===YC?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===QC&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=jo("t",t),r=jo("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:XC,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ZC,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:KC,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=jo("t",t),r=jo("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=jo(dh,t);if(qC in t){let r=t[qC];if(n===Zx){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===KC){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Yx?this.onConnectionShutdown_(r):n===YC?this.onReset_(r):n===Qx?_h("Server Error: "+r):n===QC?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_h("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Pl!==r&&De("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ho(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Gx))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ho(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Wx))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:XC,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(or.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Vl=class{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}};var jl=class{constructor(t){this.allowedEvents_=t,this.listeners_={},g(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});let i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);let i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(t){g(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var Bl=class e extends jl{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Nc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new e}getInitialEvent(t){return g(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var JC=32,eD=768,z=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function W(){return new z("")}function F(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Tn(e){return e.pieces_.length-e.pieceNum_}function X(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new z(e.pieces_,t)}function Ip(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Kx(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function Qo(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function $D(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new z(t,0)}function te(e,t){let n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof z)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{let r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new z(n,0)}function L(e){return e.pieceNum_>=e.pieces_.length}function Te(e,t){let n=F(e),r=F(t);if(n===null)return t;if(n===r)return Te(X(e),X(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Xx(e,t){let n=Qo(e,0),r=Qo(t,0);for(let i=0;i<n.length&&i<r.length;i++){let o=lr(n[i],r[i]);if(o!==0)return o}return n.length===r.length?0:n.length<r.length?-1:1}function bp(e,t){if(Tn(e)!==Tn(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function st(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Tn(e)>Tn(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Th=class{constructor(t,n){this.errorPrefix_=n,this.parts_=Qo(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ki(this.parts_[r]);HD(this)}};function Jx(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=ki(t),HD(e)}function eR(e){let t=e.parts_.pop();e.byteLength_-=ki(t),e.parts_.length>0&&(e.byteLength_-=1)}function HD(e){if(e.byteLength_>eD)throw new Error(e.errorPrefix_+"has a key path longer than "+eD+" bytes ("+e.byteLength_+").");if(e.parts_.length>JC)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+JC+") or object contains a cycle "+ir(e))}function ir(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var Mh=class e extends jl{constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new e}getInitialEvent(t){return g(t==="visible","Unknown event type: "+t),[this.visible_]}};var Bo=1e3,tR=60*5*1e3,tD=30*1e3,nR=1.3,rR=3e4,iR="server_kill",nD=3,Sp=(()=>{class e extends Vl{constructor(n,r,i,o,s,a,l,c){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=e.nextPersistentConnectionId_++,this.log_=cs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Bo,this.maxReconnectDelay_=tR,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Et())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Mh.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Bl.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(le(s)),g(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new pe,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?r.resolve(l):r.reject(l)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),g(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let l={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,l=>{let c=l.d,u=l.s;e.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,c))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Ye(n,"w")){let i=nn(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();De(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||pg(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=tD)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=hg(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+le(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):_h("Unrecognized action received from server: "+le(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){g(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Bo,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Bo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>rR&&(this.reconnectDelay_=Bo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*nR)}this.onConnectStatus_(!1)}establishConnection_(){return ct(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,i())},u=function(f){g(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)};this.realtime_={close:c,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?me("getToken() completed but was canceled"):(me("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,l=new Sh(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{De(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(iR)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&De(f),c())}}})}interrupt(n){me("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){me("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ds(this.interruptReasons_)&&(this.reconnectDelay_=Bo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>wp(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new z(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){me("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=nD&&(this.reconnectDelay_=tD,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){me("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=nD&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Et()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Cp.replace(/\./g,"-")]=1,Nc()?n["framework.cordova"]=1:ug()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Bl.getInstance().currentlyOnline();return Ds(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),V=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var Ci=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let r=new V(Sn,t),i=new V(Sn,n);return this.compare(r,i)!==0}minPost(){return V.MIN}};var kl,Ul=class extends Ci{static get __EMPTY_NODE(){return kl}static set __EMPTY_NODE(t){kl=t}compare(t,n){return lr(t.name,n.name)}isDefinedOn(t){throw pr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return V.MIN}maxPost(){return new V(en,kl)}makePost(t,n){return g(typeof t=="string","KeyIndex indexValue must always be a string."),new V(t,kl)}toString(){return".key"}},Rt=new Ul;var yi=class{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=n?r(t.key,n):1,i&&(s*=-1),s<0)this.isReverse_?t=t.left:t=t.right;else if(s===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Dt=(()=>{class e{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??e.RED,this.left=o??at.EMPTY_NODE,this.right=s??at.EMPTY_NODE}copy(n,r,i,o,s){return new e(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return at.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return at.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),Ah=class{copy(t,n,r,i,o){return this}insert(t,n,r){return new Dt(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},at=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Dt.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Dt.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new yi(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new yi(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new yi(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new yi(this.root_,null,this.comparator_,!0,t)}};at.EMPTY_NODE=new Ah;function oR(e,t){return lr(e.name,t.name)}function Tp(e,t){return lr(e,t)}var Nh;function sR(e){Nh=e}var GD=function(e){return typeof e=="number"?"number:"+bD(e):"string:"+e},WD=function(e){if(e.isLeafNode()){let t=e.val();g(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Ye(t,".sv"),"Priority must be a string or number.")}else g(e===Nh||e.isEmpty(),"priority of unexpected type.");g(e===Nh||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var rD,Di=(()=>{class e{constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,g(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),WD(this.priorityNode_)}static set __childrenNodeConstructor(n){rD=n}static get __childrenNodeConstructor(){return rD}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return L(n)?this:F(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=F(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(g(i!==".priority"||Tn(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(X(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+GD(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=bD(this.value_):n+=this.value_,this.lazyHash_=wD(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(g(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),s=e.VALUE_TYPE_ORDER.indexOf(i);return g(o>=0,"Unknown leaf type: "+r),g(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),zD,qD;function aR(e){zD=e}function lR(e){qD=e}var xh=class extends Ci{compare(t,n){let r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?lr(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return V.MIN}maxPost(){return new V(en,new Di("[PRIORITY-POST]",qD))}makePost(t,n){let r=zD(t);return new V(n,new Di("[PRIORITY-POST]",r))}toString(){return".priority"}},ee=new xh;var cR=Math.log(2),Rh=class{constructor(t){let n=o=>parseInt(Math.log(o)/cR,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},$l=function(e,t,n,r){e.sort(t);let i=function(l,c){let u=c-l,d,f;if(u===0)return null;if(u===1)return d=e[l],f=n?n(d):d,new Dt(f,d.node,Dt.BLACK,null,null);{let h=parseInt(u/2,10)+l,p=i(l,h),m=i(h+1,c);return d=e[h],f=n?n(d):d,new Dt(f,d.node,Dt.BLACK,p,m)}},o=function(l){let c=null,u=null,d=e.length,f=function(p,m){let C=d-p,b=d;d-=p;let $=i(C+1,b),k=e[C],ne=n?n(k):k;h(new Dt(ne,k.node,m,null,$))},h=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){let m=l.nextBitIsOne(),C=Math.pow(2,l.count-(p+1));m?f(C,Dt.BLACK):(f(C,Dt.BLACK),f(C,Dt.RED))}return u},s=new Rh(e.length),a=o(s);return new at(r||t,a)};var fh,mi={},wi=class e{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return g(mi&&ee,"ChildrenNode.ts has not been loaded"),fh=fh||new e({".priority":mi},{".priority":ee}),fh}get(t){let n=nn(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof at?n:null}hasIndex(t){return Ye(this.indexSet_,t.toString())}addIndex(t,n){g(t!==Rt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(V.Wrap),s=o.getNext();for(;s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=$l(r,t.getCompare()):a=mi;let l=t.toString(),c=Object.assign({},this.indexSet_);c[l]=t;let u=Object.assign({},this.indexes_);return u[l]=a,new e(u,c)}addToIndexes(t,n){let r=Oi(this.indexes_,(i,o)=>{let s=nn(this.indexSet_,o);if(g(s,"Missing index implementation for "+o),i===mi)if(s.isDefinedOn(t.node)){let a=[],l=n.getIterator(V.Wrap),c=l.getNext();for(;c;)c.name!==t.name&&a.push(c),c=l.getNext();return a.push(t),$l(a,s.getCompare())}else return mi;else{let a=n.get(t.name),l=i;return a&&(l=l.remove(new V(t.name,a))),l.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=Oi(this.indexes_,i=>{if(i===mi)return i;{let o=n.get(t.name);return o?i.remove(new V(t.name,o)):i}});return new e(r,this.indexSet_)}};var Uo,x=(()=>{class e{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&WD(this.priorityNode_),this.children_.isEmpty()&&g(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Uo||(Uo=new e(new at(Tp),null,wi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Uo}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Uo:r}}getChild(n){let r=F(n);return r===null?this:this.getImmediateChild(r).getChild(X(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(g(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new V(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Uo:this.priorityNode_;return new e(o,a,s)}}updateChild(n,r){let i=F(n);if(i===null)return r;{g(F(n)!==".priority"||Tn(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(X(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(ee,(a,l)=>{r[a]=l.val(n),i++,s&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let l in r)a[l]=r[l];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+GD(this.getPriority().val())+":"),this.forEachChild(ee,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":wD(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new V(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new V(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new V(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,V.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,V.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===us?-1:0}withIndex(n){if(n===Rt||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Rt||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ee),o=r.getIterator(ee),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Rt?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),Oh=class extends x{constructor(){super(new at(Tp),x.EMPTY_NODE,wi.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return x.EMPTY_NODE}isEmpty(){return!1}},us=new Oh;Object.defineProperties(V,{MIN:{value:new V(Sn,x.EMPTY_NODE)},MAX:{value:new V(en,us)}});Ul.__EMPTY_NODE=x.EMPTY_NODE;Di.__childrenNodeConstructor=x;sR(us);lR(us);var uR=!0;function se(e,t=null){if(e===null)return x.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),g(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new Di(n,se(t))}if(!(e instanceof Array)&&uR){let n=[],r=!1;if(ve(e,(s,a)=>{if(s.substring(0,1)!=="."){let l=se(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new V(s,l)))}}),n.length===0)return x.EMPTY_NODE;let o=$l(n,oR,s=>s.name,Tp);if(r){let s=$l(n,ee.getCompare());return new x(o,se(t),new wi({".priority":s},{".priority":ee}))}else return new x(o,se(t),wi.Default)}else{let n=x.EMPTY_NODE;return ve(e,(r,i)=>{if(Ye(e,r)&&r.substring(0,1)!=="."){let o=se(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(se(t))}}aR(se);var Zo=class extends Ci{constructor(t){super(),this.indexPath_=t,g(!L(t)&&F(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?lr(t.name,n.name):o}makePost(t,n){let r=se(t),i=x.EMPTY_NODE.updateChild(this.indexPath_,r);return new V(n,i)}maxPost(){let t=x.EMPTY_NODE.updateChild(this.indexPath_,us);return new V(en,t)}toString(){return Qo(this.indexPath_,0).join("/")}};var kh=class extends Ci{compare(t,n){let r=t.node.compareTo(n.node);return r===0?lr(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return V.MIN}maxPost(){return V.MAX}makePost(t,n){let r=se(t);return new V(n,r)}toString(){return".value"}},Mp=new kh;function YD(e){return{type:"value",snapshotNode:e}}function Ei(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ko(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Xo(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function dR(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var Jo=class{constructor(t){this.index_=t}updateChild(t,n,r,i,o,s){g(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?t.hasChild(n)?s.trackChildChange(Ko(n,a)):g(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Ei(n,r)):s.trackChildChange(Xo(n,r,a))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(ee,(i,o)=>{n.hasChild(i)||r.trackChildChange(Ko(i,o))}),n.isLeafNode()||n.forEachChild(ee,(i,o)=>{if(t.hasChild(i)){let s=t.getImmediateChild(i);s.equals(o)||r.trackChildChange(Xo(i,o,s))}else r.trackChildChange(Ei(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?x.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Hl=class e{constructor(t){this.indexedFilter_=new Jo(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,o,s){return this.matches(new V(n,r))||(r=x.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,s)}updateFullNode(t,n,r){n.isLeafNode()&&(n=x.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(x.EMPTY_NODE);let o=this;return n.forEachChild(ee,(s,a)=>{o.matches(new V(s,a))||(i=i.updateImmediateChild(s,x.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}};var Ph=class{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Hl(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,o,s){return this.rangedFilter_.matches(new V(n,r))||(r=x.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,s):this.fullLimitUpdateChild_(t,n,r,o,s)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=x.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=x.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(x.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,x.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=t;g(a.numChildren()===this.limit_,"");let l=new V(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,l);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(Xo(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(Ko(n,d));let m=a.updateImmediateChild(n,x.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(Ei(f.name,f.node)),m.updateImmediateChild(f.name,f.node)):m}}else return r.isEmpty()?t:u&&s(c,l)>=0?(o!=null&&(o.trackChildChange(Ko(c.name,c.node)),o.trackChildChange(Ei(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,x.EMPTY_NODE)):t}};var es=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ee}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return g(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return g(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Sn}hasEnd(){return this.endSet_}getIndexEndValue(){return g(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return g(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:en}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return g(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ee}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function fR(e){return e.loadsAllData()?new Jo(e.getIndex()):e.hasLimit()?new Ph(e):new Hl(e)}function hR(e,t){let n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}function pR(e,t){let n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}function Fh(e,t,n){let r=e.copy();return r.startSet_=!0,t===void 0&&(t=null),r.indexStartValue_=t,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function gR(e,t,n){let r;return e.index_===Rt||n?r=Fh(e,t,n):r=Fh(e,t,en),r.startAfterSet_=!0,r}function Lh(e,t,n){let r=e.copy();return r.endSet_=!0,t===void 0&&(t=null),r.indexEndValue_=t,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function mR(e,t,n){let r;return e.index_===Rt||n?r=Lh(e,t,n):r=Lh(e,t,Sn),r.endBeforeSet_=!0,r}function lc(e,t){let n=e.copy();return n.index_=t,n}function iD(e){let t={};if(e.isDefault())return t;let n;if(e.index_===ee?n="$priority":e.index_===Mp?n="$value":e.index_===Rt?n="$key":(g(e.index_ instanceof Zo,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=le(n),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";t[r]=le(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+le(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";t[r]=le(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+le(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function oD(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==ee&&(t.i=e.index_.toString()),t}var Vh=class e extends Vl{constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=cs("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(g(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,r,i){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let s=e.getListenId_(t,r),a={};this.listens_[s]=a;let l=iD(t._queryParams);this.restRequest_(o+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(o,d,!1,r),nn(this.listens_,s)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",i(f,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(t){let n=iD(t._queryParams),r=t._path.toString(),i=new pe;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+gg(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Cs(a.responseText)}catch{De("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&De("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var jh=class{constructor(){this.rootNode_=x.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function Gl(){return{value:null,children:new Map}}function Ai(e,t,n){if(L(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=F(t);e.children.has(r)||e.children.set(r,Gl());let i=e.children.get(r);t=X(t),Ai(i,t,n)}}function Bh(e,t){if(L(t))return e.value=null,e.children.clear(),!0;if(e.value!==null){if(e.value.isLeafNode())return!1;{let n=e.value;return e.value=null,n.forEachChild(ee,(r,i)=>{Ai(e,new z(r),i)}),Bh(e,t)}}else if(e.children.size>0){let n=F(t);return t=X(t),e.children.has(n)&&Bh(e.children.get(n),t)&&e.children.delete(n),e.children.size===0}else return!0}function Uh(e,t,n){e.value!==null?n(t,e.value):vR(e,(r,i)=>{let o=new z(t.toString()+"/"+r);Uh(i,o,n)})}function vR(e,t){e.children.forEach((n,r)=>{t(r,n)})}var $h=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=Object.assign({},t);return this.last_&&ve(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}};var sD=10*1e3,yR=30*1e3,_R=5*60*1e3,Hh=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new $h(t);let r=sD+(yR-sD)*Math.random();Ho(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let t=this.statsListener_.get(),n={},r=!1;ve(t,(i,o)=>{o>0&&Ye(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Ho(this.reportStats_.bind(this),Math.floor(Math.random()*2*_R))}};var xt=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(xt||{});function Ap(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Np(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function xp(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var Gh=class e{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=xt.ACK_USER_WRITE,this.source=Ap()}operationForChild(t){if(L(this.path)){if(this.affectedTree.value!=null)return g(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new z(t));return new e(W(),n,this.revert)}}else return g(F(this.path)===t,"operationForChild called for unrelated child."),new e(X(this.path),this.affectedTree,this.revert)}};var Wl=class e{constructor(t,n){this.source=t,this.path=n,this.type=xt.LISTEN_COMPLETE}operationForChild(t){return L(this.path)?new e(this.source,W()):new e(this.source,X(this.path))}};var Ii=class e{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=xt.OVERWRITE}operationForChild(t){return L(this.path)?new e(this.source,W(),this.snap.getImmediateChild(t)):new e(this.source,X(this.path),this.snap)}};var ts=class e{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=xt.MERGE}operationForChild(t){if(L(this.path)){let n=this.children.subtree(new z(t));return n.isEmpty()?null:n.value?new Ii(this.source,W(),n.value):new e(this.source,W(),n)}else return g(F(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,X(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var kt=class{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(L(t))return this.isFullyInitialized()&&!this.filtered_;let n=F(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var Wh=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function CR(e,t,n,r){let i=[],o=[];return t.forEach(s=>{s.type==="child_changed"&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(dR(s.childName,s.snapshotNode))}),$o(e,i,"child_removed",t,r,n),$o(e,i,"child_added",t,r,n),$o(e,i,"child_moved",o,r,n),$o(e,i,"child_changed",t,r,n),$o(e,i,"value",t,r,n),i}function $o(e,t,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,l)=>wR(e,a,l)),s.forEach(a=>{let l=DR(e,a,o);i.forEach(c=>{c.respondsTo(a.type)&&t.push(c.createEvent(l,e.query_))})})}function DR(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function wR(e,t,n){if(t.childName==null||n.childName==null)throw pr("Should only compare child_ events.");let r=new V(t.childName,t.snapshotNode),i=new V(n.childName,n.snapshotNode);return e.index_.compare(r,i)}function cc(e,t){return{eventCache:e,serverCache:t}}function Wo(e,t,n,r){return cc(new kt(t,n,r),e.serverCache)}function QD(e,t,n,r){return cc(e.eventCache,new kt(t,n,r))}function zl(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ar(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var hh,ER=()=>(hh||(hh=new at(Dx)),hh),Me=class e{constructor(t,n=ER()){this.value=t,this.children=n}static fromObject(t){let n=new e(null);return ve(t,(r,i)=>{n=n.set(new z(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:W(),value:this.value};if(L(t))return null;{let r=F(t),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(X(t),n);return o!=null?{path:te(new z(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(L(t))return this;{let n=F(t),r=this.children.get(n);return r!==null?r.subtree(X(t)):new e(null)}}set(t,n){if(L(t))return new e(n,this.children);{let r=F(t),o=(this.children.get(r)||new e(null)).set(X(t),n),s=this.children.insert(r,o);return new e(this.value,s)}}remove(t){if(L(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=F(t),r=this.children.get(n);if(r){let i=r.remove(X(t)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(t){if(L(t))return this.value;{let n=F(t),r=this.children.get(n);return r?r.get(X(t)):null}}setTree(t,n){if(L(t))return n;{let r=F(t),o=(this.children.get(r)||new e(null)).setTree(X(t),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new e(this.value,s)}}fold(t){return this.fold_(W(),t)}fold_(t,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(te(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,W(),n)}findOnPath_(t,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(L(t))return null;{let o=F(t),s=this.children.get(o);return s?s.findOnPath_(X(t),te(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,W(),n)}foreachOnPath_(t,n,r){if(L(t))return this;{this.value&&r(n,this.value);let i=F(t),o=this.children.get(i);return o?o.foreachOnPath_(X(t),te(n,i),r):new e(null)}}foreach(t){this.foreach_(W(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(te(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}};var wt=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new Me(null))}};function zo(e,t,n){if(L(t))return new wt(new Me(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,o=r.value,s=Te(i,t);return o=o.updateChild(s,n),new wt(e.writeTree_.set(i,o))}else{let i=new Me(n),o=e.writeTree_.setTree(t,i);return new wt(o)}}}function zh(e,t,n){let r=e;return ve(n,(i,o)=>{r=zo(r,te(t,i),o)}),r}function aD(e,t){if(L(t))return wt.empty();{let n=e.writeTree_.setTree(t,new Me(null));return new wt(n)}}function qh(e,t){return cr(e,t)!=null}function cr(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(Te(n.path,t)):null}function lD(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ee,(r,i)=>{t.push(new V(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new V(r,i.value))}),t}function In(e,t){if(L(t))return e;{let n=cr(e,t);return n!=null?new wt(new Me(n)):new wt(e.writeTree_.subtree(t))}}function Yh(e){return e.writeTree_.isEmpty()}function bi(e,t){return ZD(W(),e.writeTree_,t)}function ZD(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{i===".priority"?(g(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=ZD(te(e,i),o,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(te(e,".priority"),r)),n}}function uc(e,t){return ew(t,e)}function IR(e,t,n,r,i){g(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=zo(e.visibleWrites,t,n)),e.lastWriteId=r}function bR(e,t,n,r){g(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=zh(e.visibleWrites,t,n),e.lastWriteId=r}function SR(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function TR(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);g(n>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){let a=e.allWrites[s];a.visible&&(s>=n&&MR(a,r.path)?i=!1:st(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return AR(e),!0;if(r.snap)e.visibleWrites=aD(e.visibleWrites,r.path);else{let a=r.children;ve(a,l=>{e.visibleWrites=aD(e.visibleWrites,te(r.path,l))})}return!0}else return!1}function MR(e,t){if(e.snap)return st(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&st(te(e.path,n),t))return!0;return!1}function AR(e){e.visibleWrites=KD(e.allWrites,NR,W()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function NR(e){return e.visible}function KD(e,t,n){let r=wt.empty();for(let i=0;i<e.length;++i){let o=e[i];if(t(o)){let s=o.path,a;if(o.snap)st(n,s)?(a=Te(n,s),r=zo(r,a,o.snap)):st(s,n)&&(a=Te(s,n),r=zo(r,W(),o.snap.getChild(a)));else if(o.children){if(st(n,s))a=Te(n,s),r=zh(r,a,o.children);else if(st(s,n))if(a=Te(s,n),L(a))r=zh(r,W(),o.children);else{let l=nn(o.children,F(a));if(l){let c=l.getChild(X(a));r=zo(r,W(),c)}}}else throw pr("WriteRecord should have .snap or .children")}}return r}function XD(e,t,n,r,i){if(!r&&!i){let o=cr(e.visibleWrites,t);if(o!=null)return o;{let s=In(e.visibleWrites,t);if(Yh(s))return n;if(n==null&&!qh(s,W()))return null;{let a=n||x.EMPTY_NODE;return bi(s,a)}}}else{let o=In(e.visibleWrites,t);if(!i&&Yh(o))return n;if(!i&&n==null&&!qh(o,W()))return null;{let s=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(st(c.path,t)||st(t,c.path))},a=KD(e.allWrites,s,t),l=n||x.EMPTY_NODE;return bi(a,l)}}}function xR(e,t,n){let r=x.EMPTY_NODE,i=cr(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ee,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=In(e.visibleWrites,t);return n.forEachChild(ee,(s,a)=>{let l=bi(In(o,new z(s)),a);r=r.updateImmediateChild(s,l)}),lD(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=In(e.visibleWrites,t);return lD(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function RR(e,t,n,r,i){g(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=te(t,n);if(qh(e.visibleWrites,o))return null;{let s=In(e.visibleWrites,o);return Yh(s)?i.getChild(n):bi(s,i.getChild(n))}}function OR(e,t,n,r){let i=te(t,n),o=cr(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=In(e.visibleWrites,i);return bi(s,r.getNode().getImmediateChild(n))}else return null}function kR(e,t){return cr(e.visibleWrites,t)}function PR(e,t,n,r,i,o,s){let a,l=In(e.visibleWrites,t),c=cr(l,W());if(c!=null)a=c;else if(n!=null)a=bi(l,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function FR(){return{visibleWrites:wt.empty(),allWrites:[],lastWriteId:-1}}function ql(e,t,n,r){return XD(e.writeTree,e.treePath,t,n,r)}function Rp(e,t){return xR(e.writeTree,e.treePath,t)}function cD(e,t,n,r){return RR(e.writeTree,e.treePath,t,n,r)}function Yl(e,t){return kR(e.writeTree,te(e.treePath,t))}function LR(e,t,n,r,i,o){return PR(e.writeTree,e.treePath,t,n,r,i,o)}function Op(e,t,n){return OR(e.writeTree,e.treePath,t,n)}function JD(e,t){return ew(te(e.treePath,t),e.writeTree)}function ew(e,t){return{treePath:e,writeTree:t}}var Qh=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,r=t.childName;g(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),g(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,Xo(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Ko(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,Ei(r,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,Xo(r,t.snapshotNode,i.oldSnap));else throw pr("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}};var Zh=class{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}},tw=new Zh,ns=class{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let r=this.optCompleteServerCache_!=null?new kt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Op(this.writes_,t,r)}}getChildAfterChild(t,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ar(this.viewCache_),o=LR(this.writes_,i,n,1,r,t);return o.length===0?null:o[0]}};function VR(e){return{filter:e}}function jR(e,t){g(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),g(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function BR(e,t,n,r,i){let o=new Qh,s,a;if(n.type===xt.OVERWRITE){let c=n;c.source.fromUser?s=Kh(e,t,c.path,c.snap,r,i,o):(g(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered()&&!L(c.path),s=Ql(e,t,c.path,c.snap,r,i,a,o))}else if(n.type===xt.MERGE){let c=n;c.source.fromUser?s=$R(e,t,c.path,c.children,r,i,o):(g(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),s=Xh(e,t,c.path,c.children,r,i,a,o))}else if(n.type===xt.ACK_USER_WRITE){let c=n;c.revert?s=WR(e,t,c.path,r,i,o):s=HR(e,t,c.path,c.affectedTree,r,i,o)}else if(n.type===xt.LISTEN_COMPLETE)s=GR(e,t,n.path,r,o);else throw pr("Unknown operation type: "+n.type);let l=o.getChanges();return UR(t,s,l),{viewCache:s,changes:l}}function UR(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=zl(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(YD(zl(t)))}}function nw(e,t,n,r,i,o){let s=t.eventCache;if(Yl(r,n)!=null)return t;{let a,l;if(L(n))if(g(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let c=ar(t),u=c instanceof x?c:x.EMPTY_NODE,d=Rp(r,u);a=e.filter.updateFullNode(t.eventCache.getNode(),d,o)}else{let c=ql(r,ar(t));a=e.filter.updateFullNode(t.eventCache.getNode(),c,o)}else{let c=F(n);if(c===".priority"){g(Tn(n)===1,"Can't have a priority with additional path components");let u=s.getNode();l=t.serverCache.getNode();let d=cD(r,n,u,l);d!=null?a=e.filter.updatePriority(u,d):a=s.getNode()}else{let u=X(n),d;if(s.isCompleteForChild(c)){l=t.serverCache.getNode();let f=cD(r,n,s.getNode(),l);f!=null?d=s.getNode().getImmediateChild(c).updateChild(u,f):d=s.getNode().getImmediateChild(c)}else d=Op(r,c,t.serverCache);d!=null?a=e.filter.updateChild(s.getNode(),c,d,u,i,o):a=s.getNode()}}return Wo(t,a,s.isFullyInitialized()||L(n),e.filter.filtersNodes())}}function Ql(e,t,n,r,i,o,s,a){let l=t.serverCache,c,u=s?e.filter:e.filter.getIndexedFilter();if(L(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){let h=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),h,null)}else{let h=F(n);if(!l.isCompleteForPath(n)&&Tn(n)>1)return t;let p=X(n),C=l.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?c=u.updatePriority(l.getNode(),C):c=u.updateChild(l.getNode(),h,C,p,tw,null)}let d=QD(t,c,l.isFullyInitialized()||L(n),u.filtersNodes()),f=new ns(i,d,o);return nw(e,d,n,i,f,a)}function Kh(e,t,n,r,i,o,s){let a=t.eventCache,l,c,u=new ns(i,t,o);if(L(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,s),l=Wo(t,c,!0,e.filter.filtersNodes());else{let d=F(n);if(d===".priority")c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Wo(t,c,a.isFullyInitialized(),a.isFiltered());else{let f=X(n),h=a.getNode().getImmediateChild(d),p;if(L(f))p=r;else{let m=u.getCompleteChild(d);m!=null?Ip(f)===".priority"&&m.getChild($D(f)).isEmpty()?p=m:p=m.updateChild(f,r):p=x.EMPTY_NODE}if(h.equals(p))l=t;else{let m=e.filter.updateChild(a.getNode(),d,p,f,u,s);l=Wo(t,m,a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function uD(e,t){return e.eventCache.isCompleteForChild(t)}function $R(e,t,n,r,i,o,s){let a=t;return r.foreach((l,c)=>{let u=te(n,l);uD(t,F(u))&&(a=Kh(e,a,u,c,i,o,s))}),r.foreach((l,c)=>{let u=te(n,l);uD(t,F(u))||(a=Kh(e,a,u,c,i,o,s))}),a}function dD(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function Xh(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l=t,c;L(n)?c=r:c=new Me(null).setTree(n,r);let u=t.serverCache.getNode();return c.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=t.serverCache.getNode().getImmediateChild(d),p=dD(e,h,f);l=Ql(e,l,new z(d),p,i,o,s,a)}}),c.children.inorderTraversal((d,f)=>{let h=!t.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=t.serverCache.getNode().getImmediateChild(d),m=dD(e,p,f);l=Ql(e,l,new z(d),m,i,o,s,a)}}),l}function HR(e,t,n,r,i,o,s){if(Yl(i,n)!=null)return t;let a=t.serverCache.isFiltered(),l=t.serverCache;if(r.value!=null){if(L(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Ql(e,t,n,l.getNode().getChild(n),i,o,a,s);if(L(n)){let c=new Me(null);return l.getNode().forEachChild(Rt,(u,d)=>{c=c.set(new z(u),d)}),Xh(e,t,n,c,i,o,a,s)}else return t}else{let c=new Me(null);return r.foreach((u,d)=>{let f=te(n,u);l.isCompleteForPath(f)&&(c=c.set(u,l.getNode().getChild(f)))}),Xh(e,t,n,c,i,o,a,s)}}function GR(e,t,n,r,i){let o=t.serverCache,s=QD(t,o.getNode(),o.isFullyInitialized()||L(n),o.isFiltered());return nw(e,s,n,r,tw,i)}function WR(e,t,n,r,i,o){let s;if(Yl(r,n)!=null)return t;{let a=new ns(r,t,i),l=t.eventCache.getNode(),c;if(L(n)||F(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=ql(r,ar(t));else{let d=t.serverCache.getNode();g(d instanceof x,"serverChildren would be complete if leaf node"),u=Rp(r,d)}u=u,c=e.filter.updateFullNode(l,u,o)}else{let u=F(n),d=Op(r,u,t.serverCache);d==null&&t.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=e.filter.updateChild(l,u,d,X(n),a,o):t.eventCache.getNode().hasChild(u)?c=e.filter.updateChild(l,u,x.EMPTY_NODE,X(n),a,o):c=l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=ql(r,ar(t)),s.isLeafNode()&&(c=e.filter.updateFullNode(c,s,o)))}return s=t.serverCache.isFullyInitialized()||Yl(r,W())!=null,Wo(t,c,s,e.filter.filtersNodes())}}var Jh=class{constructor(t,n){this.query_=t,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Jo(r.getIndex()),o=fR(r);this.processor_=VR(o);let s=n.serverCache,a=n.eventCache,l=i.updateFullNode(x.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(x.EMPTY_NODE,a.getNode(),null),u=new kt(l,s.isFullyInitialized(),i.filtersNodes()),d=new kt(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=cc(d,u),this.eventGenerator_=new Wh(this.query_)}get query(){return this.query_}};function zR(e){return e.viewCache_.serverCache.getNode()}function qR(e){return zl(e.viewCache_)}function YR(e,t){let n=ar(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!L(t)&&!n.getImmediateChild(F(t)).isEmpty())?n.getChild(t):null}function fD(e){return e.eventRegistrations_.length===0}function QR(e,t){e.eventRegistrations_.push(t)}function hD(e,t,n){let r=[];if(n){g(t==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){let s=e.eventRegistrations_[o];if(!s.matches(t))i.push(s);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function pD(e,t,n,r){t.type===xt.MERGE&&t.source.queryId!==null&&(g(ar(e.viewCache_),"We should always have a full cache before handling merges"),g(zl(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,o=BR(e.processor_,i,t,n,r);return jR(e.processor_,o.viewCache),g(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,rw(e,o.changes,o.viewCache.eventCache.getNode(),null)}function ZR(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ee,(o,s)=>{r.push(Ei(o,s))}),n.isFullyInitialized()&&r.push(YD(n.getNode())),rw(e,r,n.getNode(),t)}function rw(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return CR(e.eventGenerator_,t,n,i)}var Zl,Kl=class{constructor(){this.views=new Map}};function KR(e){g(!Zl,"__referenceConstructor has already been defined"),Zl=e}function XR(){return g(Zl,"Reference.ts has not been loaded"),Zl}function JR(e){return e.views.size===0}function kp(e,t,n,r){let i=t.source.queryId;if(i!==null){let o=e.views.get(i);return g(o!=null,"SyncTree gave us an op for an invalid query."),pD(o,t,n,r)}else{let o=[];for(let s of e.views.values())o=o.concat(pD(s,t,n,r));return o}}function iw(e,t,n,r,i){let o=t._queryIdentifier,s=e.views.get(o);if(!s){let a=ql(n,i?r:null),l=!1;a?l=!0:r instanceof x?(a=Rp(n,r),l=!1):(a=x.EMPTY_NODE,l=!1);let c=cc(new kt(a,l,!1),new kt(r,i,!1));return new Jh(t,c)}return s}function eO(e,t,n,r,i,o){let s=iw(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),QR(s,n),ZR(s,n)}function tO(e,t,n,r){let i=t._queryIdentifier,o=[],s=[],a=Mn(e);if(i==="default")for(let[l,c]of e.views.entries())s=s.concat(hD(c,n,r)),fD(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{let l=e.views.get(i);l&&(s=s.concat(hD(l,n,r)),fD(l)&&(e.views.delete(i),l.query._queryParams.loadsAllData()||o.push(l.query)))}return a&&!Mn(e)&&o.push(new(XR())(t._repo,t._path)),{removed:o,events:s}}function ow(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function bn(e,t){let n=null;for(let r of e.views.values())n=n||YR(r,t);return n}function sw(e,t){if(t._queryParams.loadsAllData())return dc(e);{let r=t._queryIdentifier;return e.views.get(r)}}function aw(e,t){return sw(e,t)!=null}function Mn(e){return dc(e)!=null}function dc(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var Xl;function nO(e){g(!Xl,"__referenceConstructor has already been defined"),Xl=e}function rO(){return g(Xl,"Reference.ts has not been loaded"),Xl}var iO=1,Jl=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Me(null),this.pendingWriteTree_=FR(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Pp(e,t,n,r,i){return IR(e.pendingWriteTree_,t,n,r,i),i?Ni(e,new Ii(Ap(),t,n)):[]}function oO(e,t,n,r){bR(e.pendingWriteTree_,t,n,r);let i=Me.fromObject(n);return Ni(e,new ts(Ap(),t,i))}function En(e,t,n=!1){let r=SR(e.pendingWriteTree_,t);if(TR(e.pendingWriteTree_,t)){let o=new Me(null);return r.snap!=null?o=o.set(W(),!0):ve(r.children,s=>{o=o.set(new z(s),!0)}),Ni(e,new Gh(r.path,o,n))}else return[]}function ds(e,t,n){return Ni(e,new Ii(Np(),t,n))}function sO(e,t,n){let r=Me.fromObject(n);return Ni(e,new ts(Np(),t,r))}function aO(e,t){return Ni(e,new Wl(Np(),t))}function lO(e,t,n){let r=Fp(e,n);if(r){let i=Lp(r),o=i.path,s=i.queryId,a=Te(o,t),l=new Wl(xp(s),a);return Vp(e,o,l)}else return[]}function ec(e,t,n,r,i=!1){let o=t._path,s=e.syncPointTree_.get(o),a=[];if(s&&(t._queryIdentifier==="default"||aw(s,t))){let l=tO(s,t,n,r);JR(s)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let c=l.removed;if(a=l.events,!i){let u=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=e.syncPointTree_.findOnPath(o,(f,h)=>Mn(h));if(u&&!d){let f=e.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=dO(f);for(let p=0;p<h.length;++p){let m=h[p],C=m.query,b=dw(e,m);e.listenProvider_.startListening(qo(C),rs(e,C),b.hashFn,b.onComplete)}}}!d&&c.length>0&&!r&&(u?e.listenProvider_.stopListening(qo(t),null):c.forEach(f=>{let h=e.queryToTagMap.get(hc(f));e.listenProvider_.stopListening(qo(f),h)}))}fO(e,c)}return a}function lw(e,t,n,r){let i=Fp(e,r);if(i!=null){let o=Lp(i),s=o.path,a=o.queryId,l=Te(s,t),c=new Ii(xp(a),l,n);return Vp(e,s,c)}else return[]}function cO(e,t,n,r){let i=Fp(e,r);if(i){let o=Lp(i),s=o.path,a=o.queryId,l=Te(s,t),c=Me.fromObject(n),u=new ts(xp(a),l,c);return Vp(e,s,u)}else return[]}function ep(e,t,n,r=!1){let i=t._path,o=null,s=!1;e.syncPointTree_.foreachOnPath(i,(f,h)=>{let p=Te(f,i);o=o||bn(h,p),s=s||Mn(h)});let a=e.syncPointTree_.get(i);a?(s=s||Mn(a),o=o||bn(a,W())):(a=new Kl,e.syncPointTree_=e.syncPointTree_.set(i,a));let l;o!=null?l=!0:(l=!1,o=x.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((h,p)=>{let m=bn(p,W());m&&(o=o.updateImmediateChild(h,m))}));let c=aw(a,t);if(!c&&!t._queryParams.loadsAllData()){let f=hc(t);g(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=hO();e.queryToTagMap.set(f,h),e.tagToQueryMap.set(h,f)}let u=uc(e.pendingWriteTree_,i),d=eO(a,t,n,u,o,l);if(!c&&!s&&!r){let f=sw(a,t);d=d.concat(pO(e,t,f))}return d}function fc(e,t,n){let i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,a)=>{let l=Te(s,t),c=bn(a,l);if(c)return c});return XD(i,t,o,n,!0)}function uO(e,t){let n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(c,u)=>{let d=Te(c,n);r=r||bn(u,d)});let i=e.syncPointTree_.get(n);i?r=r||bn(i,W()):(i=new Kl,e.syncPointTree_=e.syncPointTree_.set(n,i));let o=r!=null,s=o?new kt(r,!0,!1):null,a=uc(e.pendingWriteTree_,t._path),l=iw(i,t,a,o?s.getNode():x.EMPTY_NODE,o);return qR(l)}function Ni(e,t){return cw(t,e.syncPointTree_,null,uc(e.pendingWriteTree_,W()))}function cw(e,t,n,r){if(L(e.path))return uw(e,t,n,r);{let i=t.get(W());n==null&&i!=null&&(n=bn(i,W()));let o=[],s=F(e.path),a=e.operationForChild(s),l=t.children.get(s);if(l&&a){let c=n?n.getImmediateChild(s):null,u=JD(r,s);o=o.concat(cw(a,l,c,u))}return i&&(o=o.concat(kp(i,e,r,n))),o}}function uw(e,t,n,r){let i=t.get(W());n==null&&i!=null&&(n=bn(i,W()));let o=[];return t.children.inorderTraversal((s,a)=>{let l=n?n.getImmediateChild(s):null,c=JD(r,s),u=e.operationForChild(s);u&&(o=o.concat(uw(u,a,l,c)))}),i&&(o=o.concat(kp(i,e,r,n))),o}function dw(e,t){let n=t.query,r=rs(e,n);return{hashFn:()=>(zR(t)||x.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?lO(e,n._path,r):aO(e,n._path);{let o=Ix(i,n);return ec(e,n,null,o)}}}}function rs(e,t){let n=hc(t);return e.queryToTagMap.get(n)}function hc(e){return e._path.toString()+"$"+e._queryIdentifier}function Fp(e,t){return e.tagToQueryMap.get(t)}function Lp(e){let t=e.indexOf("$");return g(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new z(e.substr(0,t))}}function Vp(e,t,n){let r=e.syncPointTree_.get(t);g(r,"Missing sync point for query tag that we're tracking");let i=uc(e.pendingWriteTree_,t);return kp(r,n,i,null)}function dO(e){return e.fold((t,n,r)=>{if(n&&Mn(n))return[dc(n)];{let i=[];return n&&(i=ow(n)),ve(r,(o,s)=>{i=i.concat(s)}),i}})}function qo(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(rO())(e._repo,e._path):e}function fO(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let i=hc(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function hO(){return iO++}function pO(e,t,n){let r=t._path,i=rs(e,t),o=dw(e,n),s=e.listenProvider_.startListening(qo(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)g(!Mn(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((c,u,d)=>{if(!L(c)&&u&&Mn(u))return[dc(u).query];{let f=[];return u&&(f=f.concat(ow(u).map(h=>h.query))),ve(d,(h,p)=>{f=f.concat(p)}),f}});for(let c=0;c<l.length;++c){let u=l[c];e.listenProvider_.stopListening(qo(u),rs(e,u))}}return s}var tp=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},np=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=te(this.path_,t);return new e(this.syncTree_,n)}node(){return fc(this.syncTree_,this.path_)}},gO=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},gD=function(e,t,n){if(!e||typeof e!="object")return e;if(g(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return mO(e[".sv"],t,n);if(typeof e[".sv"]=="object")return vO(e[".sv"],t);g(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},mO=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:g(!1,"Unexpected server value: "+e)}},vO=function(e,t,n){e.hasOwnProperty("increment")||g(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&g(!1,"Unexpected increment value: "+r);let i=t.node();if(g(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},fw=function(e,t,n,r){return Bp(t,new np(n,e),r)},jp=function(e,t,n){return Bp(e,new tp(t),n)};function Bp(e,t,n){let r=e.getPriority().val(),i=gD(r,t.getImmediateChild(".priority"),n),o;if(e.isLeafNode()){let s=e,a=gD(s.getValue(),t,n);return a!==s.getValue()||i!==s.getPriority().val()?new Di(a,se(i)):e}else{let s=e;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Di(i))),s.forEachChild(ee,(a,l)=>{let c=Bp(l,t.getImmediateChild(a),n);c!==l&&(o=o.updateImmediateChild(a,c))}),o}}var is=class{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}};function pc(e,t){let n=t instanceof z?t:new z(t),r=e,i=F(n);for(;i!==null;){let o=nn(r.node.children,i)||{children:{},childCount:0};r=new is(i,r,o),n=X(n),i=F(n)}return r}function ur(e){return e.node.value}function Up(e,t){e.node.value=t,rp(e)}function hw(e){return e.node.childCount>0}function yO(e){return ur(e)===void 0&&!hw(e)}function gc(e,t){ve(e.node.children,(n,r)=>{t(new is(n,e,r))})}function pw(e,t,n,r){n&&!r&&t(e),gc(e,i=>{pw(i,t,!0,r)}),n&&r&&t(e)}function _O(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function fs(e){return new z(e.parent===null?e.name:fs(e.parent)+"/"+e.name)}function rp(e){e.parent!==null&&CO(e.parent,e.name,e)}function CO(e,t,n){let r=yO(n),i=Ye(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,rp(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,rp(e))}var DO=/[\[\].#$\/\u0000-\u001F\u007F]/,wO=/[\[\].#$\u0000-\u001F\u007F]/,ph=10*1024*1024,mc=function(e){return typeof e=="string"&&e.length!==0&&!DO.test(e)},gw=function(e){return typeof e=="string"&&e.length!==0&&!wO.test(e)},EO=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),gw(e)},os=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!ac(e)||e&&typeof e=="object"&&Ye(e,".sv")},Pt=function(e,t,n,r){r&&t===void 0||hs(xe(e,"value"),t,n)},hs=function(e,t,n){let r=n instanceof z?new Th(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+ir(r));if(typeof t=="function")throw new Error(e+"contains a function "+ir(r)+" with contents = "+t.toString());if(ac(t))throw new Error(e+"contains "+t.toString()+" "+ir(r));if(typeof t=="string"&&t.length>ph/3&&ki(t)>ph)throw new Error(e+"contains a string greater than "+ph+" utf8 bytes "+ir(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,o=!1;if(ve(t,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!mc(s)))throw new Error(e+" contains an invalid key ("+s+") "+ir(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Jx(r,s),hs(e,a,r),eR(r)}),i&&o)throw new Error(e+' contains ".value" child '+ir(r)+" in addition to actual children.")}},IO=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];let o=Qo(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!mc(o[s]))throw new Error(e+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(Xx);let i=null;for(n=0;n<t.length;n++){if(r=t[n],i!==null&&st(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},mw=function(e,t,n,r){if(r&&t===void 0)return;let i=xe(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");let o=[];ve(t,(s,a)=>{let l=new z(s);if(hs(i,a,te(n,l)),Ip(l)===".priority"&&!os(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(l)}),IO(i,o)},$p=function(e,t,n){if(!(n&&t===void 0)){if(ac(t))throw new Error(xe(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!os(t))throw new Error(xe(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ps=function(e,t,n,r){if(!(r&&n===void 0)&&!mc(n))throw new Error(xe(e,t)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},xi=function(e,t,n,r){if(!(r&&n===void 0)&&!gw(n))throw new Error(xe(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},bO=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),xi(e,t,n,r)},Ge=function(e,t){if(F(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},vw=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!mc(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!EO(n))throw new Error(xe(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var ip=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function vc(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],o=i.getPath();n!==null&&!bp(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function yw(e,t,n){vc(e,n),_w(e,r=>bp(r,t))}function We(e,t,n){vc(e,n),_w(e,r=>st(r,t)||st(t,r))}function _w(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let o=i.path;t(o)?(SO(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function SO(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();sr&&me("event: "+n.toString()),Mi(r)}}}var Cw="repo_interrupt",TO=25,op=class{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ip,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Gl(),this.transactionQueueTree_=new is,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function MO(e,t,n){if(e.stats_=Ep(e.repoInfo_),e.forceRestClient_||Mx())e.server_=new Vh(e.repoInfo_,(r,i,o,s)=>{mD(e,r,i,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>vD(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{le(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Sp(e.repoInfo_,t,(r,i,o,s)=>{mD(e,r,i,o,s)},r=>{vD(e,r)},r=>{AO(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=Nx(e.repoInfo_,()=>new Hh(e.stats_,e.server_)),e.infoData_=new jh,e.infoSyncTree_=new Jl({startListening:(r,i,o,s)=>{let a=[],l=e.infoData_.getNode(r._path);return l.isEmpty()||(a=ds(e.infoSyncTree_,r._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),Hp(e,"connected",!1),e.serverSyncTree_=new Jl({startListening:(r,i,o,s)=>(e.server_.listen(r,o,i,(a,l)=>{let c=s(a,l);We(e.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function Dw(e){let n=e.infoData_.getNode(new z(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function gs(e){return gO({timestamp:Dw(e)})}function mD(e,t,n,r,i){e.dataUpdateCount++;let o=new z(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){let l=Oi(n,c=>se(c));s=cO(e.serverSyncTree_,o,l,i)}else{let l=se(n);s=lw(e.serverSyncTree_,o,l,i)}else if(r){let l=Oi(n,c=>se(c));s=sO(e.serverSyncTree_,o,l)}else{let l=se(n);s=ds(e.serverSyncTree_,o,l)}let a=o;s.length>0&&(a=Si(e,o)),We(e.eventQueue_,a,s)}function vD(e,t){Hp(e,"connected",t),t===!1&&RO(e)}function AO(e,t){ve(t,(n,r)=>{Hp(e,n,r)})}function Hp(e,t,n){let r=new z("/.info/"+t),i=se(n);e.infoData_.updateSnapshot(r,i);let o=ds(e.infoSyncTree_,r,i);We(e.eventQueue_,r,o)}function yc(e){return e.nextWriteId_++}function NO(e,t,n){let r=uO(e.serverSyncTree_,t);return r!=null?Promise.resolve(r):e.server_.get(t).then(i=>{let o=se(i).withIndex(t._queryParams.getIndex());ep(e.serverSyncTree_,t,n,!0);let s;if(t._queryParams.loadsAllData())s=ds(e.serverSyncTree_,t._path,o);else{let a=rs(e.serverSyncTree_,t);s=lw(e.serverSyncTree_,t._path,o,a)}return We(e.eventQueue_,t._path,s),ec(e.serverSyncTree_,t,n,null,!0),o},i=>(Ri(e,"get for query "+le(t)+" failed: "+i),Promise.reject(new Error(i))))}function Gp(e,t,n,r,i){Ri(e,"set",{path:t.toString(),value:n,priority:r});let o=gs(e),s=se(n,r),a=fc(e.serverSyncTree_,t),l=jp(s,a,o),c=yc(e),u=Pp(e.serverSyncTree_,t,l,c,!0);vc(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),(f,h)=>{let p=f==="ok";p||De("set at "+t+" failed: "+f);let m=En(e.serverSyncTree_,c,!p);We(e.eventQueue_,t,m),An(e,i,f,h)});let d=zp(e,t);Si(e,d),We(e.eventQueue_,d,[])}function xO(e,t,n,r){Ri(e,"update",{path:t.toString(),value:n});let i=!0,o=gs(e),s={};if(ve(n,(a,l)=>{i=!1,s[a]=fw(te(t,a),se(l),e.serverSyncTree_,o)}),i)me("update() called with empty data.  Don't do anything."),An(e,r,"ok",void 0);else{let a=yc(e),l=oO(e.serverSyncTree_,t,s,a);vc(e.eventQueue_,l),e.server_.merge(t.toString(),n,(c,u)=>{let d=c==="ok";d||De("update at "+t+" failed: "+c);let f=En(e.serverSyncTree_,a,!d),h=f.length>0?Si(e,t):t;We(e.eventQueue_,h,f),An(e,r,c,u)}),ve(n,c=>{let u=zp(e,te(t,c));Si(e,u)}),We(e.eventQueue_,t,[])}}function RO(e){Ri(e,"onDisconnectEvents");let t=gs(e),n=Gl();Uh(e.onDisconnect_,W(),(i,o)=>{let s=fw(i,o,e.serverSyncTree_,t);Ai(n,i,s)});let r=[];Uh(n,W(),(i,o)=>{r=r.concat(ds(e.serverSyncTree_,i,o));let s=zp(e,i);Si(e,s)}),e.onDisconnect_=Gl(),We(e.eventQueue_,W(),r)}function OO(e,t,n){e.server_.onDisconnectCancel(t.toString(),(r,i)=>{r==="ok"&&Bh(e.onDisconnect_,t),An(e,n,r,i)})}function yD(e,t,n,r){let i=se(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(o,s)=>{o==="ok"&&Ai(e.onDisconnect_,t,i),An(e,r,o,s)})}function kO(e,t,n,r,i){let o=se(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),(s,a)=>{s==="ok"&&Ai(e.onDisconnect_,t,o),An(e,i,s,a)})}function PO(e,t,n,r){if(Ds(n)){me("onDisconnect().update() called with empty data.  Don't do anything."),An(e,r,"ok",void 0);return}e.server_.onDisconnectMerge(t.toString(),n,(i,o)=>{i==="ok"&&ve(n,(s,a)=>{let l=se(a);Ai(e.onDisconnect_,te(t,s),l)}),An(e,r,i,o)})}function FO(e,t,n){let r;F(t._path)===".info"?r=ep(e.infoSyncTree_,t,n):r=ep(e.serverSyncTree_,t,n),yw(e.eventQueue_,t._path,r)}function sp(e,t,n){let r;F(t._path)===".info"?r=ec(e.infoSyncTree_,t,n):r=ec(e.serverSyncTree_,t,n),yw(e.eventQueue_,t._path,r)}function ww(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Cw)}function LO(e){e.persistentConnection_&&e.persistentConnection_.resume(Cw)}function Ri(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),me(n,...t)}function An(e,t,n,r){t&&Mi(()=>{if(n==="ok")t(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,t(s)}})}function VO(e,t,n,r,i,o){Ri(e,"transaction on "+t);let s={path:t,update:n,onComplete:r,status:null,order:DD(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Wp(e,t,void 0);s.currentInputSnapshot=a;let l=s.update(a.val());if(l===void 0)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{hs("transaction failed: Data returned ",l,s.path),s.status=0;let c=pc(e.transactionQueueTree_,t),u=ur(c)||[];u.push(s),Up(c,u);let d;typeof l=="object"&&l!==null&&Ye(l,".priority")?(d=nn(l,".priority"),g(os(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(fc(e.serverSyncTree_,t)||x.EMPTY_NODE).getPriority().val();let f=gs(e),h=se(l,d),p=jp(h,a,f);s.currentOutputSnapshotRaw=h,s.currentOutputSnapshotResolved=p,s.currentWriteId=yc(e);let m=Pp(e.serverSyncTree_,t,p,s.currentWriteId,s.applyLocally);We(e.eventQueue_,t,m),_c(e,e.transactionQueueTree_)}}function Wp(e,t,n){return fc(e.serverSyncTree_,t,n)||x.EMPTY_NODE}function _c(e,t=e.transactionQueueTree_){if(t||Cc(e,t),ur(t)){let n=Iw(e,t);g(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&jO(e,fs(t),n)}else hw(t)&&gc(t,n=>{_c(e,n)})}function jO(e,t,n){let r=n.map(c=>c.currentWriteId),i=Wp(e,t,r),o=i,s=i.hash();for(let c=0;c<n.length;c++){let u=n[c];g(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Te(t,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),l=t;e.server_.put(l.toString(),a,c=>{Ri(e,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(En(e.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Cc(e,pc(e.transactionQueueTree_,t)),_c(e,e.transactionQueueTree_),We(e.eventQueue_,t,u);for(let f=0;f<d.length;f++)Mi(d[f])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{De("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}Si(e,t)}},s)}function Si(e,t){let n=Ew(e,t),r=fs(n),i=Iw(e,n);return BO(e,i,r),r}function BO(e,t,n){if(t.length===0)return;let r=[],i=[],s=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let l=t[a],c=Te(n,l.path),u=!1,d;if(g(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,i=i.concat(En(e.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=TO)u=!0,d="maxretry",i=i.concat(En(e.serverSyncTree_,l.currentWriteId,!0));else{let f=Wp(e,l.path,s);l.currentInputSnapshot=f;let h=t[a].update(f.val());if(h!==void 0){hs("transaction failed: Data returned ",h,l.path);let p=se(h);typeof h=="object"&&h!=null&&Ye(h,".priority")||(p=p.updatePriority(f.getPriority()));let C=l.currentWriteId,b=gs(e),$=jp(p,f,b);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=$,l.currentWriteId=yc(e),s.splice(s.indexOf(C),1),i=i.concat(Pp(e.serverSyncTree_,l.path,$,l.currentWriteId,l.applyLocally)),i=i.concat(En(e.serverSyncTree_,C,!0))}else u=!0,d="nodata",i=i.concat(En(e.serverSyncTree_,l.currentWriteId,!0))}We(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,function(f){setTimeout(f,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(d==="nodata"?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(d),!1,null))))}Cc(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)Mi(r[a]);_c(e,e.transactionQueueTree_)}function Ew(e,t){let n,r=e.transactionQueueTree_;for(n=F(t);n!==null&&ur(r)===void 0;)r=pc(r,n),t=X(t),n=F(t);return r}function Iw(e,t){let n=[];return bw(e,t,n),n.sort((r,i)=>r.order-i.order),n}function bw(e,t,n){let r=ur(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);gc(t,i=>{bw(e,i,n)})}function Cc(e,t){let n=ur(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Up(t,n.length>0?n:void 0)}gc(t,r=>{Cc(e,r)})}function zp(e,t){let n=fs(Ew(e,t)),r=pc(e.transactionQueueTree_,t);return _O(r,i=>{gh(e,i)}),gh(e,r),pw(r,i=>{gh(e,i)}),n}function gh(e,t){let n=ur(t);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(g(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(g(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(En(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?Up(t,void 0):n.length=o+1,We(e.eventQueue_,fs(t),i);for(let s=0;s<r.length;s++)Mi(r[s])}}function UO(e){let t="",n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function $O(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):De(`Invalid query segment '${n}' in query '${e}'`)}return t}var ap=function(e,t){let n=HO(e),r=n.namespace;n.domain==="firebase.com"&&Ot(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ot("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||_x();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Fl(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new z(n.pathString)}},HO=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",l=443;if(typeof e=="string"){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");u===-1&&(u=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=UO(e.substring(u,d)));let f=$O(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(s=a==="https"||a==="wss",l=parseInt(t.substring(c+1),10)):c=t.length;let h=t.slice(0,c);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var _D="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",GO=function(){let e=0,t=[];return function(n){let r=n===e;e=n;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=_D.charAt(n%64),n=Math.floor(n/64);g(n===0,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=_D.charAt(t[i]);return g(s.length===20,"nextPushId: Length should be 20."),s}}();var tc=class{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+le(this.snapshot.exportVal())}},nc=class{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var ss=class{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return g(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var rc=class{constructor(t,n){this._repo=t,this._path=n}cancel(){let t=new pe;return OO(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Ge("OnDisconnect.remove",this._path);let t=new pe;return yD(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Ge("OnDisconnect.set",this._path),Pt("OnDisconnect.set",t,this._path,!1);let n=new pe;return yD(this._repo,this._path,t,n.wrapCallback(()=>{})),n.promise}setWithPriority(t,n){Ge("OnDisconnect.setWithPriority",this._path),Pt("OnDisconnect.setWithPriority",t,this._path,!1),$p("OnDisconnect.setWithPriority",n,!1);let r=new pe;return kO(this._repo,this._path,t,n,r.wrapCallback(()=>{})),r.promise}update(t){Ge("OnDisconnect.update",this._path),mw("OnDisconnect.update",t,this._path,!1);let n=new pe;return PO(this._repo,this._path,t,n.wrapCallback(()=>{})),n.promise}};var Ae=class e{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return L(this._path)?null:Ip(this._path)}get ref(){return new ze(this._repo,this._path)}get _queryIdentifier(){let t=oD(this._queryParams),n=wp(t);return n==="{}"?"default":n}get _queryObject(){return oD(this._queryParams)}isEqual(t){if(t=we(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=bp(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Kx(this._path)}};function Dc(e,t){if(e._orderByCalled===!0)throw new Error(t+": You can't combine multiple orderBy calls.")}function xn(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Rt){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Sn)throw new Error(r);if(typeof t!="string")throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==en)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(e.getIndex()===ee){if(t!=null&&!os(t)||n!=null&&!os(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(g(e.getIndex()instanceof Zo||e.getIndex()===Mp,"unknown index type."),t!=null&&typeof t=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function wc(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var ze=class e extends Ae{constructor(t,n){super(t,n,new es,!1)}get parent(){let t=$D(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},Ti=class e{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new z(t),r=Nn(this.ref,t);return new e(this._node.getChild(n),r,ee)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new e(i,Nn(this.ref,r),ee)))}hasChild(t){let n=new z(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function qp(e,t){return e=we(e),e._checkNotDeleted("ref"),t!==void 0?Nn(e._root,t):e._root}function Yp(e,t){e=we(e),e._checkNotDeleted("refFromURL");let n=ap(t,e._repo.repoInfo_.nodeAdmin);vw("refFromURL",n);let r=n.repoInfo;return!e._repo.repoInfo_.isCustomHost()&&r.host!==e._repo.repoInfo_.host&&Ot("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),qp(e,n.path.toString())}function Nn(e,t){return e=we(e),F(e._path)===null?bO("child","path",t,!1):xi("child","path",t,!1),new ze(e._repo,te(e._path,t))}function Sw(e,t){e=we(e),Ge("push",e._path),Pt("push",t,e._path,!0);let n=Dw(e._repo),r=GO(n),i=Nn(e,r),o=Nn(e,r),s;return t!=null?s=Ec(o,t).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function Tw(e){return Ge("remove",e._path),Ec(e,null)}function Ec(e,t){e=we(e),Ge("set",e._path),Pt("set",t,e._path,!1);let n=new pe;return Gp(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function Mw(e,t){e=we(e),Ge("setPriority",e._path),$p("setPriority",t,!1);let n=new pe;return Gp(e._repo,te(e._path,".priority"),t,null,n.wrapCallback(()=>{})),n.promise}function Aw(e,t,n){if(Ge("setWithPriority",e._path),Pt("setWithPriority",t,e._path,!1),$p("setWithPriority",n,!1),e.key===".length"||e.key===".keys")throw"setWithPriority failed: "+e.key+" is a read-only object.";let r=new pe;return Gp(e._repo,e._path,t,n,r.wrapCallback(()=>{})),r.promise}function Nw(e,t){mw("update",t,e._path,!1);let n=new pe;return xO(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function xw(e){e=we(e);let t=new ss(()=>{}),n=new as(t);return NO(e._repo,e,n).then(r=>new Ti(r,new ze(e._repo,e._path),e._queryParams.getIndex()))}var as=class e{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){let r=n._queryParams.getIndex();return new tc("value",this,new Ti(t.snapshotNode,new ze(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new nc(this,t,n):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},ic=class e{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new nc(this,t,n):null}createEvent(t,n){g(t.childName!=null,"Child events should have a childName.");let r=Nn(new ze(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new tc(t.type,this,new Ti(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function ms(e,t,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let l=n,c=(u,d)=>{sp(e._repo,e,a),l(u,d)};c.userCallback=n.userCallback,c.context=n.context,n=c}let s=new ss(n,o||void 0),a=t==="value"?new as(s):new ic(t,s);return FO(e._repo,e,a),()=>sp(e._repo,e,a)}function Ic(e,t,n,r){return ms(e,"value",t,n,r)}function Qp(e,t,n,r){return ms(e,"child_added",t,n,r)}function Zp(e,t,n,r){return ms(e,"child_changed",t,n,r)}function Kp(e,t,n,r){return ms(e,"child_moved",t,n,r)}function Xp(e,t,n,r){return ms(e,"child_removed",t,n,r)}function Jp(e,t,n){let r=null,i=n?new ss(n):null;t==="value"?r=new as(i):t&&(r=new ic(t,i)),sp(e._repo,e,r)}var qe=class{},oc=class extends qe{constructor(t,n){super(),this._value=t,this._key=n,this.type="endAt"}_apply(t){Pt("endAt",this._value,t._path,!0);let n=Lh(t._queryParams,this._value,this._key);if(wc(n),xn(n),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ae(t._repo,t._path,n,t._orderByCalled)}};function Rw(e,t){return ps("endAt","key",t,!0),new oc(e,t)}var lp=class extends qe{constructor(t,n){super(),this._value=t,this._key=n,this.type="endBefore"}_apply(t){Pt("endBefore",this._value,t._path,!1);let n=mR(t._queryParams,this._value,this._key);if(wc(n),xn(n),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ae(t._repo,t._path,n,t._orderByCalled)}};function Ow(e,t){return ps("endBefore","key",t,!0),new lp(e,t)}var sc=class extends qe{constructor(t,n){super(),this._value=t,this._key=n,this.type="startAt"}_apply(t){Pt("startAt",this._value,t._path,!0);let n=Fh(t._queryParams,this._value,this._key);if(wc(n),xn(n),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ae(t._repo,t._path,n,t._orderByCalled)}};function kw(e=null,t){return ps("startAt","key",t,!0),new sc(e,t)}var cp=class extends qe{constructor(t,n){super(),this._value=t,this._key=n,this.type="startAfter"}_apply(t){Pt("startAfter",this._value,t._path,!1);let n=gR(t._queryParams,this._value,this._key);if(wc(n),xn(n),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ae(t._repo,t._path,n,t._orderByCalled)}};function Pw(e,t){return ps("startAfter","key",t,!0),new cp(e,t)}var up=class extends qe{constructor(t){super(),this._limit=t,this.type="limitToFirst"}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ae(t._repo,t._path,hR(t._queryParams,this._limit),t._orderByCalled)}};function Fw(e){if(typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new up(e)}var dp=class extends qe{constructor(t){super(),this._limit=t,this.type="limitToLast"}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ae(t._repo,t._path,pR(t._queryParams,this._limit),t._orderByCalled)}};function Lw(e){if(typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new dp(e)}var fp=class extends qe{constructor(t){super(),this._path=t,this.type="orderByChild"}_apply(t){Dc(t,"orderByChild");let n=new z(this._path);if(L(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new Zo(n),i=lc(t._queryParams,r);return xn(i),new Ae(t._repo,t._path,i,!0)}};function Vw(e){if(e==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(e==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(e==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return xi("orderByChild","path",e,!1),new fp(e)}var hp=class extends qe{constructor(){super(...arguments),this.type="orderByKey"}_apply(t){Dc(t,"orderByKey");let n=lc(t._queryParams,Rt);return xn(n),new Ae(t._repo,t._path,n,!0)}};function jw(){return new hp}var pp=class extends qe{constructor(){super(...arguments),this.type="orderByPriority"}_apply(t){Dc(t,"orderByPriority");let n=lc(t._queryParams,ee);return xn(n),new Ae(t._repo,t._path,n,!0)}};function Bw(){return new pp}var gp=class extends qe{constructor(){super(...arguments),this.type="orderByValue"}_apply(t){Dc(t,"orderByValue");let n=lc(t._queryParams,Mp);return xn(n),new Ae(t._repo,t._path,n,!0)}};function Uw(){return new gp}var mp=class extends qe{constructor(t,n){super(),this._value=t,this._key=n,this.type="equalTo"}_apply(t){if(Pt("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new oc(this._value,this._key)._apply(new sc(this._value,this._key)._apply(t))}};function $w(e,t){return ps("equalTo","key",t,!0),new mp(e,t)}function lt(e,...t){let n=we(e);for(let r of t)n=r._apply(n);return n}KR(ze);nO(ze);var WO="FIREBASE_DATABASE_EMULATOR_HOST",vp={},zO=!1;function qO(e,t,n,r){e.repoInfo_=new Fl(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}function eg(e,t,n,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||Ot("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),me("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s=ap(o,i),a=s.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[WO]),c?(l=!0,o=`http://${c}?ns=${a.namespace}`,s=ap(o,i),a=s.repoInfo):l=!s.repoInfo.secure;let u=i&&l?new Go(Go.OWNER):new Dh(e.name,e.options,t);vw("Invalid Firebase Database URL",s),L(s.path)||Ot("Database URL must point to the root of a Firebase Database (not including a child path).");let d=QO(a,e,u,new Ch(e.name,n));return new yp(d,e)}function YO(e,t){let n=vp[t];(!n||n[e.key]!==e)&&Ot(`Database ${t}(${e.repoInfo_}) has already been deleted.`),ww(e),delete n[e.key]}function QO(e,t,n,r){let i=vp[t.name];i||(i={},vp[t.name]=i);let o=i[e.toURLString()];return o&&Ot("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new op(e,zO,n,r),i[e.toURLString()]=o,o}var yp=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(MO(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ze(this._repo,W())),this._rootInternal}_delete(){return this._rootInternal!==null&&(YO(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Ot("Cannot call "+t+" on a deleted database.")}};function Hw(){UD.IS_TRANSPORT_INITIALIZED&&De("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Gw(){Hw(),Yo.forceDisallow()}function Ww(){Hw(),vi.forceDisallow(),Yo.forceAllow()}function zw(e,t,n,r={}){e=we(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Ot("Cannot call useEmulator() after instance has already been initialized.");let i=e._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ot('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Go(Go.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:cg(r.mockUserToken,e.app.options.projectId);o=new Go(s)}qO(i,t,n,o)}function qw(e){e=we(e),e._checkNotDeleted("goOffline"),ww(e._repo)}function Yw(e){e=we(e),e._checkNotDeleted("goOnline"),LO(e._repo)}function Qw(e,t){ED(e,t)}function ZO(e){Dp(_g),Pi(new Ft("database",(t,{instanceIdentifier:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return eg(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),rn($C,HC,e),rn($C,HC,"esm2017")}var KO={".sv":"timestamp"};function Zw(){return KO}function Kw(e){return{".sv":{increment:e}}}var _p=class{constructor(t,n){this.committed=t,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function Xw(e,t,n){var r;if(e=we(e),Ge("Reference.transaction",e._path),e.key===".length"||e.key===".keys")throw"Reference.transaction failed: "+e.key+" is a read-only object.";let i=(r=n?.applyLocally)!==null&&r!==void 0?r:!0,o=new pe,s=(l,c,u)=>{let d=null;l?o.reject(l):(d=new Ti(u,new ze(e._repo,e._path),ee),o.resolve(new _p(c,d)))},a=Ic(e,()=>{});return VO(e._repo,e._path,t,s,a,i),o.promise}Sp.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Sp.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};ZO();var XO="@firebase/database-compat",JO="1.0.8";var ek=new gr("@firebase/database-compat"),Jw=function(e){let t="FIREBASE WARNING: "+e;ek.warn(t)};var tk=function(e,t,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(xe(e,t)+"must be a boolean.")},nk=function(e,t,n){if(!(n&&t===void 0))switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(xe(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var tg=class{constructor(t){this._delegate=t}cancel(t){w("OnDisconnect.cancel",0,1,arguments.length),ce("OnDisconnect.cancel","onComplete",t,!0);let n=this._delegate.cancel();return t&&n.then(()=>t(null),r=>t(r)),n}remove(t){w("OnDisconnect.remove",0,1,arguments.length),ce("OnDisconnect.remove","onComplete",t,!0);let n=this._delegate.remove();return t&&n.then(()=>t(null),r=>t(r)),n}set(t,n){w("OnDisconnect.set",1,2,arguments.length),ce("OnDisconnect.set","onComplete",n,!0);let r=this._delegate.set(t);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(t,n,r){w("OnDisconnect.setWithPriority",2,3,arguments.length),ce("OnDisconnect.setWithPriority","onComplete",r,!0);let i=this._delegate.setWithPriority(t,n);return r&&i.then(()=>r(null),o=>r(o)),i}update(t,n){if(w("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){let i={};for(let o=0;o<t.length;++o)i[""+o]=t[o];t=i,Jw("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ce("OnDisconnect.update","onComplete",n,!0);let r=this._delegate.update(t);return n&&r.then(()=>n(null),i=>n(i)),r}};var ng=class{constructor(t,n){this.committed=t,this.snapshot=n}toJSON(){return w("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var dr=class e{constructor(t,n){this._database=t,this._delegate=n}val(){return w("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return w("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return w("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return w("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return w("DataSnapshot.child",0,1,arguments.length),t=String(t),xi("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}hasChild(t){return w("DataSnapshot.hasChild",1,1,arguments.length),xi("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return w("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return w("DataSnapshot.forEach",1,1,arguments.length),ce("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(n=>t(new e(this._database,n)))}hasChildren(){return w("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return w("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return w("DataSnapshot.ref",0,0,arguments.length),new tn(this._database,this._delegate.ref)}get ref(){return this.getRef()}},bc=class e{constructor(t,n){this.database=t,this._delegate=n}on(t,n,r,i){var o;w("Query.on",2,4,arguments.length),ce("Query.on","callback",n,!1);let s=e.getCancelAndContextArgs_("Query.on",r,i),a=(c,u)=>{n.call(s.context,new dr(this.database,c),u)};a.userCallback=n,a.context=s.context;let l=(o=s.cancel)===null||o===void 0?void 0:o.bind(s.context);switch(t){case"value":return Ic(this._delegate,a,l),n;case"child_added":return Qp(this._delegate,a,l),n;case"child_removed":return Xp(this._delegate,a,l),n;case"child_changed":return Zp(this._delegate,a,l),n;case"child_moved":return Kp(this._delegate,a,l),n;default:throw new Error(xe("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,n,r){if(w("Query.off",0,3,arguments.length),nk("Query.off",t,!0),ce("Query.off","callback",n,!0),xc("Query.off","context",r,!0),n){let i=()=>{};i.userCallback=n,i.context=r,Jp(this._delegate,t,i)}else Jp(this._delegate,t)}get(){return xw(this._delegate).then(t=>new dr(this.database,t))}once(t,n,r,i){w("Query.once",1,4,arguments.length),ce("Query.once","callback",n,!0);let o=e.getCancelAndContextArgs_("Query.once",r,i),s=new pe,a=(c,u)=>{let d=new dr(this.database,c);n&&n.call(o.context,d,u),s.resolve(d)};a.userCallback=n,a.context=o.context;let l=c=>{o.cancel&&o.cancel.call(o.context,c),s.reject(c)};switch(t){case"value":Ic(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":Qp(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":Xp(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":Zp(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":Kp(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(xe("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(t){return w("Query.limitToFirst",1,1,arguments.length),new e(this.database,lt(this._delegate,Fw(t)))}limitToLast(t){return w("Query.limitToLast",1,1,arguments.length),new e(this.database,lt(this._delegate,Lw(t)))}orderByChild(t){return w("Query.orderByChild",1,1,arguments.length),new e(this.database,lt(this._delegate,Vw(t)))}orderByKey(){return w("Query.orderByKey",0,0,arguments.length),new e(this.database,lt(this._delegate,jw()))}orderByPriority(){return w("Query.orderByPriority",0,0,arguments.length),new e(this.database,lt(this._delegate,Bw()))}orderByValue(){return w("Query.orderByValue",0,0,arguments.length),new e(this.database,lt(this._delegate,Uw()))}startAt(t=null,n){return w("Query.startAt",0,2,arguments.length),new e(this.database,lt(this._delegate,kw(t,n)))}startAfter(t=null,n){return w("Query.startAfter",0,2,arguments.length),new e(this.database,lt(this._delegate,Pw(t,n)))}endAt(t=null,n){return w("Query.endAt",0,2,arguments.length),new e(this.database,lt(this._delegate,Rw(t,n)))}endBefore(t=null,n){return w("Query.endBefore",0,2,arguments.length),new e(this.database,lt(this._delegate,Ow(t,n)))}equalTo(t,n){return w("Query.equalTo",1,2,arguments.length),new e(this.database,lt(this._delegate,$w(t,n)))}toString(){return w("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return w("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if(w("Query.isEqual",1,1,arguments.length),!(t instanceof e)){let n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,n,r){let i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,ce(t,"cancel",i.cancel,!0),i.context=r,xc(t,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(xe(t,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new tn(this.database,new ze(this._delegate._repo,this._delegate._path))}},tn=class e extends bc{constructor(t,n){super(t,new Ae(n._repo,n._path,new es,!1)),this.database=t,this._delegate=n}getKey(){return w("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return w("Reference.child",1,1,arguments.length),typeof t=="number"&&(t=String(t)),new e(this.database,Nn(this._delegate,t))}getParent(){w("Reference.parent",0,0,arguments.length);let t=this._delegate.parent;return t?new e(this.database,t):null}getRoot(){return w("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)}set(t,n){w("Reference.set",1,2,arguments.length),ce("Reference.set","onComplete",n,!0);let r=Ec(this._delegate,t);return n&&r.then(()=>n(null),i=>n(i)),r}update(t,n){if(w("Reference.update",1,2,arguments.length),Array.isArray(t)){let i={};for(let o=0;o<t.length;++o)i[""+o]=t[o];t=i,Jw("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ge("Reference.update",this._delegate._path),ce("Reference.update","onComplete",n,!0);let r=Nw(this._delegate,t);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(t,n,r){w("Reference.setWithPriority",2,3,arguments.length),ce("Reference.setWithPriority","onComplete",r,!0);let i=Aw(this._delegate,t,n);return r&&i.then(()=>r(null),o=>r(o)),i}remove(t){w("Reference.remove",0,1,arguments.length),ce("Reference.remove","onComplete",t,!0);let n=Tw(this._delegate);return t&&n.then(()=>t(null),r=>t(r)),n}transaction(t,n,r){w("Reference.transaction",1,3,arguments.length),ce("Reference.transaction","transactionUpdate",t,!1),ce("Reference.transaction","onComplete",n,!0),tk("Reference.transaction","applyLocally",r,!0);let i=Xw(this._delegate,t,{applyLocally:r}).then(o=>new ng(o.committed,new dr(this.database,o.snapshot)));return n&&i.then(o=>n(null,o.committed,o.snapshot),o=>n(o,!1,null)),i}setPriority(t,n){w("Reference.setPriority",1,2,arguments.length),ce("Reference.setPriority","onComplete",n,!0);let r=Mw(this._delegate,t);return n&&r.then(()=>n(null),i=>n(i)),r}push(t,n){w("Reference.push",0,2,arguments.length),ce("Reference.push","onComplete",n,!0);let r=Sw(this._delegate,t),i=r.then(s=>new e(this.database,s));n&&i.then(()=>n(null),s=>n(s));let o=new e(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return Ge("Reference.onDisconnect",this._delegate._path),new tg(new rc(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var fr=class{constructor(t,n){this._delegate=t,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Gw,forceLongPolling:Ww}}useEmulator(t,n,r={}){zw(this._delegate,t,n,r)}ref(t){if(w("database.ref",0,1,arguments.length),t instanceof tn){let n=Yp(this._delegate,t.toString());return new tn(this,n)}else{let n=qp(this._delegate,t);return new tn(this,n)}}refFromURL(t){w("database.refFromURL",1,1,arguments.length);let r=Yp(this._delegate,t);return new tn(this,r)}goOffline(){return w("database.goOffline",0,0,arguments.length),qw(this._delegate)}goOnline(){return w("database.goOnline",0,0,arguments.length),Yw(this._delegate)}};fr.ServerValue={TIMESTAMP:Zw(),increment:e=>Kw(e)};function rk({app:e,url:t,version:n,customAuthImpl:r,customAppCheckImpl:i,namespace:o,nodeAdmin:s=!1}){Dp(n);let a=new Rc("database-standalone"),l=new ws("auth-internal",a);l.setComponent(new Ft("auth-internal",()=>r,"PRIVATE"));let c;return i&&(c=new ws("app-check-internal",a),c.setComponent(new Ft("app-check-internal",()=>i,"PRIVATE"))),{instance:new fr(eg(e,l,c,t,s),e),namespace:o}}var ik=Object.freeze({__proto__:null,initStandalone:rk});var ok=fr.ServerValue;function sk(e){e.INTERNAL.registerComponent(new Ft("database-compat",(t,{instanceIdentifier:n})=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("database").getImmediate({identifier:n});return new fr(i,r)},"PUBLIC").setServiceProps({Reference:tn,Query:bc,Database:fr,DataSnapshot:dr,enableLogging:Qw,INTERNAL:ik,ServerValue:ok}).setMultipleInstances(!0)),e.registerVersion(XO,JO)}sk(Re);function vs(e,t,n="on",r=Bi){return new j(i=>{let o=null;return o=e[n](t,(s,a)=>{r.schedule(()=>{i.next({snapshot:s,prevKey:a})}),n==="once"&&r.schedule(()=>i.complete())},s=>{r.schedule(()=>i.error(s))}),n==="on"?{unsubscribe(){o!=null&&e.off(t,o)}}:{unsubscribe(){}}}).pipe(S(i=>{let{snapshot:o,prevKey:s}=i,a=null;return o.exists()&&(a=o.key),{type:t,payload:o,prevKey:s,key:a}}),Hi())}function ak(e){return typeof e=="string"}function lk(e){return typeof e.exportVal=="function"}function iE(e){return e==null}function oE(e){return typeof e.set=="function"}function eE(e,t){return oE(t)?t:e.ref(t)}function sE(e,t){if(ak(e))return t.stringCase();if(oE(e))return t.firebaseCase();if(lk(e))return t.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof e}`)}function aE(e){return(iE(e)||e.length===0)&&(e=["child_added","child_removed","child_changed","child_moved"]),e}function lE(e,t,n){t=aE(t);let r=t.map(i=>vs(e,i,"on",n));return Mr(...r)}function ck(e,t,n){let r=lE(e,t).pipe(xr((i,o)=>[...i,o],[]));return dk(e,r,n)}function uk(e,t){return vs(e,"value","on",t).pipe(S(n=>{let r;return n.payload.forEach(i=>(r=i.key,!1)),{data:n,lastKeyToLoad:r}}))}function dk(e,t,n){return uk(e,n).pipe(su(t),S(([i,o])=>{let s=i.lastKeyToLoad,a=o.map(l=>l.key);return{actions:o,lastKeyToLoad:s,loadedKeys:a}}),ru(i=>i.loadedKeys.indexOf(i.lastKeyToLoad)===-1),S(i=>i.actions))}function tE(e,t){return function(r,i){return sE(r,{stringCase:()=>e.child(r)[t](i),firebaseCase:()=>r[t](i),snapshotCase:()=>r.ref[t](i)})}}function fk(e){return function(n){return n?sE(n,{stringCase:()=>e.child(n).remove(),firebaseCase:()=>n.remove(),snapshotCase:()=>n.ref.remove()}):e.remove()}}function hk(e,t,n){return vs(e,"value","once",n).pipe(ie(r=>{let i=[I(r)];return t.forEach(o=>i.push(vs(e,o,"on",n))),Mr(...i).pipe(xr(gk,[]))}),eu())}function cE(e,t){let n=e.length;for(let r=0;r<n;r++)if(e[r].payload.key===t)return r;return-1}function pk(e,t){if(iE(t))return 0;{let n=cE(e,t);return n===-1?e.length:n+1}}function gk(e,t){let{payload:n,prevKey:r,key:i}=t,o=cE(e,i),s=pk(e,r);switch(t.type){case"value":if(t.payload?.exists()){let a=null;t.payload.forEach(l=>{let c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,e=[...e,c],!1})}return e;case"child_added":if(o>-1)(e[o-1]?.key||null)!==r&&(e=e.filter(l=>l.payload.key!==n.key),e.splice(s,0,t));else{if(r==null)return[t,...e];e=e.slice(),e.splice(s,0,t)}return e;case"child_removed":return e.filter(a=>a.payload.key!==n.key);case"child_changed":return e.map(a=>a.payload.key===i?t:a);case"child_moved":if(o>-1){let a=e.splice(o,1)[0];return e=e.slice(),e.splice(s,0,a),e}return e;default:return e}}function nE(e,t,n){return t=aE(t),hk(e,t,n)}function mk(e,t){let n=t.schedulers.outsideAngular,r=t.schedulers.ngZone.run(()=>e.ref);return{query:e,update:tE(r,"update"),set:tE(r,"set"),push:i=>r.push(i),remove:fk(r),snapshotChanges(i){return nE(e,i,n).pipe(Jt)},stateChanges(i){return lE(e,i,n).pipe(Jt)},auditTrail(i){return ck(e,i,n).pipe(Jt)},valueChanges(i,o){return nE(e,i,n).pipe(S(a=>a.map(l=>o&&o.idField?B(v({},l.payload.val()),{[o.idField]:l.key}):l.payload.val())),Jt)}}}function rE(e,t){return function(){return vs(e,"value","on",t)}}function vk(e,t){return{query:e,snapshotChanges(){return rE(e,t.schedulers.outsideAngular)().pipe(Jt)},update(n){return e.ref.update(n)},set(n){return e.ref.set(n)},remove(){return e.ref.remove()},valueChanges(){return rE(e,t.schedulers.outsideAngular)().pipe(Jt,S(r=>r.payload.exists()?r.payload.val():null))}}}var yk=new D("angularfire2.realtimeDatabaseURL"),_k=new D("angularfire2.database.use-emulator"),rg=(()=>{class e{schedulers;database;constructor(n,r,i,o,s,a,l,c,u,d,f,h,p,m,C){this.schedulers=a;let b=l,$=Vo(n,s,r);c&&lh($,s,u,f,h,p,d,m),this.database=Ol(`${$.name}.database.${i}`,"AngularFireDatabase",$.name,()=>{let k=s.runOutsideAngular(()=>$.database(i||void 0));return b&&k.useEmulator(...b),k},[b])}list(n,r){let i=this.schedulers.ngZone.runOutsideAngular(()=>eE(this.database,n)),o=i;return r&&(o=r(i)),mk(o,this)}object(n){let r=this.schedulers.ngZone.runOutsideAngular(()=>eE(this.database,n));return vk(r,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||e)(_(pi),_(gi,8),_(yk,8),_(rt),_(Y),_(Nl),_(_k,8),_(UC,8),_(nh,8),_(rh,8),_(ih,8),_(oh,8),_(sh,8),_(ah,8),_(rr,8))};static \u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})(),uE=(()=>{class e{constructor(){Re.registerVersion("angularfire",hi.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||e)};static \u0275mod=Pe({type:e});static \u0275inj=ke({providers:[rg]})}return e})();var dE={production:!1,firebase:{apiKey:"AIzaSyBtOn1tIDv1MEhqVRE1WlUFhrO4iBYjhvQ",authDomain:"firepong-4e05b.firebaseapp.com",databaseURL:"https://firepong-4e05b-default-rtdb.firebaseio.com",projectId:"firepong-4e05b",storageBucket:"firepong-4e05b.firebasestorage.app",messagingSenderId:"382837340701",appId:"1:382837340701:web:139a5181a6e4ac415464f4"}};var Sc=class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=Pe({type:e});static \u0275inj=ke({imports:[Yd,Ml,BC.initializeApp(dE.firebase),uE]})};function wk(e,t){e&1&&(Ve(0,"p"),vt(1,"Game Status: Waiting to Start"),je())}function Ek(e,t){e&1&&(Ve(0,"p"),vt(1,"Game Status: Running"),je())}function Ik(e,t){e&1&&(Ve(0,"p"),vt(1,"Game Status: Paused"),je())}var Tc=class e{constructor(t){this.db=t}canvas;ctx;handleKeyDown(t){t.key==="w"&&this.paddle1Y>0&&(this.paddle1Y-=30),t.key==="s"&&this.paddle1Y<this.canvas.height-this.paddleHeight&&(this.paddle1Y+=30),t.key==="ArrowUp"&&this.paddle2Y>0&&(this.paddle2Y-=30),t.key==="ArrowDown"&&this.paddle2Y<this.canvas.height-this.paddleHeight&&(this.paddle2Y+=30)}paddleWidth=10;paddleHeight=80;ballRadius=10;paddle1Y=160;paddle2Y=160;ballX=400;ballY=200;ballDX=2;ballDY=2;player1Score=0;player2Score=0;winningScore=3;isRunning=!1;isPaused=!1;gameLoopId=null;confirmRestart=!1;difficulty="medium";updateScores(t,n){this.db.object("scores").set({player1Score:t,player2Score:n})}changeDifficulty(){this.difficulty==="easy"?this.ballDX=this.ballDY=2:this.difficulty==="medium"?this.ballDX=this.ballDY=4:this.difficulty==="hard"&&(this.ballDX=this.ballDY=6)}ngOnInit(){this.canvas=document.getElementById("pongCanvas"),this.ctx=this.canvas.getContext("2d"),this.db.object("scores").valueChanges().subscribe(t=>{t&&(this.player1Score=t.player1Score||0,this.player2Score=t.player2Score||0)})}startGame(){this.player1Score>0||this.player2Score>0?this.confirmRestart=confirm("Do you want to start a new game?"):this.confirmRestart=!0,this.confirmRestart&&(this.resetGame(),this.isRunning=!0,this.isPaused=!1,this.runGameLoop())}pauseGame(){this.isRunning&&(this.isPaused=!this.isPaused,this.isPaused?cancelAnimationFrame(this.gameLoopId):this.runGameLoop())}runGameLoop(){let t=()=>{this.isPaused||(this.clearCanvas(),this.drawScores(),this.drawPaddles(),this.drawBall(),this.updateBallPosition(),this.gameLoopId=requestAnimationFrame(t))};this.gameLoopId=requestAnimationFrame(t)}clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}drawPaddles(){this.ctx.fillStyle="blue",this.ctx.fillRect(0,this.paddle1Y,this.paddleWidth,this.paddleHeight),this.ctx.fillStyle="red",this.ctx.fillRect(this.canvas.width-this.paddleWidth,this.paddle2Y,this.paddleWidth,this.paddleHeight)}drawBall(){this.ctx.beginPath(),this.ctx.arc(this.ballX,this.ballY,this.ballRadius,0,Math.PI*2),this.ctx.fillStyle="green",this.ctx.fill(),this.ctx.closePath()}updateBallPosition(){this.ballX+=this.ballDX,this.ballY+=this.ballDY,(this.ballY+this.ballRadius>this.canvas.height||this.ballY-this.ballRadius<0)&&(this.ballDY=-this.ballDY),this.ballX-this.ballRadius<this.paddleWidth&&this.ballY>this.paddle1Y&&this.ballY<this.paddle1Y+this.paddleHeight&&(this.ballDX=-this.ballDX),this.ballX+this.ballRadius>this.canvas.width-this.paddleWidth&&this.ballY>this.paddle2Y&&this.ballY<this.paddle2Y+this.paddleHeight&&(this.ballDX=-this.ballDX),(this.ballX+this.ballRadius<0||this.ballX-this.ballRadius>this.canvas.width)&&this.resetBall()}resetBall(){this.ballX+this.ballRadius<0?this.player2Score++:this.ballX-this.ballRadius>this.canvas.width&&this.player1Score++,this.updateScores(this.player1Score,this.player2Score),this.checkForWin(),this.ballX=this.canvas.width/2,this.ballY=this.canvas.height/2,this.ballDX=-this.ballDX}drawScores(){this.ctx.font="20px Arial",this.ctx.fillStyle="black",this.ctx.fillText(`Player 1: ${this.player1Score}`,20,30),this.ctx.fillText(`Player 2: ${this.player2Score}`,this.canvas.width-140,30)}checkForWin(){this.player1Score===this.winningScore?(alert("Player 1 Wins!"),this.resetGame()):this.player2Score===this.winningScore&&(alert("Player 2 Wins!"),this.resetGame())}resetGame(){this.player1Score=0,this.player2Score=0,this.ballX=400,this.ballY=200,this.ballDX=(Math.random()>.5?1:-1)*(2+Math.random()*2),this.ballDY=(Math.random()>.5?1:-1)*(2+Math.random()*2),this.paddle1Y=160,this.paddle2Y=160}static \u0275fac=function(n){return new(n||e)(Q(rg))};static \u0275cmp=Zr({type:e,selectors:[["app-game"]],hostBindings:function(n,r){n&1&&mt("keydown",function(o){return r.handleKeyDown(o)},!1,ty)},decls:22,vars:8,consts:[[2,"text-align","center","margin-bottom","10px"],[4,"ngIf"],["id","pongCanvas","width","800","height","400"],[2,"text-align","center","margin-top","100px"],["for","difficulty"],["id","difficulty",3,"ngModelChange","change","ngModel"],["value","easy"],["value","medium"],["value","hard"],[2,"text-align","center","margin-top","10px"],[3,"click"],[3,"click","disabled"]],template:function(n,r){n&1&&(Ve(0,"div",0)(1,"h3"),vt(2),je(),Ld(3,wk,2,0,"p",1)(4,Ek,2,0,"p",1)(5,Ik,2,0,"p",1),je(),Yn(6,"canvas",2),Ve(7,"div",3)(8,"label",4),vt(9,"Difficulty:"),je(),Ve(10,"select",5),$d("ngModelChange",function(o){return jy(r.difficulty,o)||(r.difficulty=o),o}),mt("change",function(){return r.changeDifficulty()}),Ve(11,"option",6),vt(12,"Easy"),je(),Ve(13,"option",7),vt(14,"Medium"),je(),Ve(15,"option",8),vt(16,"Hard"),je()()(),Ve(17,"div",9)(18,"button",10),mt("click",function(){return r.startGame()}),vt(19,"Start/Restart"),je(),Ve(20,"button",11),mt("click",function(){return r.pauseGame()}),vt(21),je()()),n&2&&(vn(2),Bd("Player 1: ",r.player1Score," | Player 2: ",r.player2Score,""),vn(),Jr("ngIf",!r.isRunning),vn(),Jr("ngIf",r.isRunning&&!r.isPaused),vn(),Jr("ngIf",r.isPaused),vn(5),Ud("ngModel",r.difficulty),vn(10),Jr("disabled",!r.isRunning),vn(),jd(" ",r.isPaused?"Resume":"Pause"," "))},dependencies:[o_,wC,IC,Tl,yC,qf],styles:["canvas[_ngcontent-%COMP%]{border:2px solid black;display:block;margin:auto}"]})};var Mc=class e{title="ng-fire-pong";static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Zr({type:e,selectors:[["app-root"]],standalone:!0,features:[Za],decls:1,vars:0,template:function(n,r){n&1&&Yn(0,"app-game")},dependencies:[Ml,Sc,Tc]})};p_(Mc,eC).catch(e=>console.error(e));
